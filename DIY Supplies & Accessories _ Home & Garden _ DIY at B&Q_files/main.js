function FastClick(e){var t,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(i,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var a=Node.prototype.removeEventListener;"click"===t?a.call(e,t,i.hijacked||i,n):a.call(e,t,i,n)},e.addEventListener=function(t,i,n){var a=Node.prototype.addEventListener;"click"===t?a.call(e,t,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):a.call(e,t,i,n)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}if(diy&&diy.scene7url&&diy.scene7assetPath)diy.scene7url=-1===diy.scene7url.indexOf("http")?location.protocol+diy.scene7url:diy.scene7url,diy.scene7assetPath=diy.scene7assetPath+"/";else{var diy={};diy.scene7url="",diy.scene7assetPath="","undefined"!=typeof console&&console.warn&&console.warn("diy.scene7url and/or diy.scene7assetPath not found in page, S7 mediaviewer functionality will not work!")}requirejs.config({baseUrl:"/content/diyStore/js",waitSeconds:0,paths:{app:"app",lib:"lib",pages:"pages",polyfills:"polyfills",async:"lib/async",history:"lib/jquery.history",dwr:"lib/dwr.engine",qas:"../../../dwr/interface/AddressLookUp",lang:"langs/diy/en",clndr:"lib/clndr.min",moment:"lib/moment",underscore:"lib/underscore-min",s7sdk:diy.scene7url+"/s7sdk/2.8/js/s7sdk/utils/Utils",s7ProductViewer:"app/s7ProductViewer",s7MixedMediaViewer:diy.scene7url+"/s7viewers/html5/js/MixedMediaViewer",s7VideoViewer:diy.scene7url+"/s7viewers/html5/js/VideoViewer",s7BasicZoomViewer:diy.scene7url+"/s7viewers/html5/js/BasicZoomViewer",s7ZoomViewer:diy.scene7url+"/s7viewers/html5/js/ZoomViewer"},shim:{history:{deps:["jquery"]},"jquery.validate":{deps:["jquery"]},"jquery.mustache":{deps:["jquery"]},clndr:{deps:["jquery","moment","underscore"]},underscore:{exports:"_"},qas:{deps:["dwr"],exports:"implAddressLookUp"},s7sdk:{exports:"s7sdk"},s7ProductViewer:{deps:["s7sdk"],exports:"S7CarouselWrapper"},s7MixedMediaViewer:{exports:"s7viewers"},s7VideoViewer:{exports:"s7viewers"},s7BasicZoomViewer:{exports:"s7viewers"},s7ZoomViewer:{exports:"s7viewers"}}}),define("config",{app:{brand:"diy",language:"en",devMode:!1,debugMode:!1,imagePath:"/content/diyStore/img/",storeLocatorPartial:!1,predictiveSearch:{requestUrl:"/common/block/ajax/predictiveSearch.jsp"},productView:{compareCountUrl:"/common/product/tile/compareListCount.jsp"},cookies:{messageUrl:"/common/helpcustomers/block/overlay/cookie-{0}.jsp"},customRenderer:{productRecommendationUrl:"/common/recommendation/renderer/recommendationProductInfo.jsp"},scene7:{serverurl:"/is/image/",contenturl:"/skins/",videoserverurl:"/is/content/",emailurl:"/s7/emailFriend",config:{mixedMediaViewer:"Scene7SharedAssets/Universal_HTML5_MixedMedia_dark",videoViewer:"Scene7SharedAssets/Universal_HTML5_VideoViewer_dark",basicZoomViewer:"Scene7SharedAssets/Universal_HTML5_BasicZoomViewer_dark",zoomViewer:"Scene7SharedAssets/Universal_HTML5_ZoomViewer_dark"}},siteHeader:{desktop:"/desktopheader/?isAjax=true",desktop_secure:"/secureddesktopheader/?isAjax=true",mobile:"/mobileheader/?isAjax=true",mobile_secure:"/securedmobileheader/?isAjax=true"},wishlist:{buttonUrl:"/common/customer/block/account/wishlist/wishListBottomContentButtons.jsp"}}}),function(){var e=this,t=e._,i={},n=Array.prototype,a=Object.prototype,s=Function.prototype,o=n.push,r=n.slice,l=n.concat,c=a.toString,d=a.hasOwnProperty,u=n.forEach,h=n.map,p=n.reduce,f=n.reduceRight,g=n.filter,m=n.every,v=n.some,y=n.indexOf,b=n.lastIndexOf,w=Array.isArray,$=Object.keys,x=s.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.5.2";var C=k.each=k.forEach=function(e,t,n){if(null!=e)if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(var a=0,s=e.length;s>a;a++)if(t.call(n,e[a],a,e)===i)return}else for(var o=k.keys(e),a=0,s=o.length;s>a;a++)if(t.call(n,e[o[a]],o[a],e)===i)return};k.map=k.collect=function(e,t,i){var n=[];return null==e?n:h&&e.map===h?e.map(t,i):(C(e,function(e,a,s){n.push(t.call(i,e,a,s))}),n)};var T="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,i,n){var a=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=k.bind(t,n)),a?e.reduce(t,i):e.reduce(t);if(C(e,function(e,s,o){a?i=t.call(n,i,e,s,o):(i=e,a=!0)}),!a)throw new TypeError(T);return i},k.reduceRight=k.foldr=function(e,t,i,n){var a=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=k.bind(t,n)),a?e.reduceRight(t,i):e.reduceRight(t);var s=e.length;if(s!==+s){var o=k.keys(e);s=o.length}if(C(e,function(r,l,c){l=o?o[--s]:--s,a?i=t.call(n,i,e[l],l,c):(i=e[l],a=!0)}),!a)throw new TypeError(T);return i},k.find=k.detect=function(e,t,i){var n;return F(e,function(e,a,s){return t.call(i,e,a,s)?(n=e,!0):void 0}),n},k.filter=k.select=function(e,t,i){var n=[];return null==e?n:g&&e.filter===g?e.filter(t,i):(C(e,function(e,a,s){t.call(i,e,a,s)&&n.push(e)}),n)},k.reject=function(e,t,i){return k.filter(e,function(e,n,a){return!t.call(i,e,n,a)},i)},k.every=k.all=function(e,t,n){t||(t=k.identity);var a=!0;return null==e?a:m&&e.every===m?e.every(t,n):(C(e,function(e,s,o){return(a=a&&t.call(n,e,s,o))?void 0:i}),!!a)};var F=k.some=k.any=function(e,t,n){t||(t=k.identity);var a=!1;return null==e?a:v&&e.some===v?e.some(t,n):(C(e,function(e,s,o){return a||(a=t.call(n,e,s,o))?i:void 0}),!!a)};k.contains=k.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):F(e,function(e){return e===t})},k.invoke=function(e,t){var i=r.call(arguments,2),n=k.isFunction(t);return k.map(e,function(e){return(n?t:e[t]).apply(e,i)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,i){return k.isEmpty(t)?i?void 0:[]:k[i?"find":"filter"](e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return C(e,function(e,a,s){var o=t?t.call(i,e,a,s):e;o>n.computed&&(n={value:e,computed:o})}),n.value},k.min=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return C(e,function(e,a,s){var o=t?t.call(i,e,a,s):e;o<n.computed&&(n={value:e,computed:o})}),n.value},k.shuffle=function(e){var t,i=0,n=[];return C(e,function(e){t=k.random(i++),n[i-1]=n[t],n[t]=e}),n},k.sample=function(e,t,i){return arguments.length<2||i?e[k.random(e.length-1)]:k.shuffle(e).slice(0,Math.max(0,t))};var S=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,i){var n=S(t);return k.pluck(k.map(e,function(e,t,a){return{value:e,index:t,criteria:n.call(i,e,t,a)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,i,n){var a={},s=null==i?k.identity:S(i);return C(t,function(i,o){var r=s.call(n,i,o,t);e(a,r,i)}),a}};k.groupBy=A(function(e,t,i){(k.has(e,t)?e[t]:e[t]=[]).push(i)}),k.indexBy=A(function(e,t,i){e[t]=i}),k.countBy=A(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,i,n){i=null==i?k.identity:S(i);for(var a=i.call(n,t),s=0,o=e.length;o>s;){var r=s+o>>>1;i.call(n,e[r])<a?s=r+1:o=r}return s},k.toArray=function(e){return e?k.isArray(e)?r.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:r.call(e,0,t)},k.initial=function(e,t,i){return r.call(e,0,e.length-(null==t||i?1:t))},k.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:r.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,i){return r.call(e,null==t||i?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var D=function(e,t,i){return t&&k.every(e,k.isArray)?l.apply(i,e):(C(e,function(e){k.isArray(e)||k.isArguments(e)?t?o.apply(i,e):D(e,t,i):i.push(e)}),i)};k.flatten=function(e,t){return D(e,t,[])},k.without=function(e){return k.difference(e,r.call(arguments,1))},k.uniq=k.unique=function(e,t,i,n){k.isFunction(t)&&(n=i,i=t,t=!1);var a=i?k.map(e,i,n):e,s=[],o=[];return C(a,function(i,n){(t?n&&o[o.length-1]===i:k.contains(o,i))||(o.push(i),s.push(e[n]))}),s},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=r.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=l.apply(n,r.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=k.pluck(arguments,""+i);return t},k.object=function(e,t){if(null==e)return{};for(var i={},n=0,a=e.length;a>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},k.indexOf=function(e,t,i){if(null==e)return-1;var n=0,a=e.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,a+i):i}if(y&&e.indexOf===y)return e.indexOf(t,i);for(;a>n;n++)if(e[n]===t)return n;return-1},k.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(b&&e.lastIndexOf===b)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var a=n?i:e.length;a--;)if(e[a]===t)return a;return-1},k.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),a=0,s=new Array(n);n>a;)s[a++]=e,e+=i;return s};var q=function(){};k.bind=function(e,t){var i,n;if(x&&e.bind===x)return x.apply(e,r.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return i=r.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(r.call(arguments)));q.prototype=e.prototype;var a=new q;q.prototype=null;var s=e.apply(a,i.concat(r.call(arguments)));return Object(s)===s?s:a}},k.partial=function(e){var t=r.call(arguments,1);return function(){return e.apply(this,t.concat(r.call(arguments)))}},k.bindAll=function(e){var t=r.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var i={};return t||(t=k.identity),function(){var n=t.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},k.delay=function(e,t){var i=r.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(r.call(arguments,1)))},k.throttle=function(e,t,i){var n,a,s,o=null,r=0;i||(i={});var l=function(){r=i.leading===!1?0:new Date,o=null,s=e.apply(n,a)};return function(){var c=new Date;r||i.leading!==!1||(r=c);var d=t-(c-r);return n=this,a=arguments,0>=d?(clearTimeout(o),o=null,r=c,s=e.apply(n,a)):o||i.trailing===!1||(o=setTimeout(l,d)),s}},k.debounce=function(e,t,i){var n,a,s,o,r;return function(){s=this,a=arguments,o=new Date;var l=function(){var c=new Date-o;t>c?n=setTimeout(l,t-c):(n=null,i||(r=e.apply(s,a)))},c=i&&!n;return n||(n=setTimeout(l,t)),c&&(r=e.apply(s,a)),r}},k.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var i=[e];return o.apply(i,arguments),t.apply(this,i)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=$||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)k.has(e,i)&&t.push(i);return t},k.values=function(e){for(var t=k.keys(e),i=t.length,n=new Array(i),a=0;i>a;a++)n[a]=e[t[a]];return n},k.pairs=function(e){for(var t=k.keys(e),i=t.length,n=new Array(i),a=0;i>a;a++)n[a]=[t[a],e[t[a]]];return n},k.invert=function(e){for(var t={},i=k.keys(e),n=0,a=i.length;a>n;n++)t[e[i[n]]]=i[n];return t},k.functions=k.methods=function(e){var t=[];for(var i in e)k.isFunction(e[i])&&t.push(i);return t.sort()},k.extend=function(e){return C(r.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},k.pick=function(e){var t={},i=l.apply(n,r.call(arguments,1));return C(i,function(i){i in e&&(t[i]=e[i])}),t},k.omit=function(e){var t={},i=l.apply(n,r.call(arguments,1));for(var a in e)k.contains(i,a)||(t[a]=e[a]);return t},k.defaults=function(e){return C(r.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var j=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var a=c.call(e);if(a!=c.call(t))return!1;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=i.length;s--;)if(i[s]==e)return n[s]==t;var o=e.constructor,r=t.constructor;if(o!==r&&!(k.isFunction(o)&&o instanceof o&&k.isFunction(r)&&r instanceof r))return!1;i.push(e),n.push(t);var l=0,d=!0;if("[object Array]"==a){if(l=e.length,d=l==t.length)for(;l--&&(d=j(e[l],t[l],i,n)););}else{for(var u in e)if(k.has(e,u)&&(l++,!(d=k.has(t,u)&&j(e[u],t[u],i,n))))break;if(d){for(u in t)if(k.has(t,u)&&!l--)break;d=!l}}return i.pop(),n.pop(),d};k.isEqual=function(e,t){return j(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=w||function(e){return"[object Array]"==c.call(e)},k.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return d.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,i){for(var n=Array(Math.max(0,e)),a=0;e>a;a++)n[a]=t.call(i,a);return n},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};E.unescape=k.invert(E.escape);var I={escape:new RegExp("["+k.keys(E.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(E.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(I[e],function(t){return E[e][t]})}}),k.result=function(e,t){if(null!=e){var i=e[t];return k.isFunction(i)?i.call(e):i}},k.mixin=function(e){C(k.functions(e),function(t){var i=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),R.call(this,i.apply(k,e))}})};var L=0;k.uniqueId=function(e){var t=++L+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var _=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,i){var n;i=k.defaults({},i,k.templateSettings);var a=new RegExp([(i.escape||_).source,(i.interpolate||_).source,(i.evaluate||_).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(a,function(t,i,n,a,r){return o+=e.slice(s,r).replace(B,function(e){return"\\"+M[e]}),i&&(o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(o+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),a&&(o+="';\n"+a+"\n__p+='"),s=r+t.length,t}),o+="';\n",i.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{n=new Function(i.variable||"obj","_",o)}catch(r){throw r.source=o,r}if(t)return n(t,k);var l=function(e){return n.call(this,e,k)};return l.source="function("+(i.variable||"obj")+"){\n"+o+"}",l},k.chain=function(e){return k(e).chain()};var R=function(e){return this._chain?k(e).chain():e};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];k.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],R.call(this,i)}}),C(["concat","join","slice"],function(e){var t=n[e];k.prototype[e]=function(){return R.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t;return t||e._}}(this)),define("app/breakpoint",["underscore","polyfills/matchMedia"],function(e){var t=function(e){this.settings=$.extend(!0,{},e),this.mediaQueries=[],this.browserIsIncapable=!1,this.settings.noMatch&&"function"==typeof this.settings.noMatch&&(this.noMatch=this.settings.noMatch),this._init()};return t.prototype={_init:function(){window.matchMedia("only all").matches||(this.browserIsIncapable=!0),$(window).on("resize.matchmedia",e.debounce(this.testAll.bind(this),100))},register:function(e,t,i){var n={mq:e,handlers:t,isDefault:i};this.mediaQueries.push(n),this.test(n)},test:function(e){var t=e.isDefault&&this.browserIsIncapable,i=t?{matches:!0}:window.matchMedia(e.mq);return i.matches&&e.handlers.match?e.handlers.match():e.handlers.unmatch&&e.handlers.unmatch(),i.matches},testAll:function(){var e,t,i=!1;for(e=0;e<this.mediaQueries.length;e++)t=this.test(this.mediaQueries[e]),t&&(i=!0);!i&&this.noMatch&&this.noMatch()}},t}),define("app/customFormElements",["require"],function(e){var t=function(e){this.config={id:"form",parentPrefixClass:"parent-",addClassOnParent:!1,onFocusClass:"focus",onCheckClass:"checked",disableClass:"disabled ",buttons:'[class *="-button"]',selectors:{form:"",selects:"select:not(.default)",radios:'input[type="radio"]:not(.accessibility)',checkboxes:'input[type="checkbox"]',textInputs:'input[type="text"], input[type="email"], input[type="password"], input[type="number"]',submit:'input[type="submit"]'}},$.extend(!0,this.config,e||{}),this.initialize(!0),this._bindEvents()},i=t.prototype;return i.initialize=function(e){this.$={},this._loadObjects(e),this.draw(),this._init()},i.reinit=function(){this.initialize(!1)},i._init=function(){this.updateElementsState()},i.draw=function(){this.$.checkboxes.each(function(e,t){$(t).parent().hasClass("input-checkbox")||$(t).wrap('<span class="input-checkbox"></span>')}),this.$.radios.each(function(e,t){$(t).parent().hasClass("input-radio")||$(t).wrap('<span class="input-radio"></span>')})},i.updateElementsState=function(e){var t=this,i=this.config.selectors,n="",a="";e?(n=e.find(i.radios),a=e.find(i.checkboxes)):(n=this.$.radios,a=this.$.checkboxes),n.add(a).each(function(){var e=$(this);this.disabled&&t._setDisabled(e),this.checked?t._setChecked(e):t._unsetChecked(e)})},i.setElemState=function(e,t){var i=e.parent();i.addClass(t),this.config.addClassOnParent&&i.parent().addClass(this.config.parentPrefixClass+t)},i.unsetElemState=function(e,t){var i=e.parent();i.removeClass(t),this.config.addClassOnParent&&i.parent().removeClass(this.config.parentPrefixClass+t)},i.toggleElemState=function(e,t){var i=e.parent();i.toggleClass(t),this.config.addClassOnParent&&i.parent().toggleClass(this.config.parentPrefixClass+t)},i._focus=function(e){this.setElemState(e,this.config.onFocusClass)},i._blur=function(e){this.unsetElemState(e,this.config.onFocusClass)},i._check=function(e){this.toggleElemState(e,this.config.onCheckClass)},i._setChecked=function(e){this.setElemState(e,this.config.onCheckClass)},i._unsetChecked=function(e){this.unsetElemState(e,this.config.onCheckClass)},i._setDisabled=function(e){this.setElemState(e,this.config.disableClass)},i._unsetDisabled=function(e){this.unsetElemState(e,this.config.disableClass)},i._handleSelect=function(e){-1!==e.selectedIndex?e.parentNode.childNodes[0].nodeValue=e.options[e.selectedIndex].text:e.parentNode.childNodes[0].nodeValue=e.options[0].text},i._loadObjects=function(e){var t,i=null;for(i in this.config.selectors)this.config.selectors.hasOwnProperty(i)&&(e&&(this.config.selectors[i]=this.config.id+" "+this.config.selectors[i]),t=this.config.selectors[i],this.$[i]=$(t))},i._bindEvents=function(){var e=this,t=this.config,i=t.selectors;$(document).on("click.customFormElements",i.checkboxes,function(){e._check($(this))}).on("focus.customFormElements",i.checkboxes,function(){e._focus($(this))}).on("blur.customFormElements",i.checkboxes,function(){e._blur($(this))}),$(document).on("click.customFormElements change.customFormElements",i.radios,function(){var t=$(this),n=t.attr("name");$(i.radios).each(function(t,i){i=$(i),i.attr("name")===n&&(i.prop("checked")?e._setChecked(i):e._unsetChecked(i))})}).on("focus.customFormElements",i.radios,function(){e._focus($(this))}).on("blur.customFormElements",i.radios,function(){e._blur($(this))})},i.unbindEvents=function(){$(document).off(".customFormElements")},t}),define("app/templates",["require"],function(e){var t=function(){this.cache={}};return t.prototype.render=function(e,t){var i=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return"undefined"!=typeof this.cache[e]?this.cache[e](t):(this.cache[e]=i,t?i(t):i)},t}),define("lang",["require"],function(e){var t={};return t.validation={errorMessage:"Please correct the following errors",required:"Sorry &#45; you can&rsquo;t leave this field blank",remote:"Please fix this field",email:"Please enter a valid email address",url:"Please enter a valid URL",date:"Please enter a valid date",dateISO:"Please enter a valid date (ISO)",number:"Please enter a valid number",digits:"You can use only numbers in this field",creditcard:"Please enter a valid credit card number",equalTo:"Please enter the same value again",accept:"Please enter a value with a valid extension",maxlength:"You can enter up to {0} characters in this field",minlength:"Please enter at least {0} characters",rangelength:"Please enter a value between {0} and {1} characters long",range:"Please enter a value between {0} and {1}",max:"Please enter a value less than or equal to {0}",min:"Please enter a value greater than or equal to {0}",select_store:"Please select a store",has_store_selected:{otherField:"Sorry - you must select a store, type a location and then search for a store to select"},question:"Sorry - you must answer this question",phone:{min:"You have to enter at least {0} numbers into this field",max:"You can enter up to {0} numbers in this field"},mobile:{min:"Sorry – mobile numbers must be exactly {0} digits long",max:"Sorry – mobile numbers must be exactly {0} digits long"},house_number:"Sorry, you must provide a house name or number",house_name:"Sorry, you must provide a house name or number",delivery_fail:"Sorry, you must select at least one option to continue",agree_terms:"To continue with your order, please confirm that you agree to our terms & conditions",agree_terms_generic:"To continue, please confirm that you agree to our terms & conditions",card_issue:"Issue number cannot be greater than 999",card_security:{required:"Please enter the last 3 digits on the back of your card",min:"Please enter the last 3 digits on the back of your card",max:"Please enter the last 3 digits on the back of your card"},confirm_pwd:"Sorry - the new passwords you've entered don't match",confirm_email:"Sorry - the email addresses you've entered don't match",membership_number:{min:"The membership number you've entered is too short",max:"The membership number you've entered is too long"},ean:"Product codes comprise numeric characters only (0-9) <br/> please re-enter and try again",order_reference:"Sorry – you cannot leave this field blank when you are using a Trade UK card to pay for your order",test_related_phone:"Please fill in phone number field",test_related_email:"Please fill in email address field"},t.validation_methods={unicodeWithBasicPunc:"You can only use letters, numbers and these characters in this field: ' . , - & #",phone:"You can use only numbers and these characters in this field: + ( )",mobileuk:"Sorry – we can only accept UK mobile numbers starting '07'",minlengthIgnoreSpaces:"You have to enter at least {0} characters into this field",maxlengthIgnoreSpaces:"You can enter up to {0} characters in this field",alphanumeric:"You can use only the numbers 0-9 and letters A-Z in this field",alphanumericWithHyphens:"You can use only the numbers 0-9 and letters A-Z in this field",digitsWithSpaces:"You can use only numbers in this field",postcodeUK:"Please enter a valid post code",postcodeJeGy:"Sorry, we don’t currently deliver to this post code",email:"Verify you have a valid email address",membership:"Please enter a valid membership number",require_one:"Please select at least one of the options.",cardname:"You can only use letters and these characters in this field: ' -",cardEndDate:"Sorry - you can't enter a date which is in the past",cardStartDate:"Sorry - you can't enter a date which is in the future",require_from_group:"Please fill at least {0} of these fields.",creditcard:"The card number you have entered is not valid."},t.mainBasket={item_remove:{sure:"Sure you want to remove this item from your basket?",cancel:"Cancel",confirm:"Yes, remove"},empty:{sure:"Sure you want to remove all items from your basket?",cancel:"Cancel",confirm:"Yes, remove"},showVoucherMessage:{sure:"Sure you want to remove this item from your basket?",cancel:"Cancel",confirm:"Yes, remove"},confirmDelete:{sure:"Sure you want to remove this item from your basket?",cancel:"Cancel",confirm:"Yes, remove"},removeVoucher:{sure:"Do you wish to remove this voucher?",cancel:"Cancel",confirm:"Yes, remove"},removeDiscountCard:{sure:"Do you wish to remove this voucher?",cancel:"Cancel",confirm:"Yes, remove"},updatingBasket:"Updating basket",basketHeading:"My basket",categoryGridShowMore:"Show me more",categoryGridShowLess:"Show me less"},t.calculators={coverage:{product1:"Knauf EkoRoll Loft Insulation, 100mm",product2:"Knauf EkoRoll Loft Insulation, 200mm",product3:"B&Q Insulated Timber Loft Board (L) 1200 x (W) 320 x (D) 123mm",removeDuplicate:"Remove"},message:{moreOrEqual:"You will need more than one radiator to heat your room, so choose two or more radiators that in total provide your BTU requirements. Browse our selection of radiators below to find the one that's right for you and your room. <br/><br/> HELPFUL TIP: Use the BTU filter in the menu on the left-hand side of the page to find radiators within your BTU range.",lessThanAndNotBathroom:"You only need one radiator. Look for one which meets your total BTU requirement. Browse our selection of radiators below to find the one that's right for you and your room. <br/><br/> HELPFUL TIP: Use the BTU filter in the menu on the left-hand side of the page to find radiators within your BTU range",lessThanAndBathroom:"We have a wide range of radiators and towel warmers suitable for bathrooms.  Choose a smaller or slimline radiator which meets your BTU requirement, or consider a towel warmer if your BTU requirement is below 3000 BTU.  Browse our selection below to find one that's right for your bathroom. <br/><br/>HELPFUL TIP: Use the BTU filter in the menu on the left-hand side of the page to find radiators within your BTU range."}},t.accessibilityLinks={menuText:"Menu",articleText:"Articles",productText:"Products"},t.accessToLocalNav={linkText:"Skip to area navigation"},t.AddressLookup={serverDown:"SERVER DOWN",notFound:"NOT FOUND",validateQAS:"Please find and select your address below"},t.ajaxForms={editNotify:"Your changes have been successfully updated",confirmChanges:{title:"Confirm changes",message:"You have not saved the changes you made to this section. Would you like to save them now?"}},t.ajaxList={containerMissing:"Container selector must be specified"},t.ajaxLoader={defaultMessage:"Updating..."},t.carouselHero={controlButtonsText:{prev:"Previous",next:"Next"},currency:{htmlEntity:"&pound;"}},t.facetsSection={showMore:"Show more",showLess:"Show less",accessFacetText:"is disabled"},t.googleMaps={myLocation:"My location",fullDetails:"Full details",error1:"We couldn't find the location you entered. Please enter another direction and try again.",error2:"We couldn't determine a route between your location and our store.",error3:"We're sorry, but an unknown error occured. Please try again."},t.siteHeader={error:"There was a problem retrieving site header"},t.helpfulArticle={loading:"Loading..."},t.infiniteScroll={error:"no size of request specified.",loadingMore:"Loading more data"},t.JQtouch={errorElement:"TouchHandler(): A element must be provided",errorCallback:"TouchHandler(): A callback must be supplied"},t.lazyLoad={errorTarget:"target was not specified."},t.navRoom={guidesButtonText:{prev:"Show previous set of guides",next:"Show next set of guides"},projectButtonText:{prev:"Show previous set of projects",next:"Show next set of projects"}},t.pagination={loading:"Loading"},t.predictiveSearch={altText:{prefix:"Buy",suffix:"Online at diy.com"},matchingProductsHeadingTempate:"Products",matchingArticlesHeadingTempate:"Information &amp; advice"},t.productView={compareNowDefaultHTML:"Compare (max 4)",compareNow:"Compare Now"},t.qtyFields={error:"target was not specified."},t.rangeExplorer={controlButtonsText:{prev:"Show previous set of ranges",next:"Show next set of ranges"},imagesControlButtonsText:{prev:"Show previous set of images",next:"Show next set of images"}},t.showMoreLess={showMore:"Show more",showLess:"Show less"},t.showMoreLessGrid={showMore:"Show more",showLess:"Show less"},t.slider={controlButtons:{prev:"Show previous set of products",next:"Show next set of products"},counterHTML:{part1:"Currently on",part2:"slide",part3:"of"}},t.storeSelector={hiddenInputLabelText:"What would be the most convenient store for you to visit?",
loadingMap:"loading map"},t.tabs={currentTab:"current tab: "},t.toggleTarget={error:"Toggle selector was not specified."},t.toolTip={toolTipMsg:"You may only compare a maximum of 4 products"},t.wishlist={closedText:"(Open wish list toggle)",openedText:"(Close wish list toggle)"},t.storeSelector={hiddenInputLabelText:"What would be the most convenient store for you to visit?"},t.checkoutDelivery={moment:{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan._Feb._Mar_Apr._May._Jun._Jul._Aug._Sept._Oct._Nov._Dec.".split("_"),weekdays:"Monday_Tuesday_Wednesday_Thursday_Friday_Saturday_Sunday".split("_"),weekdaysShort:"Mon_Tue_Wed_Thu_Fri_Sat_Sun".split("_"),weekdaysMin:"Mo_Tu_We_Th_Fr_Sa_Su".split("_")},noDatesTxt:"Unfortunately we have no alternative dates available for this delivery"},t.checkoutPayment={newCardSelect:"Please Select",tradeAccountCard:"TradeUK Account Card",cardDetails:"Card details",handleGiftCardCheckResponse:{unableToFetch:"Unable to fetch gift card information",messageLn1:"There was an error processing your request",messageLn2:"at this time. Please check your card number and",messageLn3:"card PIN and try again."}},t.careers={questionXofY:{question:"Question",of:"of"},resultsText:"Results text"},t.careers.sales={questions:[{title:"Building Relationships",text:"A new customer has come to the store to order a kitchen for their new home. They'd like the kitchen as soon as possible, but your store's Design Consultant is on holiday and won't be back until next week. ",options:["Explain to the customer that your Design Consultant is on holiday but will be able to help when they get back next week.","Spend some time with the customer to gather all the details needed so the Design Consultant can provide a quote quickly when they get back.","Contact other local stores to see whether a Design Consultant is free to talk to your customer whilst they're in your store. "],values:[0,70,30],answer:["Whilst it's good to ensure the customer receives expert advice from the Design Consultant, you may want to think about what you can do to help in the meantime.","It's great that you're taking the time to gather information from customers, even when it's beyond your immediate responsibilities.","Whilst colleagues at other stores are often happy to help if they are not too busy with their own customers, you may want to consider gathering the information yourself."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/Careers_Sales_Q1"},{title:"Communication",text:"A customer has come into the store and asked you for a specific product. However, they're using a product name that you're not familiar with and although you've asked them to repeat themselves to check your understanding, you're still not sure what they want. ",options:["Ask the customer what they'll be using the product for, using open questions to get a better understanding.","Take the customer to the area of the store you think is most relevant for them and ask whether this is what they're looking for.","Make an educated guess about what the customer is asking for and explain how they'll be able to use the product."],values:[70,30,0],answer:["It's great that you're willing to spend time with our customers to make sure you offer them the right product to meet their needs and don't sell them the wrong thing.","It's good that you're taking the initiative and showing examples to make sure you find the right product for customers, but you could ask more questions to understand the situation better. ","Whilst it can feel awkward to ask customers again what they're looking for, it is important to make sure that we're selling them the best product to meet their needs."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/Careers_Sales_Q2"},{title:"Learning",text:"After working at B&Q for a few months, you move to a different department to learn more about our full range of products and services. However, you're not familiar with these products and feel unsure about helping customers as you have little experience in this area.",options:["Make recommendations to your customers based on the information you've learnt from our ‘how to' and product brochures.","Refer customers to a more experienced colleague to deal with their questions.","Read our product brochures and ask colleagues what type of questions they get and how you should answer them."],values:[30,0,70],answer:["It's good that you're willing to apply what you've read, but you could also learn from the experiences of your colleagues.","Whilst it's good to make sure the customer gets help, it's important that you develop your own knowledge about our products rather than always relying on your colleagues.","It's great that you're being proactive about developing your knowledge and are willing to ask lots of questions to learn from more experienced colleagues. "],image:"http://kingfisher.scene7.com/is/image/Kingfisher/Careers_Sales_Q3"},{title:"Taking Responsibility",text:"The store has been running a promotion to give customers 10% off their shopping. It's been a great success, however you realise that some of your regular customers haven't been into the store during this time and the offer ends tomorrow. ",options:["Decide that your customers probably didn't want anything in the offer, as they would've received information about the promotion already.","Contact your customers to see whether they are aware of the offer, letting them know that the products they like to buy are still available.","Suggest your colleague contacts all customers to see whether there is anything they'd like to order over the phone to make use of the offer. "],values:[0,70,30],answer:["It's good you have an awareness of the communications that customers receive, however they may have not been aware that the offer finishes tomorrow. ","It's great that you've checked your customers are aware of the offer and you don't want them to miss out. ","It's great that you're suggesting we take orders by phone so customers don't miss out on the offer, however it may have more impact if you contact customers yourself. "],image:"http://kingfisher.scene7.com/is/image/Kingfisher/Careers_Sales_Q4"},{title:"Adapting and Coping",text:"It's a really busy day in the store, with lots of customers asking for help. You enjoy helping a variety of customers with their different requests and you're also keen to make sure each customer is served. ",options:["Advise the waiting customers that you'll be with them as soon as possible and phone for help from a colleague to reduce their waiting time.","Work with each customer as quickly as you can, advising the waiting customers that you'll be with them as soon as possible.","Do your best to work with each customer in turn."],values:[70,30,0],answer:["It's great that you're willing to give good service, and know when to call for help to keep the customer happy.","Whilst it's great that you're helping all our customers, you may want to call on your colleagues to help during busy times. ","It's good that you're prepared to focus on one customer at a time, but you may wish to tell customers that you know they're waiting and call for help from colleagues."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/Careers_Sales_Q5"},{title:"Influencing",text:"It's a busy day in the store. After browsing the displays, a customer asks for your advice about two products which seem to do the same job. They tell you that they can't make up their mind which product to choose. ",options:["Explain to the customer that the two products are very similar and suggest that they take some time to decide what they want.","Offer the customer a demonstration to explain the features of both products.","Ask questions about how they'll use the product, then explain which product is better for their needs."],values:[0,30,70],answer:["Whilst we like to give the customer time to make choices, it's important to advise them when we think there‘s a better option.  ","It's good that you demonstrate products to our customer, but you should also explore the customer's needs.","It's great that you're identifying what the purpose would be and using that information to get the right product. "],image:"http://kingfisher.scene7.com/is/image/Kingfisher/Careers_Sales_Q6"}],results:[{description:"<p>Our Sales team encounters a range of exciting and challenging situations. Although you appear to respond well in some of these situations, your answers indicate that there are aspects of the job that you may find difficult. Have a look at our other roles to see if they suit you better before applying.</p>",links:["find"]},{description:"<p>You've responded well to some but not all of the challenges faced by our Sales team. We'd encourage you to find out more about the job and consider whether it fits with your skills and experience. </p>",links:["find","apply"],findURL:["/diy/jsp/corporate/content/careers/careers_test/index.jsp"]},{description:"<p>Great - you're already thinking like we do. You seem to be the kind of person who would fit in well with our existing Sales team and develop key relationships with our customers. Apply today and if successful you could soon be helping our customers to create better homes. We look forward to receiving your application.</p>",links:["apply"]}]},t.careers.expert={questions:[{title:"Building Relationships ",text:"Following the installation of a shed, the customer has called to say there's a fault with the door. When you ask questions to find out more about the problem, the customer requests a refund.",options:["Identify the problem and explain to the customer how it can be fixed.","Arrange for the shed to be collected and give the customer a refund.","Offer a replacement shed to be delivered and installed."],values:[0,30,70],answer:["Whilst it's good that you're trying to fix the problem for our customers, it's also important to offer to replace any faulty goods.","It's good that you're helping the customer with their refund, however this may mean they buy another shed elsewhere, so it would be better to offer a replacement and keep them as a customer.","As an Expert, it's great that you know when we should replace a product rather than just giving a refund so that we can keep our customers happy."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/expert-q1"},{title:"Communication",text:"As one of our Experts, you're often asked to help customers who need specialist advice. A customer has come into the store asking for a specific product. After asking what it will be used for, you're not sure whether this will be the best option for them. ",options:["Take the customer to the product they've asked for.","Spend time with the customer to find out more about their project.","Take the customer to the products you have available and talk them through the benefits of each so they can make an informed choice. "],values:[0,70,30],answer:["Whilst it's good to help them find the product, it would be better if you asked questions to make sure it's right for their needs. ","It's great that you're taking the time to understand the customer's situation, because this will make sure you're able to offer them the right product. ","It's good that you have given them more choices, however by using your expertise you could ask questions and offer more specific advice. "],image:"http://kingfisher.scene7.com/is/image/Kingfisher/expert-q2"},{title:"Learning ",text:"It's important to keep your knowledge about the rules and regulations relating to our products up to date, particularly in your specialist area. You've booked onto a training course related to your specialist area next week. You suggest to your manager that your colleagues may benefit from attending the course too. However, they're not able to go to the course because it's in another store. ",options:["Arrange a time to hold a briefing session with your colleagues to pass on the new information you've learnt from the course. ","Ask your colleagues to refer any customer questions about your specialist area to you, suggesting they listen to your answers to learn themselves.","Identify when the next training session will be taking place and re-book yourself a place with a couple of your colleagues."],values:[70,30,0],answer:["It's great that you're willing to share your experience and knowledge with others - as an Expert you may know more than them, but they also need a good level of knowledge in order to help our customers. ","Whilst it's good for your colleagues to learn through customer situations, by proactively passing on your learning they'll be less reliant on you when talking to customers.","Although it's good that you're thinking of your colleagues and arranging to attend at the same time, you could go to the training straight away and then share what you learnt."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/expert-q3"},{title:"Taking Responsibility",text:"It's a really hot day, and you've arrived at the store to find that plants in the garden centre still need to be watered so they don't wilt before customers arrive. You also need to put out some new stock and tidy up. ",options:["Choose to tidy the garden centre and remove wilting plants from the display so customers aren't distracted by them.","Focus on getting the new stock on display so your customers have a wide choice available to them when the store opens.","Prioritise watering the plants so they are healthy and at their best before customers arrive. "],values:[30,0,70],answer:["It's great that you're keen to show our best plants, but it's also important to prioritise those that need immediate attention to avoid losing any stock. ","Whilst it's good to ensure customers have a choice of plants and stock to buy today, it's also important that all our plants are well cared for.","It's great that you want to maintain the store's reputation of having an experienced garden centre team by ensuring the plants are well looked after."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/expert-q4"},{title:"Adapting and Coping",text:"You enjoy working in the store when it's busy and thriving, but this also means that you have to respond to a lot more customer queries and help your colleagues by providing expert advice. Due to a series of store promotions and a great weather forecast, the coming month is expected to be particularly busy. ",options:["Suggest your colleagues call an Expert at another store when a customer has a question so you're able to focus on your existing customers. ","Set aside the time to explain to your colleagues how to answer some of the common questions that you‘re asked.","Explain to your manager that you're feeling under pressure and need extra support this month."],values:[0,70,30],answer:["It's good to work closely with the other stores, however your colleagues may also be busy and our customers may prefer to discuss their question with someone in person","It's great that you're willing to develop others and use their support to manage your pressured workload. ","Whilst it's good that you're happy to ask for extra support, a more proactive approach would be to work with your colleagues so they can answer the more common queries you receive."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/expert-q5"},{title:"Influencing",text:"Some new stock that you're excited about has arrived and you're keen to put it on display. Using your expert knowledge, you've chosen a display area which will show the product at its best. However, your manager disagrees and wants it moved to another place where they think it will look better. ",options:["Explain to your manager that based on your expertise you think this is the most suitable place for this product display.","Explain your intentions to your manager, agreeing that you'll move the display for now but if it's not attracting customers' attention then you'll move it back.","Listen to your manager, as they're experienced in running the department, and move the product as they've requested."],values:[70,30,0],answer:["It's great that you're confident in your role as Expert and willing to influence and educate others about what's right for our products.","It's good that you're happy to give an explanation for your actions so others can understand, however sometimes you may benefit from being more confident when your knowledge and experience helps us know what's best.","Whilst our managers are experienced, they may not have the same in-depth technical knowledge and understanding as our Experts, so you may want to consider how to influence others to reach the best outcome."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/expert-q6"},{title:"Analysing and Interpreting ",text:"One of your regular customers has a recurring problem with a light in their house which keeps blowing the fuse when it's used. They've come to the store today to replace the light. As with all our customers it's important to resolve the problem. ",options:["Show the customer different lights so they can choose a replacement.","Ask the customer how long they've had the light and suggest the problem may be with their wiring instead of the light. ","Ask the customer more questions to understand the situation better, suggesting they take a photo of the light fitting so you can assess the problem more accurately."],values:[0,30,70],answer:["Whilst it's good that you're keen to help the customer choose a replacement, you may benefit from really understanding the cause of the problem.","It's great that you're trying to identify the problem, but you could go further to understand the situation better and find a solution.","It's great that you're keen to get to the root cause of the situation and explore possible options so you can make informed recommendations."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/expert-q7"}],results:[{description:"<p>Our Experts encounter a range of exciting and challenging situations. Although you appear to respond well in some of these situations, your answers indicate that there are aspects of the job that you may find difficult. Have a look at our other roles to see if they suit you better before applying.</p>",links:["find"]},{description:"<p>You've responded well to some but not all of the challenges faced by our Experts. We'd encourage you to find out more about the job and consider whether it fits with your skills and experience. </p>",links:["find","apply"],findURL:["/diy/jsp/corporate/content/careers/careers_test/index.jsp"]},{description:"<p>Great - you're already thinking like we do. You seem to be the kind of person who would fit in well with our team of Experts and give our customers the best solution to meet their needs. Apply today and if successful you could soon be helping our customers create better homes. We look forward to receiving your application.</p>",links:["apply"]}]},t.careers.service={questions:[{title:"Building Relationships",text:"A customer is re-fitting their bathroom and has checked online to see if a specific colour of tile is in stock. When they come into the store, they can't find the item so they ask you for help. After checking on our stock system, you realise that we don't have the item in store.",options:["Apologise for the mistake and tell them to come back next week when the tiles are back in stock","Explain that there's been a mistake but that you're able to offer them a similar tile that's in stock, so they could take it away with them today","Apologise for the mistake and locate the tiles in the nearest store, giving the customer the option to collect them today or have them delivered tomorrow"],values:[0,30,70],answer:["It's good that you've apologised, but rather than wait for the new delivery, there may be other options you can explore to meet the customer's needs.","It's great that you're able to admit there has been a mistake and offer an alternative, but you may want to see if you can get them the tile they asked for first.","It's great that you're happy to be honest when there's been a mistake and find a solution for the customer."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/service-q1"},{title:"Communication",text:"You notice a customer browsing the decorating department. As you talk to them, you find out that they've just bought a new house and are looking to buy some wallpaper for their living room.",options:["Direct the customer to the wallpaper display and leave them to make a choice.","Find out what colour scheme they're planning to have in the room, show them the range of wallpapers and ask if there is anything else they may need for their new house.","Ask about their new house and what other projects they're planning."],values:[0,70,30],answer:["Whilst you've pointed them to the right aisle, you could have taken the time to ask questions and help them choose the right products.","It's great that you're asking questions so that you can learn more about what the customer is looking for and help them find the right products. ","It's great that you're trying to build a good rapport with the customer and find out what other products they may need, but don't forget to help with their original request."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/service-q2"},{title:"Learning",text:"After working at B&Q for a few weeks, you're asked to do a product demonstration of a new window cleaning product that's arrived in store. However, you're not that familiar with the product.",options:["Set aside some time to become familiar with the product, trying it out on our store windows. ","Speak to the supplier so that you can ask them about the product and get some recommendations about how to demonstrate it.","Speak to your manager and suggest that someone else does the demonstration, as you don't know enough about the product to do a good job. "],values:[70,30,0],answer:["It's great that you're being proactive by learning about our products and using them yourself to find out how they work.","It's great that you're learning more about the product by speaking to an expert, but you may benefit from using the product yourself before you do the demonstration.","Although this may seem daunting at first, we'd encourage you to take every opportunity to learn more about our products. "],image:"http://kingfisher.scene7.com/is/image/Kingfisher/service-q3"},{title:"Taking Responsibility",text:"You take a call in the morning from a customer who was due to receive a delivery yesterday but it didn't arrive. You're not working in that department today and are about to re-stock your own department as you've run low on products.",options:["Ask for the customer's details whilst you contact the delivery team to find out what went wrong.","Transfer the customer straight to the delivery team where one of your colleagues will resolve the missing delivery.","Take the customer's details and contact the delivery team to arrange for the product to be delivered the following day."],values:[30,0,70],answer:["It's good that you're keen to get to the bottom of an issue, but it's also important to focus on the customer's immediate need.","Whilst your colleagues will be happy to help when you're busy, it's important to use your initiative and work through an issue yourself.","It's great that you're being proactive in responding to this situation and showing that you're comfortable taking ownership for tasks."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/service-q4"},{title:"Adapting and Coping",text:"It's a really busy day in the store, with lots of customers asking for help. You enjoy helping a variety of customers with their different requests and you're also keen to make sure each customer is served. ",options:["Do your best to work with each customer in turn.","Advise the waiting customers that you'll be with them as soon as possible and phone for help from a colleague to reduce their waiting time.","Work with each customer as quickly as you can, advising the waiting customers that you'll be with them as soon as possible."],values:[0,70,30],answer:["It's good that you're prepared to focus on one customer at a time, but you may wish to tell customers that you know they're waiting and call for help from colleagues.","It's great that you're willing to give good service, and know when to call for help to keep the customer happy.","Whilst it's great that you're helping all our customers, you may want to call on your colleagues to help during busy times. "],image:"http://kingfisher.scene7.com/is/image/Kingfisher/service-q5"},{title:"Planning",text:"At the end of the season, it's time to update your department with new stock and put some products into our promotions. As you look at the plan for the update, you realise that you don't have enough time to complete the seasonal changeover. ",options:["Explain to your manager that you need another person to help with the seasonal changeover so that you can complete it on time. ","Speak to your colleagues and find out if anything could be prepared in advance to help you work efficiently in the time set aside for the changeover.","Prepare yourself to work quickly to make sure the changeover is completed on time. "],values:[70,30,0],answer:["It's great that you're willing to ask for help, because if the changeover didn't happen on time we could lose some customers to our competitors. ","It's great that you're looking for ways to use your time wisely and work efficiently, but you may benefit from getting additional support from a colleague.","It's good that you trust in the plan provided, but as a member of our in-store team, you know how best to manage your workload so you should raise your concerns. "],image:"http://kingfisher.scene7.com/is/image/Kingfisher/service-q6"}],results:[{description:"<p>Our Customer Advisors encounter a range of exciting and challenging situations. Although you appear to respond well in some of these situations, your answers show that there are aspects of the job that you may find difficult. Have a look at our other roles to see if they suit you better before applying.</p>",links:["find"]},{description:"<p>You've responded well to some but not all of the challenges faced by our Customer Advisors. We'd encourage you to find out more about the job and consider whether it fits with your skills and experience.</p>",links:["find","apply"],findURL:["/diy/jsp/corporate/content/careers/careers_test/index.jsp"]},{description:"<p>Great - you're already thinking like we do. You seem to be the kind of person who would fit in well with our team and help our customers choose the right products and solutions for their homes. Apply today and if successful you could soon be helping our customers create better homes. We look forward to receiving your application. </p>",links:["apply"]}]},t.careers.support={questions:[{title:"Building Relationships ",text:"Whilst working in the showroom you answer a call from a customer who is waiting for a kitchen design consultation at home. You realise that there's been a mix-up as the designer is in store. Unfortunately, the designer is fully booked for the rest of the day and now the customer is upset as they were really looking forward to the appointment.  ",options:["Explain to the customer that the designer is in the store and say that if they hurry they can still  have their appointment today. ","Apologise to the customer, explaining that there was a mix-up with the designer's diary, before taking the time to find a new appointment that suits the customer.","Use this opportunity to ask the customer questions about their kitchen so the designer can take samples from the store that match their description when they go to meet the customer at a later date."],values:[0,70,30],answer:["Whilst we like to offer alternative solutions, in this instance the customer is unhappy so you should be offering the solution that has the least impact on them.","It's great that you're keen to put the situation right and meet the customer's needs.","It's great that you're making the most of the situation by gathering more information from the customer as this will start to rebuild a positive relationship."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/support-q1"},{title:"Communication",text:"You've been working to ensure that everyone in the warehouse is following our Health and Safety guidelines by wearing the correct boots. However, one of your colleagues is wearing their own boots which don't meet our guidelines, even though you've already given them a copy of our policy. ",options:["Talk to your colleague to understand why they aren't wearing the correct boots and explain the importance of working safely in the warehouse.","Speak to your colleague to explain how they may injure themselves by not wearing the correct boots. ","Give your colleague another copy of the Health and Safety policy and ask them to comply with this."],values:[70,30,0],answer:["It's great that you're asking questions and making time to understand your colleague's actions, as well as putting your point across.","It's great that you're highlighting the risks involved and checking that the colleague is aware of these, but it would be good to find out their reason for not wearing the boots as well. ","It's good that you're making them aware of the policy, but it would be better to explain the importance of wearing the correct boots and that their choice may result in injury."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/support-q2"},{title:"Learning",text:"After working at B&amp;Q for a while, you've been asked to become a store champion for a new online ordering system that we're going to be introducing in store. You've already had training on our computers and are feeling confident, but you don't know much about this particular system.",options:["Phone a colleague at another store that already has the system in place to talk to them about how the system works.","Speak to your manager and suggest that someone else becomes the store champion as you feel you don't have enough experience to do a good job. ","Set aside some time to familiarise yourself with the system by using it and reading the user manual so you can help others."],values:[30,0,70],answer:["It's great that you want to learn from others, however you may also benefit from trying the system for yourself.","Although this may seem challenging at first, we'd encourage you to take the opportunity to develop your knowledge and skills. ","It's great that you're being proactive in developing your knowledge and experience by learning about the new system. "],image:"http://kingfisher.scene7.com/is/image/Kingfisher/support-q3"},{title:"Taking Responsibility",text:"We're expecting a large delivery at the warehouse which will need a lot of staff and space to be able to off-load and move the stock to the right area. However, the delivery truck hasn't arrived at the store when expected. ",options:["Let your supplier know what time you're closing today and that you hope to see them soon.","Check with your colleagues to find out when they'll be available to help so you can arrange a different delivery slot.","Refer to your schedule for today to see if there'll be space in the warehouse to off-load a late delivery"],values:[0,70,30],answer:["It's good to see that you're keen to meet our existing schedule, however without an agreed time this may impact the other tasks we have to complete today.","It's great that you're using your initiative to resolve this issue by finding an alternative time and date when we'll be able to manage this delivery.","It's great that you're checking we'll be able to receive the delivery later today to meet our timeframes, however this may impact on our workload and available space."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/support-q4"
},{title:"Adapting and Coping",text:"With lots of development opportunities available across our stores, you've agreed to move to another department. You'll be starting your new role next month. ",options:["Take an open-mind and arrange a meeting with your new manager to discuss how you can work together.","Carry on as usual, as you'll get used to the new department over time.  ","Explain to your new colleagues how you've done a good job in your old department and that you'd be happy to show them your way of doing things."],values:[70,30,0],answer:["It's great that you're willing to adapt to change and be proactive in finding out about your new department.","It's good that you have a positive attitude in the face of change, but you may want to think about how you can adapt more proactively. ","It's good that you're willing to share your experiences, but sometimes it's important to be flexible to new approaches as there are different ways of achieving great results."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/support-q5"},{title:"Planning",text:"It's a busy day in store and you've got lots to do before the end of the day in order to meet existing deadlines. A customer asks for your help. ",options:["Apologise to the customer and let them know that you're on your way to finish something else but that one of your other colleagues would be happy to help them.","Speak to the customer quickly before returning to your plan for the day so you're still able to meet your existing deadlines.","Take the time to stop and help the customer, as you'll be able to review your plan for the day afterwards to see what you're still able to finish."],values:[0,30,70],answer:["Whilst we understand it can be frustrating when your plans get interrupted by other things, our customers should always be your top priority.","It's great that you're willing to help the customer and complete your other work, however it's important to balance time with quality and ensure your work isn't rushed.","It's great that you're willing to put our customers first and change your plans when you need to."],image:"http://kingfisher.scene7.com/is/image/Kingfisher/support-q6"}],results:[{description:"<p>Our Store Support team encounter a range of exciting and challenging situations. Although you appear to respond well in some of these situations, your answers indicate that there are aspects of the job that you may find difficult. Have a look at our other roles to see if they suit you better before applying.</p>",links:["find"]},{description:"<p>You've responded well to some but not all of the challenges faced by our Store Support team. We'd encourage you to find out more about the job and consider whether it fits with your skills and experience.</p>",links:["find","apply"],findURL:["/diy/jsp/corporate/content/careers/careers_test/index.jsp"]},{description:"<p>Great - you're already thinking like we do. You seem to be the kind of person who would fit in well with our team and provide great support to our colleagues and customers. Apply today and if successful you could soon be working with us to help our customers create better homes. We look forward to receiving your application.  </p>",links:["apply"]}]},t.contentProject={showMore:"Show more",showLess:"Show less",slider:{prev:"Show previous set of guides",next:"Show next set of guides"}},t.content={showMore:"Show more",showLess:"Show less"},t.myAccountdetails={notifier:{title:"Confirm changes",message:"Are you sure you want to delete this B&Q membership number?"},membershipRemove:"Remove B&Q Club membership number"},t.productDetails={bundle:{more:"See all items in bundle",less:"Hide items in the bundle"},loadingImage:"loading image viewer"},t.uservoice={loading:"loading..."},t.lonlat={myLocationtext:"My location",myLocation:{feedback:"Use my current location"},success:{feedback:"Success. Please Wait."},error:{feedback:"Sorry, we cannot access your location, please use the above form.",notSupported:"not supported"},search:{feedback:"Getting your location"}},t.mediaPlayer={closeOverlay:"Close overlay"},t.sortingFilter={loading:"Loading"},t.countdown={endOffer:"Offer has ended",days:"days",hrs:"hrs",mins:"mins",secs:"secs"},t}),define("app/predictiveSearch",["require","app/templates","config","lang"],function(e){function t(e,t){var i=b.keys,n=t===i.down?p(e):f(e),a=$(b.selectors.target);if(n){var s=n.find(b.searchTitleClass).length?n.find(b.searchTitleClass).text():n.text();s=$.trim(s),n.find(b.searchQueryClass).text(),a.val(s),n[0].focus()}else a[0].focus()}function i(e){return e.length<b.minDataLength?c():(b.timeoutId&&clearTimeout(b.timeoutId),void(b.timeoutId=setTimeout(function(){n(e),b.timeoutId=null},b.timeout)))}function n(e){return n.cache||(n.cache={}),e in n.cache?void l(n.cache[e]):void $.ajax({url:b.requestUrl,data:{question:e},dataType:"json",type:"get",success:function(t){n.cache[e]=t,l(t)},error:function(e,t,i){}})}function a(e){var t=e.terms?b.matchingTermsTemplate:"";return e.products&&(t+=b.matchingProductsHeadingTempate,t+=e.products?b.matchingProductsTemplate:""),e.articles&&(t+=b.matchingArticlesHeadingTempate,t+=e.articles?b.matchingArticlesTemplate:""),b.templates.render(t,e)}function s(e){b.search.html(a(e))}function o(){var e=$(b.selectors.target),t=b.predictiveSearchClass,i=$("<div></div>",{id:e.attr("id")+"-"+t,"class":t});return e.after(i),i}function r(){b.search.html()}function l(e){return e.itemCount||e.termCount||e.articleCount?(s(e),$(b.selectors.target).addClass("focus"),void b.search.show()):c()}function c(){r(),$(b.selectors.target).removeClass("focus"),$("."+b.predictiveSearchClass).hide()}function d(){return b.search.find(b.searchQueryClass)}function u(){return d().first()}function h(){return d().last()}function p(e){var t=d(),i=t.length,n=t.index(e),a=n+1,s="number"==typeof n&&i>a?t.eq(a):null;return s&&s.length?s:b.search[0].focus()}function f(e){var t=d(),i=t.index(e),n=i-1,a="number"==typeof i&&n>=0?t.eq(n):null;return a}var g=e("app/templates"),m=e("config").app,v=e("lang"),y=v.predictiveSearch,b={id:"",minDataLength:3,timeout:500,requestUrl:m.predictiveSearch.requestUrl,predictiveSearchClass:"predictive-search",matchingProductsTemplate:'<ul class="matching-products-list">                                                <% for ( var i = 0, len = products.length; i < itemCount && i < len; i +  + ) { %>                                                    <% var product = products[i]; %>                                                    <li>                                                        <a href="<%= product.productUrl %>" class="matching-product-link">                                                            <img src="<%= product.imageUrl %>"                                                                 alt="'+y.altText.prefix+" <%= product.altProductName %> "+y.altText.suffix+'" />                                                            <strong class="matching-product-text" title="<%= product.altProductName %>">                                                                <%= product.productName %>                                                            </strong>                                                            <em><%= product.price %></em>                                                        </a>                                                    </li>                                                <% } %>                                            </ul>',matchingTermsTemplate:'<ul class="matching-terms-list">                                            <% for (var i = 0, len = terms.length; i < termCount && i < len; i +  + ) { %>                                                <% var term = terms[i]; %>                                                <li>                                                    <a href="<%= term.termUrl %>" class="matching-term-link"><span><%= termQuery %></span><%= term.termName %></a>                                                </li>                                            <% } %>                                        </ul>',matchingArticlesTemplate:'<ul class="matching-articles-list">                                            <% for (var i = 0, len = articles.length; i < articleCount && i < len; i +  + ) { %>                                                <% var article = articles[i]; %>                                                <li>                                                    <a href="<%= article.articleUrl %>" class="cat-<%= article.articleCategory %> matching-article-link">                                                            <img src="<%= article.imageUrl %>" />                                                        <strong class="matching-article-title"><%= article.articleTitle %></strong>                                                        <span class="matching-article-description"><%= article.articleDescription %></span>                                                    </a>                                                </li>                                            <% } %>                                        </ul>',matchingProductsHeadingTempate:'<div class="matching-content-heading">'+y.matchingProductsHeadingTempate+"</div>",matchingArticlesHeadingTempate:'<div class="matching-content-heading">'+y.matchingArticlesHeadingTempate+"</div>",searchQueryClass:"[class*=link]",searchTitleClass:"[class*=title]",selectors:{parentBlock:"body",searchForm:"#searchbar_form",target:"#search",searchTerm:".matching-term-title"},keys:{down:40,tab:9,up:38,enter:13}},w=function(e){this.config=b,this.$={},$.extend(!0,this.config,e||{}),this._loadObjects(),this._init(),this._bindEvents()},x=w.prototype;return x.renderList=a,x._init=function(){return b.templates=new g,b.search=o(),this},x._loadObjects=function(e){var t=null;for(t in this.config.selectors)if(this.config.selectors.hasOwnProperty(t)){e&&(this.config.selectors[t]=this.config.id+" "+this.config.selectors[t]);var i=this.config.selectors[t];this.$[t]=$(i)}},x._bindEvents=function(){var e=b.selectors,n=this;$(document).on("keyup",b.selectors.target,function(t){$("."+b.predictiveSearchClass).length||(b.search=o());var a=$(this),s=$(e.target),r=a.val(),l=t.keyCode?t.keyCode:t.which,c=b.keys;if(l!==c.down&&l!==c.up||!$("."+n.config.predictiveSearchClass).is(":visible"))i(r);else{t.preventDefault();var d=l===c.down?u():h();if(d&&d.length){var p=d.find(b.searchTitleClass).length?d.find(b.searchTitleClass).text():d.text();s.val(p),d[0].focus()}}}).on("keyup","."+b.predictiveSearchClass+" a",function(e){var i=$(this),n=e.keyCode?e.keyCode:e.which,a=b.keys;(n===a.down||n===a.up)&&(e.preventDefault(),t(i,n))}).on("keydown","."+b.predictiveSearchClass,function(e){var t=e.keyCode?e.keyCode:e.which,i=b.keys;(t===i.down||t===i.up)&&e.preventDefault()}).on("click",this.$.searchForm.selector,function(){c()}).on("click",b.selectors.searchTerm,function(e){e.stopPropagation(),e.preventDefault();var t=$.trim($(this).text());n.$.target.val(t),n.$.searchForm.submit()}),n.$.searchForm.on("submit",function(e){0===n.$.target.val().length&&e.preventDefault()})},w}),function(e){!function(e,t){if("object"==typeof exports&&exports)t(exports);else{var i={};t(i),"function"==typeof define&&define.amd?define("lib/jquery.mustache",i):e.Mustache=i}}(this,function(e){function t(e,t){return w.call(e,t)}function i(e){return!t(m,e)}function n(e){return"function"==typeof e}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e){return String(e).replace(/[&<>"'\/]/g,function(e){return k[e]})}function o(e){this.string=e,this.tail=e,this.pos=0}function r(e,t){this.view=null==e?{}:e,this.parent=t,this._cache={".":this.view}}function l(){this.clearCache()}function c(t,i,a,s){function o(e){return i.render(e,a)}for(var r,l,d,u="",h=0,p=t.length;p>h;++h)switch(r=t[h],l=r[1],r[0]){case"#":if(d=a.lookup(l),"object"==typeof d||"string"==typeof d)if(x(d))for(var f=0,g=d.length;g>f;++f)u+=c(r[4],i,a.push(d[f]),s);else d&&(u+=c(r[4],i,a.push(d),s));else if(n(d)){var m=null==s?null:s.slice(r[3],r[5]);d=d.call(a.view,m,o),null!=d&&(u+=d)}else d&&(u+=c(r[4],i,a,s));break;case"^":d=a.lookup(l),(!d||x(d)&&0===d.length)&&(u+=c(r[4],i,a,s));break;case">":d=i.getPartial(l),n(d)&&(u+=d(a));break;case"&":d=a.lookup(l),null!=d&&(u+=d);break;case"name":d=a.lookup(l),null!=d&&(u+=e.escape(d));break;case"text":u+=l}return u}function d(e){for(var t,i=[],n=i,a=[],s=0,o=e.length;o>s;++s)switch(t=e[s],t[0]){case"#":case"^":a.push(t),n.push(t),n=t[4]=[];break;case"/":var r=a.pop();r[5]=t[2],n=a.length>0?a[a.length-1][4]:i;break;default:n.push(t)}return i}function u(e){for(var t,i,n=[],a=0,s=e.length;s>a;++a)t=e[a],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,n.push(t)));return n}function h(e){return[new RegExp(a(e[0])+"\\s*"),new RegExp("\\s*"+a(e[1]))]}function p(t,n){function s(){if(F&&!S)for(;T.length;)delete C[T.pop()];else T=[];F=!1,S=!1}if(t=t||"",n=n||e.tags,"string"==typeof n&&(n=n.split(g)),2!==n.length)throw new Error("Invalid tags: "+n.join(", "));for(var r,l,c,p,m,w,$=h(n),x=new o(t),k=[],C=[],T=[],F=!1,S=!1;!x.eos();){if(r=x.pos,c=x.scanUntil($[0]))for(var A=0,D=c.length;D>A;++A)p=c.charAt(A),i(p)?T.push(C.length):S=!0,C.push(["text",p,r,r+1]),r+=1,"\n"==p&&s();if(!x.scan($[0]))break;if(F=!0,l=x.scan(b)||"name",x.scan(f),"="===l?(c=x.scanUntil(v),x.scan(v),x.scanUntil($[1])):"{"===l?(c=x.scanUntil(new RegExp("\\s*"+a("}"+n[1]))),x.scan(y),x.scanUntil($[1]),l="&"):c=x.scanUntil($[1]),!x.scan($[1]))throw new Error("Unclosed tag at "+x.pos);if(m=[l,c,r,x.pos],C.push(m),"#"===l||"^"===l)k.push(m);else if("/"===l){if(w=k.pop(),!w)throw new Error('Unopened section "'+c+'" at '+r);if(w[1]!==c)throw new Error('Unclosed section "'+w[1]+'" at '+r)}else if("name"===l||"{"===l||"&"===l)S=!0;else if("="===l){if(n=c.split(g),2!==n.length)throw new Error("Invalid tags at "+r+": "+n.join(", "));$=h(n)}}if(w=k.pop())throw new Error('Unclosed section "'+w[1]+'" at '+x.pos);return d(u(C))}var f=/\s*/,g=/\s+/,m=/\S/,v=/\s*=/,y=/\s*\}/,b=/#|\^|\/|>|\{|&|=|!/,w=RegExp.prototype.test,$=Object.prototype.toString,x=Array.isArray||function(e){return"[object Array]"===$.call(e)},k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(e){var t=this.tail.match(e);if(t&&0===t.index){var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i}return""},o.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},r.make=function(e){return e instanceof r?e:new r(e)},r.prototype.push=function(e){return new r(e,this)},r.prototype.lookup=function(e){var t;if(e in this._cache)t=this._cache[e];else{for(var i=this;i;){if(e.indexOf(".")>0){t=i.view;for(var a=e.split("."),s=0;null!=t&&s<a.length;)t=t[a[s++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return n(t)&&(t=t.call(this.view)),t},l.prototype.clearCache=function(){this._cache={},this._partialCache={}},l.prototype.compile=function(t,i){var n=this._cache[t];if(!n){var a=e.parse(t,i);n=this._cache[t]=this.compileTokens(a,t)}return n},l.prototype.compilePartial=function(e,t,i){var n=this.compile(t,i);return this._partialCache[e]=n,n},l.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},l.prototype.compileTokens=function(e,t){var i=this;return function(a,s){if(s)if(n(s))i._loadPartial=s;else for(var o in s)i.compilePartial(o,s[o]);return c(e,i,r.make(a),t)}},l.prototype.render=function(e,t,i){return this.compile(e)(t,i)},e.name="mustache.js",e.version="0.7.3",e.tags=["{{","}}"],e.Scanner=o,e.Context=r,e.Writer=l,e.parse=p,e.escape=s;var C=new l;e.clearCache=function(){return C.clearCache()},e.compile=function(e,t){return C.compile(e,t)},e.compilePartial=function(e,t,i){return C.compilePartial(e,t,i)},e.compileTokens=function(e,t){return C.compileTokens(e,t)},e.render=function(e,t,i){return C.render(e,t,i)},e.to_html=function(t,i,a,s){var o=e.render(t,i,a);return n(s)?void s(o):o}}),e.mustache=function(e,t,i){return Mustache.render(e,t,i)},e.fn.mustache=function(t,i){return e(this).map(function(n,a){var s=e.trim(e(a).html()),o=e.mustache(s,t,i);return e(o).get()})}}(window.jQuery),define("app/notifier",["require","lib/jquery.mustache"],function(e){var t=e("lib/jquery.mustache"),i=function(e){this.settings=$.extend({target:null,prepend:!0,template:"#ui-template-message",scrollTo:!0},e),this.status={success:0,warning:1,error:2},this.hasTemplate=!0,this._init()};return i.prototype={_init:function(){var e=this.settings,t=$(e.template);return 0===t.length?void(this.hasTemplate=!1):(this.template=this._parseTemplate(t),this.$target=$(e.target,e.context),this.$target.data("notifier",this),this._id=Math.floor(1e16*Math.random()),void $(document).on("closeall.notifier."+this._id,$.proxy(this.close,this)))},_getStatus:function(e){var t=e||0;switch(e){case 0:t="success";break;case 1:t="notice";break;case 2:t="error"}return t},_scrollTo:function(e){$("html, body").animate({scrollTop:e.offset().top},250,function(){e.attr("tabindex",-1).focus()})},_parseTemplate:function(e){var i=e.html();return i=i.replace(/<!--[\s\S]*?-->/g,""),t.compile(i)},_bindHandlers:function(){this.$notification.on("click.notifier",'[data-action="no"]',function(e){$(e.delegateTarget).trigger("no")}).on("click.notifier",'[data-action="yes"]',function(e){$(e.delegateTarget).trigger("yes")})},close:function(){this.$notification&&this.$notification.animate({height:0,opacity:0},250,function(){$(this).hide()})},notify:function(e){if(this.hasTemplate){e.status=this._getStatus(parseInt(e.status));var t=$(this.template(e)).hide();this.$notification?this.$notification.replaceWith(t):this.settings.prepend?t.prependTo(this.$target):t.insertAfter(this.$target),t.fadeIn(250),this.$notification=t,e.confirm&&this._bindHandlers(),this.settings.scrollTo&&this._scrollTo(this.$notification)}},destroy:function(){this.$notification&&this.$notification.remove(),$(document).off(".notifier."+this._id)}},i}),define("app/common",["require","app/breakpoint","app/customFormElements","app/predictiveSearch","app/notifier"],function(e){var t=(e("app/breakpoint"),e("app/customFormElements")),i=e("app/predictiveSearch"),n=e("app/notifier"),a=Object.prototype.constructor,s=".is-telephone";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i,n,a=t?t:0;if(!this)throw new TypeError;if(n=this.length,0===n||a>=n)return-1;for(0>a&&(a=n-Math.abs(a)),i=a;n>i;i++)if(this[i]===e)return i;return-1}),String.prototype.format||(String.prototype.format=function(){var e=arguments,t=/\{(\d+)\}/g,i=function(t,i){return i in e?e[i]:t};return this.replace(t,i)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},a=function(){return i.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,a.prototype=new n,a}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),window.diy=window.diy||{},diy.instances=diy.instances||{},diy.instances.customFormElements=new t,diy.instances.predictiveSearch=new i,diy.instances.notifier=new n({target:".page-title",prepend:!1}),Object.getKeys=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},$.extend({ec:function(e,t,i){var n,s=i||t.constructor,o=s!==a?s:function(){e.apply(this,arguments)},r=function(){},l=e.prototype;return r.prototype=l,n=o.prototype=new r,n.constructor=o,o.superclass=l,l.constructor===a&&(l.constructor=e),$.map(Object.getKeys(t),function(e){n[e]=t[e]}),o}});var o={commonBindEvents:function(){$(document).on("click",s,function(e){$(window).width()>1024&&e.preventDefault()})},object:function(){var e;e=function(){};var t=e.prototype;return t._loadObjects=function(e){var t=null;for(t in this.config.selectors)this.config.selectors.hasOwnProperty(t)&&this.config.selectors[t]&&(e?this.$[t]=$(this.config.selectors[t],this.config.id):this.$[t]=$(this.config.selectors[t]));"undefined"!=typeof this.config.id&&(this.$.id=$(this.config.id))},e}()};return o.commonBindEvents(),o}),define("app/jquery.hasfocus",["require","jquery"],function(e){var t,i=e("jquery"),n=i([]),a=[],s={add:function(e){a.push({context:this,handleObj:e})},remove:function(e){var t=this;a=i.grep(a,function(i){return i.context!==t||i.handleObj!==e})},handleReceived:function(e){s.rebuildElems(),t.each(function(){var t=i(this),n=t.data();t.has(e.target).length&&!n.hasFocus&&(t.trigger(e.handleObj.namespace,[e.target]),t.data().hasFocus=!0)})},handleLost:function(e){s.rebuildElems(),t.each(function(){var t=i(this),n=t.data();!t.has(e.target).length&&n.hasFocus&&(t.trigger(e.handleObj.namespace,[e.target]),t.data().hasFocus=!1)})},rebuildElems:function(){t=i([]),i.each(a,function(e,n){t=n.handleObj.selector?t.add(i(n.handleObj.selector,n.context)):t.add(i(n.context))})}};i.event.special.receivedfocus={setup:function(e,t){n=n.add(this),1===n.length&&i(document).on("focusin.receivedfocus",s.handleReceived)},teardown:function(){n=n.not(this),0===n.length&&i(document).off(".receivedfocus")},add:s.add,remove:s.remove},i.event.special.lostfocus={setup:function(e,t){n=n.add(this),1===n.length&&i(document).on("focusin.lostfocus",s.handleLost)},teardown:function(){n=n.not(this),0===n.length&&i(document).off(".lostfocus")},add:s.add,remove:s.remove}}),function(e){function t(t){var i=e(t),n=e(":focus"),a=0;if(1===n.length){var s=i.index(n);s+1<i.length&&(a=s+1)}i.eq(a).focus()}function i(t){var i=e(t),n=e(":focus"),a=i.length-1;if(1===n.length){var s=i.index(n);s>0&&(a=s-1)}i.eq(a).focus()}function n(t){function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n,a,s,o=t.nodeName.toLowerCase(),r=!isNaN(e.attr(t,"tabindex"));return"area"===o?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(s=e("img[usemap=#"+a+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||r:r)&&i(t)}e.focusNext=function(){t(":focusable")},e.focusPrev=function(){i(":focusable")},e.tabNext=function(){t(":tabbable")},e.tabPrev=function(){i(":tabbable")},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(t,!a)}})}(window.jQuery),define("lib/jquery.tabbable",function(){}),define("app/toggletarget",["require","app/jquery.hasfocus","lib/jquery.tabbable","lang"],function(e){e("app/jquery.hasfocus"),e("lib/jquery.tabbable");var t,i=e("lang"),n=i.toggleTarget;return t=function(e){if(this.settings=$.extend({toggle:null,target:null,context:null,activeClass:"is-active",inactiveClass:null,inverse:!1,useAria:!1,closeOthers:!1,tabOpens:!1,tabCloses:!1,tabSkips:!1,focusTarget:!0,eventDelegate:".w1"},e),e){if(!e.toggle)throw new Error(n.error);this.bindHandlers()}},t.prototype={bindHandlers:function(){var e=this.settings,t=$(e.eventDelegate);t.on("click.toggletarget",e.toggle,$.proxy(this.toggle,this)).on("keydown.toggletarget",e.toggle,$.proxy(this.keydown,this)),e.closeOthers&&t.on("click.toggletarget",$.proxy(this.deactivateAll,this)).on("click.toggletarget",e.toggle,function(e){e.stopPropagation()}).on("click.toggletarget",e.target,function(e){e.stopPropagation()}),e.target&&(e.tabOpens&&t.on("receivedfocus.toggletarget",e.target,$.proxy(this.activate,this)),e.tabCloses&&t.on("lostfocus.toggletarget",e.target,$.proxy(this.deactivate,this)),e.tabSkips&&t.on("keydown.toggletarget",e.toggle,$.proxy(this.tabSkips,this)))},init:function(e){var t,i,n,a,s,o,r,l=$(e),c=this.settings.target?this.settings.target.substring(1):null,d=-1!==e.className.indexOf(c),u=e.id===c;return d||u?(t=this.getTarget(l,this.settings.toggle),i=l):(t=l,i=this.getTarget(l,this.settings.target)),n=t.data(),n.toggletarget||(a=$.extend({},this.settings),s=Math.floor(1e16*Math.random()),o=a.inverse?!t.hasClass(a.inactiveClass):t.hasClass(a.activeClass),r=$('<span class="accessibility"/>').prependTo(t),n.toggle&&(i=this.getTarget(t,n.toggle)),t.data("toggletarget",{$target:i,$state:r,isActive:o,settings:a,hasFocus:!1}),t[0].id=t[0].id||"tt-toggle-"+s,i[0].id=i[0].id||"tt-target-"+s,r.text(o?"expanded,":"collapsed,"),a.useAria&&this.setAria(t)),t},toggle:function(e){var t=this.init(e.currentTarget),i=t.data("toggletarget");e.preventDefault(),e.stopPropagation(),i.isActive?this.deactivate(e):this.activate(e)},keydown:function(e){var t=this.init(e.currentTarget),i=t.data("toggletarget");return 40!==e.keyCode||i.isActive?38!==e.keyCode&&27!==e.keyCode||!i.isActive?void((13===e.keyCode||32===e.keyCode)&&this.toggle(e)):void this.deactivate.apply(this,[e]):(e.preventDefault(),void this.activate.apply(this,[e]))},tabSkips:function(e){var t,i=this.init(e.currentTarget),n=i.data("toggletarget");9!==e.keyCode||n.isActive||(t=$(":tabbable",n.$target),t.attr("tabindex","-1"),i.one("focus.toggletarget",function(){t.removeAttr("tabindex","")}))},activate:function(e){var t=this.init(e.currentTarget),i=t.data("toggletarget");i.isActive||(i.settings.closeOthers&&this.deactivateAll(),$.fn.add.call(t,i.$target).addClass(i.settings.activeClass).removeClass(i.settings.inactiveClass),i.isActive=!0,i.$state.text("expanded,"),i.settings.useAria&&this.setAria(t),this.settings.focusTarget&&e.currentTarget===t[0]&&this.setFocus(i.$target),t.trigger("active.toggletarget",[i.$target]),$(document).trigger("active.toggletarget",[i.$target]))},deactivate:function(e){var t=this.init(e.currentTarget),i=t.data("toggletarget");i.isActive&&($.fn.add.call(t,i.$target).addClass(i.settings.inactiveClass).removeClass(i.settings.activeClass),i.isActive=!1,i.$state.text("collapsed,"),i.settings.useAria&&this.setAria(t),t.trigger("inactive.toggletarget",[i.$target]),$(document).trigger("inactive.toggletarget",[i.$target]))},deactivateAll:function(){var e=this;$(this.settings.toggle).each(function(){var t=$(this).data("toggletarget");t&&e.deactivate.call(e,{currentTarget:this})})},getTarget:function(e,t){var i;return t||(t=e.attr("href"),t=t&&/#/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,"")),i=this.settings.context?t&&$(t,e.closest(this.settings.context)):t&&$(t),i&&i.length?i:e.parent()},setFocus:function(e){var t=$(window).scrollTop();e.attr("tabindex","-1").focus(),$(window).scrollTop(t)},setAria:function(e){var t=e.data("toggletarget"),i=t.$target;e.attr({"aria-controls":i[0].id,tabindex:0,"aria-expanded":t.isActive}),i.attr({"aria-hidden":!t.isActive,"aria-labelledby":e[0].id})},destroy:function(){var e=this.settings,t=$(e.eventDelegate);t.off(".toggletarget",e.toggle),t.off(".toggletarget",e.target),$(e.toggle).each(function(){var t=$(this),i=t.data().toggletarget;i&&(e.useAria&&(t.removeAttr("role tabindex aria-selected aria-expanded aria-controls"),i.$target.removeAttr("role aria-hidden aria-labelledby aria-multiselectable")),$.fn.add.call(t,i.$target).removeClass(i.settings.inactiveClass).removeClass(i.settings.activeClass),t.removeData("toggletarget"))})}},$.toggleTarget=function(e){var i=new t(e);$(e.toggle).each(function(){i.init(this)})},$.toggleTarget({toggle:"[data-toggle]"}),t}),define("app/superbutton",["require","app/toggletarget"],function(e){e("app/toggletarget"),$.toggleTarget({toggle:".btn-super-handle",target:".btn-super-dropdown",context:".btn-super",closeOthers:!0,tabOpens:!0,tabCloses:!0,eventDelegate:".w1, .window"})}),define("app/cookies",["require","app/common","config"],function(e){function t(e){var t,i=document.cookie,n=i.indexOf(" "+e+"=");return-1===n&&(n=i.indexOf(e+"=")),-1===n?i=null:(n=i.indexOf("=",n)+1,t=i.indexOf(";",n),-1===t&&(t=i.length),i=unescape(i.substring(n,t))),i}function i(e,t,i){var n,a=new Date;a.setDate(a.getDate()+i),n=escape(t)+(null===i?"":"; expires="+a.toUTCString()+"; path=/;"),document.cookie=e+"="+n}function n(){$(".btn-stack").on("click keyup",".btn",function(){var e=$(this).data("toggle-label");return $(".cookie-long-description-inner >:not(.is-dom-removed)").addClass("is-dom-removed"),$("#"+e).parents(".is-dom-removed").removeClass("is-dom-removed"),$(this).parents(".btn-stack").find(".btn-primary").removeClass("btn-primary").addClass("btn-secondary"),$(this).addClass("btn-primary").removeClass("btn-secondary"),$(".cookie-long-description-inner .is-dom-removed:first").is(":visible")?!0:!1}),$("body").on("click",".find-more",function(){return $(".cookies-details").show(),$(".cookies-policy").remove(),!1}),$("body").on("click",".close-cookies-details",function(){return $(".cookie-panel").remove(),$("body").removeClass("has-cookie-message"),i(".","_",30),!1})}function a(e){$.ajax({url:c.cookies.messageUrl.format(e),context:document.body,success:function(e){$("body *:first").before(e),n(),$("body").addClass("has-cookie-message")}})}function s(){$(document).on("click.cookieClick keyup.cookieClick","body",function(){$(document).off("click keyup","body"),i(".","_",30)}),n()}function o(){var e,i=t(".");return null!==i&&""!==i?e=!1:(e=!0,s()),e}function r(){o()&&a("enabled")}var l,c=(e("app/common"),e("config").app);l=navigator.cookieEnabled?r():a("disabled")}),function(e){function t(t){return!t||void 0!==t.allowPageScroll||void 0===t.swipe&&void 0===t.swipeStatus||(t.allowPageScroll=c),void 0!==t.click&&void 0===t.tap&&(t.tap=t.click),t||(t={}),t=e.extend({},e.fn.swipe.defaults,t),this.each(function(){var n=e(this),a=n.data(T);a||(a=new i(this,t),n.data(T,a))})}function i(t,i){function F(t){if(!(re()||e(t.target).closest(i.excludedElements,He).length>0)){var n,a=t.originalEvent?t.originalEvent:t,s=C?a.touches[0]:a;return ze=w,C?Qe=a.touches.length:t.preventDefault(),Ie=0,Le=null,Oe=null,_e=0,Me=0,Be=0,Re=1,Pe=0,Ue=he(),Ne=ge(),se(),!C||Qe===i.fingers||i.fingers===y||N()?(ce(0,s),Ve=Ce(),2==Qe&&(ce(1,a.touches[1]),Me=Be=ye(Ue[0].start,Ue[1].start)),(i.swipeStatus||i.pinchStatus)&&(n=I(a,ze))):n=!1,n===!1?(ze=k,I(a,ze),n):void le(!0)}}function S(e){var t=e.originalEvent?e.originalEvent:e;if(ze!==x&&ze!==k&&!oe()){var n,a=C?t.touches[0]:t,s=de(a);if(We=Ce(),C&&(Qe=t.touches.length),ze=$,2==Qe&&(0==Me?(ce(1,t.touches[1]),Me=Be=ye(Ue[0].start,Ue[1].start)):(de(t.touches[1]),Be=ye(Ue[0].end,Ue[1].end),Oe=we(Ue[0].end,Ue[1].end)),Re=be(Me,Be),Pe=Math.abs(Me-Be)),Qe===i.fingers||i.fingers===y||!C||N()){if(Le=ke(s.start,s.end),P(e,Le),Ie=$e(s.start,s.end),_e=ve(),pe(Le,Ie),(i.swipeStatus||i.pinchStatus)&&(n=I(t,ze)),!i.triggerOnTouchEnd||i.triggerOnTouchLeave){var o=!0;if(i.triggerOnTouchLeave){var r=Te(this);o=Fe(s.end,r)}!i.triggerOnTouchEnd&&o?ze=E($):i.triggerOnTouchLeave&&!o&&(ze=E(x)),(ze==k||ze==x)&&I(t,ze)}}else ze=k,I(t,ze);n===!1&&(ze=k,I(t,ze))}}function A(e){var t=e.originalEvent;return C&&t.touches.length>0?(ae(),!0):(oe()&&(Qe=Ge),e.preventDefault(),We=Ce(),_e=ve(),M()?(ze=k,I(t,ze)):i.triggerOnTouchEnd||0==i.triggerOnTouchEnd&&ze===$?(ze=x,I(t,ze)):!i.triggerOnTouchEnd&&Y()?(ze=x,L(t,ze,p)):ze===$&&(ze=k,I(t,ze)),void le(!1))}function D(){Qe=0,We=0,Ve=0,Me=0,Be=0,Re=1,se(),le(!1)}function q(e){var t=e.originalEvent;i.triggerOnTouchLeave&&(ze=E(x),I(t,ze))}function j(){He.unbind(Ae,F),He.unbind(Ee,D),He.unbind(De,S),He.unbind(qe,A),je&&He.unbind(je,q),le(!1)}function E(e){var t=e,n=R(),a=_(),s=M();return!n||s?t=k:!a||e!=$||i.triggerOnTouchEnd&&!i.triggerOnTouchLeave?!a&&e==x&&i.triggerOnTouchLeave&&(t=k):t=x,t}function I(e,t){var i=void 0;return U()||Q()?i=L(e,t,u):(H()||N())&&i!==!1&&(i=L(e,t,h)),ie()&&i!==!1?i=L(e,t,f):ne()&&i!==!1?i=L(e,t,g):te()&&i!==!1&&(i=L(e,t,p)),
t===k&&D(e),t===x&&(C?0==e.touches.length&&D(e):D(e)),i}function L(t,c,d){var m=void 0;if(d==u){if(He.trigger("swipeStatus",[c,Le||null,Ie||0,_e||0,Qe]),i.swipeStatus&&(m=i.swipeStatus.call(He,t,c,Le||null,Ie||0,_e||0,Qe),m===!1))return!1;if(c==x&&z()){if(He.trigger("swipe",[Le,Ie,_e,Qe]),i.swipe&&(m=i.swipe.call(He,t,Le,Ie,_e,Qe),m===!1))return!1;switch(Le){case n:He.trigger("swipeLeft",[Le,Ie,_e,Qe]),i.swipeLeft&&(m=i.swipeLeft.call(He,t,Le,Ie,_e,Qe));break;case a:He.trigger("swipeRight",[Le,Ie,_e,Qe]),i.swipeRight&&(m=i.swipeRight.call(He,t,Le,Ie,_e,Qe));break;case s:He.trigger("swipeUp",[Le,Ie,_e,Qe]),i.swipeUp&&(m=i.swipeUp.call(He,t,Le,Ie,_e,Qe));break;case o:He.trigger("swipeDown",[Le,Ie,_e,Qe]),i.swipeDown&&(m=i.swipeDown.call(He,t,Le,Ie,_e,Qe))}}}if(d==h){if(He.trigger("pinchStatus",[c,Oe||null,Pe||0,_e||0,Qe,Re]),i.pinchStatus&&(m=i.pinchStatus.call(He,t,c,Oe||null,Pe||0,_e||0,Qe,Re),m===!1))return!1;if(c==x&&O())switch(Oe){case r:He.trigger("pinchIn",[Oe||null,Pe||0,_e||0,Qe,Re]),i.pinchIn&&(m=i.pinchIn.call(He,t,Oe||null,Pe||0,_e||0,Qe,Re));break;case l:He.trigger("pinchOut",[Oe||null,Pe||0,_e||0,Qe,Re]),i.pinchOut&&(m=i.pinchOut.call(He,t,Oe||null,Pe||0,_e||0,Qe,Re))}}return d==p?(c===k||c===x)&&(clearTimeout(Ze),G()&&!X()?(Ke=Ce(),Ze=setTimeout(e.proxy(function(){Ke=null,He.trigger("tap",[t.target]),i.tap&&(m=i.tap.call(He,t,t.target))},this),i.doubleTapThreshold)):(Ke=null,He.trigger("tap",[t.target]),i.tap&&(m=i.tap.call(He,t,t.target)))):d==f?(c===k||c===x)&&(clearTimeout(Ze),Ke=null,He.trigger("doubletap",[t.target]),i.doubleTap&&(m=i.doubleTap.call(He,t,t.target))):d==g&&(c===k||c===x)&&(clearTimeout(Ze),Ke=null,He.trigger("longtap",[t.target]),i.longTap&&(m=i.longTap.call(He,t,t.target))),m}function _(){var e=!0;return null!==i.threshold&&(e=Ie>=i.threshold),e}function M(){var e=!1;return null!==i.cancelThreshold&&null!==Le&&(e=fe(Le)-Ie>=i.cancelThreshold),e}function B(){return null!==i.pinchThreshold?Pe>=i.pinchThreshold:!0}function R(){var e;return e=i.maxTimeThreshold&&_e>=i.maxTimeThreshold?!1:!0}function P(e,t){if(i.allowPageScroll===c||N())e.preventDefault();else{var r=i.allowPageScroll===d;switch(t){case n:(i.swipeLeft&&r||!r&&i.allowPageScroll!=m)&&e.preventDefault();break;case a:(i.swipeRight&&r||!r&&i.allowPageScroll!=m)&&e.preventDefault();break;case s:(i.swipeUp&&r||!r&&i.allowPageScroll!=v)&&e.preventDefault();break;case o:(i.swipeDown&&r||!r&&i.allowPageScroll!=v)&&e.preventDefault()}}}function O(){var e=V(),t=W(),i=B();return e&&t&&i}function N(){return!!(i.pinchStatus||i.pinchIn||i.pinchOut)}function H(){return!(!O()||!N())}function z(){var e=R(),t=_(),i=V(),n=W(),a=M(),s=!a&&n&&i&&t&&e;return s}function Q(){return!!(i.swipe||i.swipeStatus||i.swipeLeft||i.swipeRight||i.swipeUp||i.swipeDown)}function U(){return!(!z()||!Q())}function V(){return Qe===i.fingers||i.fingers===y||!C}function W(){return 0!==Ue[0].end.x}function Y(){return!!i.tap}function G(){return!!i.doubleTap}function K(){return!!i.longTap}function Z(){if(null==Ke)return!1;var e=Ce();return G()&&e-Ke<=i.doubleTapThreshold}function X(){return Z()}function J(){return(1===Qe||!C)&&(isNaN(Ie)||0===Ie)}function ee(){return _e>i.longTapThreshold&&b>Ie}function te(){return!(!J()||!Y())}function ie(){return!(!Z()||!G())}function ne(){return!(!ee()||!K())}function ae(){Ye=Ce(),Ge=event.touches.length+1}function se(){Ye=0,Ge=0}function oe(){var e=!1;if(Ye){var t=Ce()-Ye;t<=i.fingerReleaseThreshold&&(e=!0)}return e}function re(){return!(He.data(T+"_intouch")!==!0)}function le(e){e===!0?(He.bind(De,S),He.bind(qe,A),je&&He.bind(je,q)):(He.unbind(De,S,!1),He.unbind(qe,A,!1),je&&He.unbind(je,q,!1)),He.data(T+"_intouch",e===!0)}function ce(e,t){var i=void 0!==t.identifier?t.identifier:0;return Ue[e].identifier=i,Ue[e].start.x=Ue[e].end.x=t.pageX||t.clientX,Ue[e].start.y=Ue[e].end.y=t.pageY||t.clientY,Ue[e]}function de(e){var t=void 0!==e.identifier?e.identifier:0,i=ue(t);return i.end.x=e.pageX||e.clientX,i.end.y=e.pageY||e.clientY,i}function ue(e){for(var t=0;t<Ue.length;t++)if(Ue[t].identifier==e)return Ue[t]}function he(){for(var e=[],t=0;5>=t;t++)e.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return e}function pe(e,t){t=Math.max(t,fe(e)),Ne[e].distance=t}function fe(e){return Ne[e].distance}function ge(){var e={};return e[n]=me(n),e[a]=me(a),e[s]=me(s),e[o]=me(o),e}function me(e){return{direction:e,distance:0}}function ve(){return We-Ve}function ye(e,t){var i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.round(Math.sqrt(i*i+n*n))}function be(e,t){var i=t/e*1;return i.toFixed(2)}function we(){return 1>Re?l:r}function $e(e,t){return Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)))}function xe(e,t){var i=e.x-t.x,n=t.y-e.y,a=Math.atan2(n,i),s=Math.round(180*a/Math.PI);return 0>s&&(s=360-Math.abs(s)),s}function ke(e,t){var i=xe(e,t);return 45>=i&&i>=0?n:360>=i&&i>=315?n:i>=135&&225>=i?a:i>45&&135>i?o:s}function Ce(){var e=new Date;return e.getTime()}function Te(t){t=e(t);var i=t.offset(),n={left:i.left,right:i.left+t.outerWidth(),top:i.top,bottom:i.top+t.outerHeight()};return n}function Fe(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}var Se=C||!i.fallbackToMouseEvents,Ae=Se?"touchstart":"mousedown",De=Se?"touchmove":"mousemove",qe=Se?"touchend":"mouseup",je=Se?null:"mouseleave",Ee="touchcancel",Ie=0,Le=null,_e=0,Me=0,Be=0,Re=1,Pe=0,Oe=0,Ne=null,He=e(t),ze="start",Qe=0,Ue=null,Ve=0,We=0,Ye=0,Ge=0,Ke=0,Ze=null;try{He.bind(Ae,F),He.bind(Ee,D)}catch(Xe){e.error("events not supported "+Ae+","+Ee+" on jQuery.swipe")}this.enable=function(){return He.bind(Ae,F),He.bind(Ee,D),He},this.disable=function(){return j(),He},this.destroy=function(){return j(),He.data(T,null),He},this.option=function(t,n){if(void 0!==i[t]){if(void 0===n)return i[t];i[t]=n}else e.error("Option "+t+" does not exist on jQuery.swipe.options")}}var n="left",a="right",s="up",o="down",r="in",l="out",c="none",d="auto",u="swipe",h="pinch",p="tap",f="doubletap",g="longtap",m="horizontal",v="vertical",y="all",b=10,w="start",$="move",x="end",k="cancel",C="ontouchstart"in window,T="TouchSwipe",F={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"};e.fn.swipe=function(i){var n=e(this),a=n.data(T);if(a&&"string"==typeof i){if(a[i])return a[i].apply(this,Array.prototype.slice.call(arguments,1));e.error("Method "+i+" does not exist on jQuery.swipe")}else if(!(a||"object"!=typeof i&&i))return t.apply(this,arguments);return n},e.fn.swipe.defaults=F,e.fn.swipe.phases={PHASE_START:w,PHASE_MOVE:$,PHASE_END:x,PHASE_CANCEL:k},e.fn.swipe.directions={LEFT:n,RIGHT:a,UP:s,DOWN:o,IN:r,OUT:l},e.fn.swipe.pageScroll={NONE:c,HORIZONTAL:m,VERTICAL:v,AUTO:d},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:y}}(window.jQuery),define("lib/jquery.touchSwipe",function(){}),define("app/slider",["require","lib/jquery.touchSwipe","lib/jquery.tabbable","app/jquery.hasfocus","app/common","app/breakpoint","underscore","lang"],function(e){e("lib/jquery.touchSwipe"),e("lib/jquery.tabbable"),e("app/jquery.hasfocus");var t=e("app/common"),i=e("app/breakpoint"),n=e("underscore"),a=e("lang"),s=a.slider,o=$.ec(t.object,{constructor:function(e){this.config={id:"",alignment:"horizontal",pageSize:1,buffer:0,touch:!1,slideSpeed:300,slideShow:!1,slideShowSpeed:6e3,loop:!1,counter:!1,useCSS:!0,controlButtons:{render:!0,classes:{prev:"carousel-btn carousel-btn-prev",next:"carousel-btn carousel-btn-next",inactive:"is-disabled"},text:{prev:s.controlButtons.prev,next:s.controlButtons.next}},activeClass:"is-active",curBreakpoint:null,breakpoints:null,selectors:{slider:".carousel-inner",sliderPane:"ul",elems:"ul > li",elem:"ul > li > a",pagination:null,controls:null},btnSuperDropdown:"btn-super-dropdown"},e=e||{},$.extend(!0,this.config,e),this.config.breakpoints=e.breakpoints||null,this.currentIndex=0,this.elementCount=0,this.slideIndex=0,this.$={},this._loadObjects(!0),this._init()}});$.extend(o.prototype,{_init:function(){var e=this;if(this.config.breakpoints){var t=new i({noMatch:function(){e.config.initflag&&e.destroy(),e.config.prevBreakpoint=null}});n.each(this.config.breakpoints,function(i,n){t.register(i.mediaQuery,{match:function(){var t=e.config.pageSize;e.config.controlButtons.render;return e.config.prevBreakpoint=e.config.curBreakpoint,e.config.curBreakpoint!==n&&(e.config.curBreakpoint=n),e.config=$.extend(!0,{},e.config,i.settings),e.config.initflag?(e._setTotal(),e.config.prevBreakpoint!==e.config.curBreakpoint&&(e.config.pageSize<e.elementCount?e.config.controlButtons.render=!0:e.config.controlButtons.render=!1,e._renderControls(),e._bindEvents()),void("horizontal"===e.config.alignment&&(e._setSizes(),e.config.pageSize!==t!==0&&e.goTo(0,!1)))):void e._initSlider()}},i.isDefault)})}else this._initSlider()},_initSlider:function(){this.$.sliderWindow=$(this.config.id),this.$.tabStops=$(":tabbable",this.$.sliderPane),Modernizr.csstransforms3d&&this.config.useCSS?(this.$.sliderPane.css({position:"relative",transition:this.config.slideSpeed/1e3+"s"}),this.$.elems.css({transform:"translate3d(0,0,0)"})):this.$.sliderPane.css({position:"relative"}),this.elementCount=this.elementCountRecalculated=this.$.elems.length,this.elemsData=this.$.elems.map(function(){return $(this).data().span-1||0});for(var e=0;e<this.elemsData.length;e++)this.elementCountRecalculated+=this.elemsData[e];"vertical"==this.config.alignment?this.config.pageSize=n.filter(this.$.elems,$.proxy(function(e){var t=this.isScrolledIntoView(e);return t.top&&t.bottom},this)).length:this._setSizes(),this._setTotal(),this._renderControls(),this.config.slideShow&&(this.slideShow=new r(this.next.bind(this),this.config.slideShowSpeed),this.slideShow.play()),this._bindEvents(),this.config.initflag=!0},getCurrentElement:function(){var e=this.$.elem.filter("."+this.config.activeClass);return{elem:e,index:this.$.elem.index($(this.config.selectors.elem+"."+this.config.activeClass))}},setCurrentElement:function(e){var t=null,i=this.config.activeClass;+e==e?t=this.$.elem.eq(+e):-1!==this.$.elem.index(e)&&(t=e);var n=t.closest(this.config.selectors.elems);this.$.elem.removeClass(i),this.$.elems.removeClass(i).attr("aria-selected",!1),t.addClass(i),n.addClass(i).attr("aria-selected",!0)},isScrolledIntoView:function(e){var t=this.$.slider.offset().left,i=t+this.$.slider.width()+this.config.buffer,n=this.$.slider.offset().top,a=n+this.$.slider.height(),s=$(e).offset().left,o=s+$(e).width(),r=$(e).offset().top,l=r+$(e).height();return{left:Math.floor(s)>=Math.floor(t),right:Math.floor(o)<=Math.floor(i),top:Math.floor(r)>=Math.floor(n),bottom:Math.floor(l)<=Math.floor(a)}},prev:function(e){var t=this,i=0;if(!this.isAnimating){if(0===this.currentIndex){if(!this.config.loop&&!this.config.slideShow)return;i=this.elementCount-1}else $(this.$.elems.get().reverse()).each(function(e){var n=t.isScrolledIntoView(this),a="horizontal"==t.config.alignment?n.left:n.top;return a?void 0:(i=t.currentIndex==t.elementCount-1?t.currentIndex-1*t.config.pageSize:t.elementCount-e-1,!1)});this.goTo(i,e)}},next:function(e){var t=this,i=0;if(!this.isAnimating){if(this.currentIndex===this.elementCount-1){if(!this.config.loop&&!this.config.slideShow)return;i=0}else this.$.elems.each(function(e){var n=t.isScrolledIntoView(this),a="horizontal"==t.config.alignment?n.right:n.bottom;return a?void 0:(i=e,!1)});this.goTo(i,e)}},goTo:function(e,t,i){if(e!==this.currentIndex){var n={left:0,top:0},a="horizontal"===this.config.alignment,s=e<this.currentIndex,o=0,r=s?this.elemsData.slice(0,e+1):this.elemsData.slice(e),l=this.$.elems.eq(e);"function"==typeof t&&(i=t,t=void 0),void 0===t&&(t=!0);for(var c=0;c<r.length;c++)o+=r[c]+1;o<=this.config.pageSize&&(e=s?0:this.elementCount-1),e<this.currentIndex?0!==e&&(a?n.left=-(l.position().left+l.outerWidth())+this.$.slider.width():n.top=-1*Math.abs(this.$.slider.height()-(l.position().top+l.height()))):e===this.elementCount-1?a?n.left=-1*Math.abs(this.$.slider.width()-this.$.sliderPane.width()):n.top=-1*Math.abs(this.$.slider.height()-this.$.sliderPane.height()):a?n.left=-l.position().left:n.top=-l.position().top,this.slideIndex=Math.floor(e/this.config.pageSize),this.currentIndex=e,this._slide(n,t,i)}},_slide:function(e,t,i){function n(){a.isAnimating=!1,"function"==typeof i&&i()}var a=this;this.isAnimating=!0,Modernizr.csstransforms3d&&this.config.useCSS?(this.$.sliderPane.css({transform:"translate3d("+e.left+"px,"+e.top+"px, 0)"}).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",n),setTimeout(function(){a.isAnimating&&(a.isAnimating=!1)},this.config.slideSpeed)):t?this.$.sliderPane.stop().animate(e,this.config.slideSpeed,n):(this.$.sliderPane.stop().css(e),n()),this._updateControlState(),this.$.sliderWindow.trigger("slide-changed",[this.$.elems.eq(this.currentIndex)])},_setSizes:function(){var e=this.config.pageSize,t=100/(this.elementCountRecalculated/e*e);this.$.elems.each(function(){var e=$(this),i=e.data().span||1;e.css("width",t*i+"%")});var i=this.elementCountRecalculated/e*100;this.$.sliderPane.css({width:i+this.config.buffer+"%"}),this.$.slider.scrollLeft(0)},_setTotal:function(){this.$.sliderPane.removeClass("page-size-1 page-size-2 page-size-3 page-size-4"),this.$.sliderPane.addClass("page-size-"+this.config.pageSize),this.slideTotal=Math.ceil(this.elementCountRecalculated/this.config.pageSize)},_resetPosition:function(e){setTimeout(function(){this.$.slider.scrollTop(0),this.$.slider.scrollLeft(0)}.bind(this),0)},_bindEvents:function(){var e=this.config;if(e.controlButtons.render){var t=e.controlButtons.classes.inactive;this.$.prevButton.on("click.slider",$.proxy(function(e){e.preventDefault(),$(e.target).hasClass(t)||this.prev()},this)),this.$.nextButton.on("click.slider",$.proxy(function(e){e.preventDefault(),$(e.target).hasClass(t)||this.next()},this))}if(e.touch){var i=!0;$(this.config.id).is(".carousel-product")||$(this.config.id).is(".product-bundles-group")||(i=!1);var n=navigator.userAgent.toLowerCase(),a=n.indexOf("android")>-1,s=n.indexOf("chrome")>-1;a&&s&&i||this.$.sliderWindow.swipe({allowPageScroll:"vertical",swipe:$.proxy(function(e,t,i){this.slideShow&&this.slideShow.pause(),"left"==t?this.next():"right"==t&&this.prev()},this),threshold:75})}this.slideShow&&(this.$.sliderWindow.on("click.slider",this.slideShow.pause).on("mouseover.slider",this.slideShow.pause).on("mouseleave.slider",this.slideShow.play),this.config.controlButtons.render&&(this.$.prevButton.on("click.slider",this.slideShow.pause),this.$.nextButton.on("click.slider",this.slideShow.pause))),this.$.pagination&&this.$.pagination.on("click.slider",$.proxy(function(e){e.preventDefault(),this.slideShow&&this.slideShow.pause(),this.goTo($(e.currentTarget).index())},this)),this.$.elem&&this.$.elem.on("click.slider",$.proxy(function(e){this.setCurrentElement($(e.currentTarget))},this)),$(window).on("resize.slider",$.proxy(function(e){this.goTo(0,!1)},this)),this.$.elems.on("keydown.slider",$.proxy(this._onKeyDown,this)),this.$.sliderPane.on("mousedown.slider",$.proxy(this._onMouseDown,this)).on("mouseup.slider",$.proxy(this._onMouseUp,this)).on("receivedfocus.slider",$.proxy(this._onReceivedFocus,this)).on("lostfocus.slider",$.proxy(this._onLostFocus,this)).on("focusin.slider",$.proxy(this._resetPosition,this))},_unbindEvents:function(){this.$.sliderWindow.off(".slider"),this.$.sliderPane.off(".slider"),$(window).off(".slider"),this.$.elem&&this.$.elem.off(".slider"),this.config.controlButtons.render&&(this.$.prevButton.off(".slider"),this.$.nextButton.off(".slider")),this.config.touch&&this.$.sliderWindow.swipe("destroy"),this.$.pagination&&this.$.pagination.off(".slider")},_onMouseDown:function(e){this.isMouseDown=!0},_onMouseUp:function(e){this.isMouseDown=!1},_onReceivedFocus:function(e,t){var i=this.$.elems.has(t),n=this.$.elems.index(i);return t.className.indexOf(this.config.btnSuperDropdown)>-1?!1:(this.slideShow&&this.slideShow.pause(),void(this.isMouseDown||0!==n&&n!==this.$.elems.length-1||(this._resetPosition(),this.goTo(n))))},_onLostFocus:function(e,t){this.slideShow&&this.slideShow.play()},_onKeyDown:function(e){if(9==(e.keyCode||e.which)){var t=this,i=$(e.target).closest(this.config.selectors.elems),n=this.$.elems.index(i),a=n+(e.shiftKey?-1:1);if(a>=0&&a<this.$.elems.length){e.preventDefault();var s,o,r=e.shiftKey?this.prev:this.next;if(this.$.tabStops.each(function(i){return this===e.target?(s=t.$.tabStops.eq(i+(e.shiftKey?-1:1)),o=s.closest(t.config.selectors.elems),!1):void 0}),o&&s){var l=this.isScrolledIntoView(o),c="horizontal"!==this.config.alignment?!(e.shiftKey?l.top:l.bottom):!(l.left&&l.right);c?r.call(this,function(){s.focus()}):s.focus()}}else this.slideShow&&this.slideShow.play()}},_renderControls:function(){var e=this.config.controlButtons,t=this.$.controls?this.$.controls:this.$.sliderWindow;this.config.controlButtons.render&&"undefined"==typeof this.$.prevButton?(this.$.prevButton=$("<a>",{href:"","class":e.classes.prev}).text(e.text.prev).prependTo(t),this.$.nextButton=$("<a>",{href:"","class":e.classes.next}).text(e.text.next).appendTo(t),this.config.counter&&(this.$.counter=$("<p>",{"class":"carousel-counter"}).html("<span>"+s.counterHTML.part1+"</span>"+s.counterHTML.part2+' <em class="carousel-slide-number"></em> '+s.counterHTML.part3+' <em class="carousel-slide-total"></em>').appendTo(t))):0==this.config.controlButtons.render&&"ui-nav-room-compact"==this.config.id.id&&"undefined"!=typeof this.$.prevButton&&(this.$.prevButton.remove(),this.$.nextButton.remove(),delete this.$.prevButton,delete this.$.nextButton),this._updateControlState()},_updateControlState:function(){var e=!1;if(this.config.pageSize>=this.elementCount&&"undefined"!=typeof this.$.prevButton&&(e=!0),!this.config.loop&&(this.config.controlButtons.render||e)){var t=this.config.controlButtons.classes.inactive;this.elementCountRecalculated<=this.config.pageSize?(this.$.prevButton.addClass(t),this.$.nextButton.addClass(t)):(this.currentIndex<1?this.$.prevButton.addClass(t):this.$.prevButton.removeClass(t),this.currentIndex!=this.elementCount-1?this.$.nextButton.removeClass(t):this.$.nextButton.addClass(t))}this.$.pagination&&this.$.pagination.eq(this.currentIndex).addClass(this.config.activeClass).siblings().removeClass(this.config.activeClass),this.$.counter&&($(".carousel-slide-number",this.$.counter).text(this.slideIndex+1),$(".carousel-slide-total",this.$.counter).text(this.slideTotal))},destroy:function(){this._unbindEvents(),this.$.sliderPane.stop().removeAttr("style"),this.$.elems.width(""),this.$.elem&&this.$.elem.removeClass(this.config.activeClass),this.config.controlButtons.render&&(this.$.prevButton.remove(),this.$.nextButton.remove(),delete this.$.prevButton,delete this.$.nextButton),this.slideShow&&this.slideShow.stop(),this.config.initflag=!1}});var r=function(e,t){var i,n,a=t;this.stop=function(){window.clearTimeout(i)},this.pause=function(){window.clearTimeout(i),a-=new Date-n};var s=this.play=function(){n=new Date,i=window.setTimeout(function(){e(),s()},t)}};return function(e){var t;return $(e.id).each(function(){var i=$.extend(!0,{},e);i.id=this,t=new o(i)}),t}}),define("app/jquery.equalheights",["require","underscore"],function(e){var t=e("underscore"),i=function(e,t){this.settings=$.extend({rows:!1,resize:!1,destroy:!1},t),this.$collection=$(e),this.settings.destroy&&this.destroy(),this.init()};return i.prototype.init=function(){this.setHeights(),this.settings.resize&&$(window).on("resize.equalheights",t.debounce(this.setHeights.bind(this),200))},i.prototype.setHeights=function(){var e;if(this.$collection.css("minHeight",""),this.settings.rows)for(var t=this.getRows(),i=0;i<t.length;i++){var n=t[i];e=this.getMaxHeight(n),n.css("minHeight",e)}else e=this.getMaxHeight(this.$collection),this.$collection.css("minHeight",e)},i.prototype.getRows=function(){var e,t,i=this.$collection,n=[];return i.each(function(a){var s=$(this),o=10*Math.ceil(s.offset().top/10);t!==o&&(e&&n.push(e),e=$()),e=e.add(this),a+1===i.length&&n.push(e),t=o}),n},i.prototype.destroy=function(){this.$collection.css("minHeight","").removeData("equalheights"),$(window).off(".equalheights")},i.prototype.getMaxHeight=function(e){return Math.max.apply(null,e.map(function(){return $(this).outerHeight()}).get())},$.fn.equalHeights=function(e){var t=$(this).data();return t.equalheights||"object"!=typeof e&&e?t.equalheights&&t.equalheights[e]&&t.equalheights[e](Array.prototype.slice.call(arguments,1)):t.equalheights=new i(this,e),this},i}),define("app/productCarousel",["require","config","app/slider","app/jquery.equalheights"],function(e){String.prototype.explode=function(e,t){var i=this.split(e);return t&&i.push(i.splice(t-1).join(e)),i};var t=(e("config").app,e("app/slider"));e("app/jquery.equalheights");var i=function(e){this.settings=$.extend(!0,{id:".carousel-product",useCSS:!1,touch:!0,pageSize:3,activeClass:"is-active",disregardLazy:0,breakpointsLeftSideBar:[{mediaQuery:"screen and (max-width: 30em)",settings:{pageSize:1}},{mediaQuery:"screen and (min-width: 30.0625em) and (max-width: 40em)",settings:{pageSize:2}},{mediaQuery:"screen and (min-width: 40em) and (max-width: 50em)",settings:{pageSize:1}},{mediaQuery:"screen and (min-width: 50.0625em) and (max-width: 57.4375em)",settings:{pageSize:2}},{mediaQuery:"screen and (min-width: 57.5em)",isDefault:!0,settings:{pageSize:3}}],breakpointsDefault:[{mediaQuery:"screen and (max-width: 30em)",settings:{pageSize:1}},{mediaQuery:"screen and (min-width: 30.0625em) and (max-width: 40em)",settings:{pageSize:2}},{mediaQuery:"screen and (min-width: 40.0625em) and (max-width: 57.4375em)",settings:{pageSize:3}},{mediaQuery:"screen and (min-width: 57.5em)",isDefault:!0,settings:{pageSize:4}}],selectors:{itemWrap:".product-wrap"}},e),this._init(),this._bindEvents()};i.prototype={_init:function(){var e=$(this.settings.id),i=this;e.each(function(){var e=$(this),n=e.data("carouselProduct");if(!n){var a=jQuery.extend(!0,{},i.settings),s=$(a.selectors.itemWrap,e);if(a.id=e,e.parents(".main-section-holder").length>0?a.breakpoints=i.settings.breakpointsLeftSideBar:a.breakpoints=i.settings.breakpointsDefault,e.is(".lazy-carousel")){var o=new t(jQuery.extend(!0,{},a));s.length>0&&s.equalHeights({rows:!0,resize:!0,destroy:!0}),e.data("carouselProduct",o),e.find("li").length<=e.data("limit")&&e.find(".carousel-btn-next").addClass("is-lazy-enabled"),i._bindLazy(e,o,a)}else{var o=new t(jQuery.extend(!0,{},a));s.length>0&&s.equalHeights({rows:!0,resize:!0}),e.data("carouselProduct",o)}i._bindEventsToSlider(o)}})},_lazyJump:function(e,t,i){var n=t.data("limit"),a=e.config.pageSize,s=t.find("li").length,o=s/a,r=Math.ceil(n/a);1==a?e.next():2==a?(e.next(),e.next()):(e.next(),e.next(),e.next()),o!=r&&(t.find(".carousel-btn-next").addClass("is-lazy-enabled"),this._bindLazy(t,e,i))},_lazyLoaderAction:function(e,t){t?e.find(".carousel-btn-next.is-lazy-enabled").removeClass("is-lazy-enabled").addClass("lazy-load-spinner"):e.find(".carousel-btn-next.lazy-load-spinner").removeClass("lazy-load-spinner").addClass("is-lazy-enabled")},setEANs:function(e){for(var t=$(e).find("li:last .product-meta dd:last").text(),i="",n=!1,a="",s=0,o=$(e).attr("data-eans"),r=o.explode(","),l=0;l<r.length;l++)n&&(r.length==l+1?a+=r[l]:a=a+r[l]+",",s++),r[l]==t&&(i=l,n=!0);""==a&&e.find(".is-lazy-enabled").removeClass("is-lazy-enabled"),$(e).attr("data-limit",s+$(e).find("li").length).attr("data-eans",a)},_bindLazy:function(e,i,n){this.setEANs(e);var a=this;i.config.pageSize;e.find(".is-lazy-enabled").on("click.ajaxRecs",function(){if(i.slideIndex+1!=i.slideTotal)return!1;if(i.config.disregardLazy>=0){var s="horizontal",o={productId:e.attr("data-eans").replace(/,/g,":"),scrollerType:s};$.ajax({url:e.attr("data-pull"),method:"GET",data:o,beforeSend:a._lazyLoaderAction(e,!0)}).done(function(s){e.find("ul").append(s);$(a);e.find(".carousel-btn").remove(),i=new t(jQuery.extend(!0,{},n)),a._bindEventsToSlider(i);var o=$(n.selectors.itemWrap,e);o.length>0&&o.equalHeights({rows:!0,resize:!0,destroy:!0}),a._lazyJump(i,e,n)}).fail(function(){})}else i.config.disregardLazy=i.config.disregardLazy+1})},_bindEvents:function(){$(document).on("loaded.customRenderer.carousel",$.proxy(this._init,this))},_bindEventsToSlider:function(e){$(document).on("loaded.customRenderer.carousel",$.proxy(this._init,this)),$(document).on("click.ajaxRecs",".carousel-btn-prev",function(){e.config.disregardLazy=e.config.disregardLazy-1})}},new i}),define("app/follow-focus",["require"],function(e){function t(e){var t;if("#"!==e||"#."!==e||"#0"!==e){try{t=$(e)}catch(i){t=[]}t.length&&(t.attr("tabindex","0"),t.focus(),t.on("keydown.access",function(){t.removeAttr("tabindex"),t.unbind("keydown.access")}))}}$(document).on("click.accessibility","a[href^=#]",function(){var e=$(this).attr("href");t(e)}),$(document).ready(function(){window.location.hash.length&&t(window.location.hash)})}),define("app/external-links",["require"],function(e){var t=$("#content a"),i=new RegExp("^(http://|https://|//)","i");t.each(function(){("_blank"===$(this).attr("target")||i.test($(this).attr("href")))&&$(this).addClass("needsclick")})}),define("app/toggleContactFields",[],function(){var e=$(".js-toggle.is-hidden .ico-help"),t=$(".js-toggler"),i=$(".js-toggle"),n="is-hidden",a="is-visible";e.attr("tabindex","-1"),$(document).on("click",".js-toggler",function(s){var o,r,l,c,d;e=$(".js-toggle.is-hidden .ico-help"),e.attr("tabindex","-1"),o=$(this).parents(".js-toggle-fields"),t=o.find(".js-toggler"),i=t.parents(".js-toggle-fields").find(".js-toggle"),s.preventDefault(),t.toggleClass(a).toggleClass(n),i.toggleClass(a).toggleClass(n),r=o.find('.js-toggle.is-visible [type="tel"]'),r.focus(),l=o.find('.js-toggler, .js-toggle label, .js-toggle [type="tel"]'),l.each(function(){var e=$(this).attr("tabindex");"undefined"!=typeof e&&e!==!1?$(this).removeAttr("tabindex"):$(this).attr("tabindex","-1")}),c=o.find(".js-toggle .ico-help"),c.each(function(){$(this).parents(".js-toggle").hasClass(n)?$(this).attr("tabindex","-1"):$(this).attr("tabindex","0")}),d=o.find('.js-toggle [type="tel"]'),d.each(function(){var e=$(this).attr("required");"undefined"!=typeof e&&e!==!1?$(this).removeAttr("required").attr("aria-required",!1):$(this).attr({required:"required","aria-required":!0})})})}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},FastClick.prototype.determineEventType=function(e){return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,i;if(t=e.fastClickScrollParent,!t||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,i,n;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1},FastClick.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,i,n,a,s,o=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=o.tagName.toLowerCase(),"label"===n){if(t=this.findControl(o)){if(this.focus(o),this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o))return e.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(o),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(a=o.fastClickScrollParent,a&&a.fastClickLastScrollTop!==a.scrollTop)?!0:(this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),
e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t,i;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e){return new FastClick(e)},"undefined"!=typeof define&&define.amd?define("lib/fastclick",[],function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("app/ajaxLoader",["require","config","lang"],function(e){function t(e,t){var n="body"===$(e).selector?" is-fixed":"",s='<div class="ajax-loading'+n+'"><div class="loader" tabindex="0"><img src="'+i.imagePath+'throbber.gif" alt="" /><br />',o="</div></div>",r=void 0!==t?t:a.defaultMessage,l=s+r+o,c="ajax-loading-parent";$(e).css({position:"relative"}).addClass(c).prepend(l),$(e).find(".loader").focus(),$(document).keyup(function(t){27===t.keyCode&&($(e).find(".ajax-loading").remove(),$(e).context.focus())})}var i=e("config").app,n=e("lang"),a=n.ajaxLoader;return t}),function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function n(){var n;return i.settings.submitHandler?(i.submitButton&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&n.remove(),!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var a=e.data(n.form,"validator").settings,s=a.rules,o=e.validator.staticRules(n);switch(t){case"add":e.extend(o,e.validator.normalizeRule(i)),delete o.messages,s[n.name]=o,i.messages&&(a.messages[n.name]=e.extend(a.messages[n.name],i.messages));break;case"remove":if(!i)return delete s[n.name],o;var r={};return e.each(i.split(/\s/),function(e,t){r[t]=o[t],delete o[t]}),r}}var l=e.validator.normalizeRules(e.extend({},e.validator.classRules(n),e.validator.attributeRules(n),e.validator.dataRules(n),e.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i=e(t).attr("type"),n=e(t).val();return"radio"===i||"checkbox"===i?e("input[name='"+e(t).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n=e(t).rules(),a=!1,s=this.elementValue(t);for(var o in n){var r={method:o,parameters:n[o]};try{if(i=e.validator.methods[o].call(this,s,t,r.parameters),"dependency-mismatch"===i){a=!0;continue}if(a=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,r),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",l),l}}return a?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return e(t).data("msg-"+i.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;arguments.length>e;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var n=this.defaultMessage(t,i.method),a=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,t):a.test(n)&&(n=e.validator.format(n.replace(a,"{$1}"),i.parameters)),this.errorList.push({message:n,element:t}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var i=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=e("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},n=e(t),a=n[0].getAttribute("type");for(var s in e.validator.methods){var o;"required"===s?(o=n.get(0).getAttribute(s),""===o&&(o=!0),o=!!o):o=n.attr(s),/min|max/.test(s)&&(null===a||/number|range|text/.test(a))&&(o=Number(o)),o?i[s]=o:a===s&&"range"!==a&&(i[s]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var i,n,a={},s=e(t);for(i in e.validator.methods)n=s.data("rule-"+i.toLowerCase()),void 0!==n&&(a[i]=n);return a},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,a){if(a===!1)return void delete t[n];if(a.param||a.depends){var s=!0;switch(typeof a.depends){case"string":s=!!e(a.depends,i.form).length;break;case"function":s=a.depends.call(i,i)}s?t[n]=void 0!==a.param?a.param:!0:delete t[n]}}),e.each(t,function(n,a){t[n]=e.isFunction(a)?a(i):a}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],3>i.length&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var a=e(i).val();return a&&a.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(""+new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i=0,n=0,a=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--){var o=e.charAt(s);n=parseInt(o,10),a&&(n*=2)>9&&(n-=9),i+=n,a=!a}return 0===i%10},minlength:function(t,i,n){var a=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||a>=n},maxlength:function(t,i,n){var a=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n>=a},rangelength:function(t,i,n){var a=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||a>=n[0]&&n[1]>=a},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&i[1]>=e},equalTo:function(t,i,n){var a=e(n);return this.settings.onfocusout&&a.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t===a.val()},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var a=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,n="string"==typeof n&&{url:n}||n,a.old===t)return a.valid;a.old=t;var s=this;this.startRequest(i);var o={};return o[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:o,success:function(n){s.settings.messages[i.name].remote=a.originalMessage;var o=n===!0||"true"===n;if(o){var r=s.formSubmitted;s.prepareElement(i),s.formSubmitted=r,s.successList.push(i),delete s.invalid[i.name],s.showErrors()}else{var l={},c=n||s.defaultMessage(i,"remote");l[i.name]=a.message=e.isFunction(c)?c(t):c,s.invalid[i.name]=!0,s.showErrors(l)}a.valid=o,s.stopRequest(i,o)}},n)),"pending"}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){var a=e.port;"abort"===e.mode&&(t[a]&&t[a].abort(),t[a]=n)});else{var i=e.ajax;e.ajax=function(n){var a=("mode"in n?n:e.ajaxSettings).mode,s=("port"in n?n:e.ajaxSettings).port;return"abort"===a?(t[s]&&t[s].abort(),t[s]=i.apply(this,arguments),t[s]):i.apply(this,arguments)}}}(window.jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var a=e(i.target);return a.is(t)?n.apply(a,arguments):void 0})}})}(window.jQuery),define("lib/jquery.validate",function(){}),function(e){function t(e,t){return{rate:e,messageKey:t}}var i=/[a-z]/,n=/[A-Z]/,a=/[0-9]/,s=/[0-9].*[0-9]/,o=/[^a-zA-Z0-9]/,r=/^(.)\1+$/;e.validator.passwordRating=function(e,l){if(!e||e.length<8)return t(0,"too-short");if(e.length>35)return t(0,"too-long");if(l&&e.toLowerCase().match(l.toLowerCase()))return t(0,"similar-to-username");if(r.test(e))return t(1,"very-weak");var c=i.test(e),d=n.test(e),u=a.test(e),h=s.test(e),p=o.test(e);return c&&d&&u||c&&h||d&&h||p?t(4,"strong"):c&&d||c&&u||d&&u?t(3,"good"):t(2,"weak")},e.validator.passwordRating.messages={"similar-to-username":"Too similar to username","too-short":"Too short","too-long":"Too long","very-weak":"Very weak",weak:"Weak",good:"Good",strong:"Strong"},e.validator.addMethod("password",function(t,i,n){var a=i.value,s=e("boolean"!=typeof n?n:[]),o=e.validator.passwordRating(a,s.val()),r=e(".password-meter",i.form);return r.removeClass("is-hidden"),r.find(".password-meter-bar").removeClass().addClass("password-meter-bar").addClass("password-meter-"+o.messageKey),r.find(".password-meter-message").removeClass().addClass("password-meter-message").addClass("password-meter-message-"+o.messageKey).text(e.validator.passwordRating.messages[o.messageKey]),o.rate>2},"Your password must contain between 8-35 characters and have at least one number OR one upper case letter"),e.validator.classRuleSettings.password={password:!0}}(jQuery),define("lib/jquery.validate.password",function(){}),define("app/validation-methods",["require","lang","lib/jquery.validate","lib/jquery.validate.password"],function(e){var t=e("lang"),i=t.validation_methods;e("lib/jquery.validate"),e("lib/jquery.validate.password"),$.validator.addMethod("unicodeWithBasicPunc",function(e,t){return this.optional(t)||XRegExp("^[\\p{L} #&0-9,.'-]+$").test(e)},i.unicodeWithBasicPunc),$.validator.addMethod("phone",function(e,t){return this.optional(t)||XRegExp("^([+])?([0-9 ]+)?(\\([0-9 ]+\\))?([0-9 ])+$").test(e)},i.phone),$.validator.addMethod("mobileuk",function(e,t){return this.optional(t)||/^07/.test(e)},i.mobileuk),$.validator.addMethod("minlengthIgnoreSpaces",function(e,t,i){return this.optional(t)||e.replace(/\s+/g,"").length>=i},i.minlengthIgnoreSpaces),$.validator.addMethod("maxlengthIgnoreSpaces",function(e,t,i){return this.optional(t)||e.replace(/\s+/g,"").length<=i},i.maxlengthIgnoreSpaces),$.validator.addMethod("alphanumeric",function(e,t){return this.optional(t)||XRegExp("^[\\p{L} 0-9s]+$").test(e)},i.alphanumeric),$.validator.addMethod("alphanumericWithHyphens",function(e,t){return this.optional(t)||XRegExp("^[\\p{L} 0-9s-]+$").test(e)},i.alphanumericWithHyphens),$.validator.addMethod("digitsWithSpaces",function(e,t){return this.optional(t)||XRegExp("^[0-9 ]+$").test(e)},i.digitsWithSpaces),$.validator.addMethod("postcodeUK",function(e,t){return this.optional(t)||/^((([A-Z][0-9])|([A-Z][0-9][0-9])|([A-Z][A-Z][0-9])|([A-Z][A-Z][0-9][0-9])|([A-Z][0-9][A-Z])|([A-Z][A-Z][0-9][A-Z]))\s?([0-9][A-Z]{2})|(GIR)\s?(0AA))$/i.test(e)},i.postcodeUK),$.validator.addMethod("postcodeJeGy",function(e,t){return this.optional(t)||/(^(?!(JE|GY)).*)$/i.test(e)},i.postcodeJeGy),$.validator.addMethod("email",function(e,t){return this.optional(t)||XRegExp("^(?=.{8,252}$)[\\w]+[\\.\\-\\+]?((([^\\.]\\.)|([^\\-]\\-)|([^\\+]\\+))|([\\w]))*([\\w]|[\\-])@[A-Za-z\\d][-.\\w]*[A-Za-z\\d]\\.([A-Za-z]{2,13})$").test(e)},i.email),$.validator.addMethod("membership",function(e,t){return this.optional(t)||/^[0-9]+$/.test(e.replace(/\s+/g,""))},i.membership),$.validator.addMethod("digitsIntegerWithFormatting",function(e,t){var i=/^[0-9]+$/.test(Math.floor(e));return i&&$(t).val(Math.floor(e)),this.optional(t)||i},i.digits),$.validator.addMethod("ajaxconfirm",function(e,t){var i,n=$(t),a=n.closest("form"),s=$("[type=submit]",a),o=$("[name=ajaxUrl]",a),r=n.data(),l=o.data("item-url"),c=null;return void 0===r.isValid&&(r.isValid=!0),void 0===r.event&&"true"===o.val()&&(i={validateField:n.attr("name")},i[s.attr("name")]=s.val(),c=a.serialize(),c+=""!==c?"&":"",c+=$.param(i),$.ajax({type:"post",dataType:"json",url:l,data:c,headers:{"cache-control":"no-cache"},timeout:5e4,async:!1}).done(function(e){$.validator.messages.ajaxconfirm=e.message,e.status=parseInt(e.status),r.isValid=e.status>0?!1:!0,0===e.status&&$("[data-ajax=false]",a).length>0&&(o.val("false"),a.submit())}).fail(function(e){$.validator.messages.ajaxconfirm=e})),r.isValid}),$.validator.addMethod("require-one",function(e){return $(".require-one:checked").size()>0},"Please select at least one of the options."),$.validator.addMethod("cardname",function(e,t){return this.optional(t)||XRegExp("^[\\p{L} '-]+$").test(e)},i.require_one),$.validator.addMethod("cardEndDate",function(e,t){var i,n=new Date,a=("0"+(n.getMonth()+1)).slice(-2),s=n.getFullYear(),o=s+a;return""!==$("#end-year").val()&&""!==$("#end-month").val()&&(i="20"+$("#end-year").val()+$("#end-month").val()),i?i>=o:!0},i.cardEndDate),$.validator.addMethod("cardStartDate",function(e,t){var i,n=parseInt($("#start-month").val())-1,a=2e3+parseInt($("#start-year").val()),s=new Date;return isNaN(n)||isNaN(a)||(i=new Date(a,n),s.setDate(1),s.setHours(0,0,0,0)),i?s>=i:!0},i.cardStartDate),jQuery.validator.addMethod("require_from_group",function(e,t,i){var n=$(t).closest("fieldset"),a=$(i[1],n.length?n:t.form),s=a.eq(0),o=s.data("valid_req_grp")?s.data("valid_req_grp"):$.extend({},this),r=a.filter(function(){return $.trim(o.elementValue(this)).length>0}).length>=i[0];return s.data("valid_req_grp",o),$(t).data("being_validated")||(a.data("being_validated",!0),a.each(function(){o.element(this)}),a.data("being_validated",!1)),r},jQuery.validator.format(i.require_from_group)),$.validator.addMethod("creditcard",function(e,t,i){var n,a,s=e,o=s.replace(/ /g,""),r=o.length,l=r%2,c=0;for(n=0;r>n;n++)a=o.charAt(n),n%2==l&&(a*=2,a>9&&(a-=9)),c+=parseInt(a);return c%10===0},i.creditcard),$.validator.addMethod("test_related_field",function(e,t,i){var n,a,s;if(t.checked){if(n=$(t),a=$(t),s=$("#"+a.attr("data-test-related-field")),""===s.val())return s=!1}else s=!0;return s}),$.validator.addMethod("test_other_field_has_value",function(e,t,i){return $(i[0]).length?""!==$(i[1]).val()?!0:!1:!0})});var XRegExp;XRegExp=XRegExp||function(e){function t(e,t,i){var n;for(n in d.prototype)d.prototype.hasOwnProperty(n)&&(e[n]=d.prototype[n]);return e.xregexp={captureNames:t,isNative:!!i},e}function i(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function n(e,n,a){if(!d.isRegExp(e))throw new TypeError("type RegExp expected");var s=f.replace.call(i(e)+(n||""),x,"");return a&&(s=f.replace.call(s,new RegExp("["+a+"]+","g"),"")),e=e.xregexp&&!e.xregexp.isNative?t(d(e.source,s),e.xregexp.captureNames?e.xregexp.captureNames.slice(0):null):t(new RegExp(e.source,s),null,!0)}function a(e,t){var i=e.length;if(Array.prototype.lastIndexOf)return e.lastIndexOf(t);for(;i--;)if(e[i]===t)return i;return-1}function s(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function o(e){return e=e||{},"all"===e||e.all?e={natives:!0,extensibility:!0}:s(e,"string")&&(e=d.forEach(e,/[^\s,]+/,function(e){this[e]=!0},{})),e}function r(e,t,i,n){var a,s,o=v.length,r=null;F=!0;try{for(;o--;)if(s=v[o],("all"===s.scope||s.scope===i)&&(!s.trigger||s.trigger.call(n))&&(s.pattern.lastIndex=t,a=g.exec.call(s.pattern,e),a&&a.index===t)){r={output:s.handler.call(n,a,i),match:a};break}}catch(l){throw l}finally{F=!1}return r}function l(e){d.addToken=u[e?"on":"off"],p.extensibility=e}function c(e){RegExp.prototype.exec=(e?g:f).exec,RegExp.prototype.test=(e?g:f).test,String.prototype.match=(e?g:f).match,String.prototype.replace=(e?g:f).replace,String.prototype.split=(e?g:f).split,p.natives=e}var d,u,h,p={natives:!1,extensibility:!1},f={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},g={},m={},v=[],y="default",b="class",w={"default":/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,"class":/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},$=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,x=/([\s\S])(?=[\s\S]*\1)/g,k=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,C=f.exec.call(/()??/,"")[1]===e,T=RegExp.prototype.sticky!==e,F=!1,S="gim"+(T?"y":"");return d=function(i,a){if(d.isRegExp(i)){if(a!==e)throw new TypeError("can't supply flags when constructing one RegExp from another");return n(i)}if(F)throw new Error("can't call the XRegExp constructor within token definition functions");var s,o,l,c=[],u=y,h={hasNamedCapture:!1,captureNames:[],hasFlag:function(e){return a.indexOf(e)>-1}},p=0;if(i=i===e?"":String(i),a=a===e?"":String(a),f.match.call(a,x))throw new SyntaxError("invalid duplicate regular expression flag");for(i=f.replace.call(i,/^\(\?([\w$]+)\)/,function(e,t){if(f.test.call(/[gy]/,t))throw new SyntaxError("can't use flag g or y in mode modifier");return a=f.replace.call(a+t,x,""),""}),d.forEach(a,/[\s\S]/,function(e){if(S.indexOf(e[0])<0)throw new SyntaxError("invalid regular expression flag "+e[0])});p<i.length;)s=r(i,p,u,h),s?(c.push(s.output),p+=s.match[0].length||1):(o=f.exec.call(w[u],i.slice(p)),o?(c.push(o[0]),p+=o[0].length):(l=i.charAt(p),"["===l?u=b:"]"===l&&(u=y),c.push(l),++p));return t(new RegExp(c.join(""),f.replace.call(a,/[^gimy]+/g,"")),h.hasNamedCapture?h.captureNames:null)},u={on:function(e,t,i){i=i||{},e&&v.push({pattern:n(e,"g"+(T?"y":"")),handler:t,scope:i.scope||y,trigger:i.trigger||null}),i.customFlags&&(S=f.replace.call(S+i.customFlags,x,""))},off:function(){throw new Error("extensibility must be installed before using addToken");
}},d.addToken=u.off,d.cache=function(e,t){var i=e+"/"+(t||"");return m[i]||(m[i]=d(e,t))},d.escape=function(e){return f.replace.call(e,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},d.exec=function(e,t,i,a){var s,o=n(t,"g"+(a&&T?"y":""),a===!1?"y":"");return o.lastIndex=i=i||0,s=g.exec.call(o,e),a&&s&&s.index!==i&&(s=null),t.global&&(t.lastIndex=s?o.lastIndex:0),s},d.forEach=function(e,t,i,n){for(var a,s=0,o=-1;a=d.exec(e,t,s);)i.call(n,a,++o,e,t),s=a.index+(a[0].length||1);return n},d.globalize=function(e){return n(e,"g")},d.install=function(e){e=o(e),!p.natives&&e.natives&&c(!0),!p.extensibility&&e.extensibility&&l(!0)},d.isInstalled=function(e){return!!p[e]},d.isRegExp=function(e){return s(e,"regexp")},d.matchChain=function(e,t){return function i(e,n){for(var a=t[n].regex?t[n]:{regex:t[n]},s=[],o=function(e){s.push(a.backref?e[a.backref]||"":e[0])},r=0;r<e.length;++r)d.forEach(e[r],a.regex,o);return n!==t.length-1&&s.length?i(s,n+1):s}([e],0)},d.replace=function(t,i,a,s){var o,r=d.isRegExp(i),l=i;return r?(s===e&&i.global&&(s="all"),l=n(i,"all"===s?"g":"","all"===s?"":"g")):"all"===s&&(l=new RegExp(d.escape(String(i)),"g")),o=g.replace.call(String(t),l,a),r&&i.global&&(i.lastIndex=0),o},d.split=function(e,t,i){return g.split.call(e,t,i)},d.test=function(e,t,i,n){return!!d.exec(e,t,i,n)},d.uninstall=function(e){e=o(e),p.natives&&e.natives&&c(!1),p.extensibility&&e.extensibility&&l(!1)},d.union=function(e,t){var i,n,a,o,r=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,l=0,c=function(e,t,a){var s=n[l-i];if(t){if(++l,s)return"(?<"+s+">"}else if(a)return"\\"+(+a+i);return e},u=[];if(!s(e,"array")||!e.length)throw new TypeError("patterns must be a nonempty array");for(o=0;o<e.length;++o)a=e[o],d.isRegExp(a)?(i=l,n=a.xregexp&&a.xregexp.captureNames||[],u.push(d(a.source).source.replace(r,c))):u.push(d.escape(a));return d(u.join("|"),t)},d.version="2.0.0",g.exec=function(t){var n,s,o,r,l;if(this.global||(r=this.lastIndex),n=f.exec.apply(this,arguments)){if(!C&&n.length>1&&a(n,"")>-1&&(o=new RegExp(this.source,f.replace.call(i(this),"g","")),f.replace.call(String(t).slice(n.index),o,function(){for(var t=1;t<arguments.length-2;++t)arguments[t]===e&&(n[t]=e)})),this.xregexp&&this.xregexp.captureNames)for(l=1;l<n.length;++l)s=this.xregexp.captureNames[l-1],s&&(n[s]=n[l]);this.global&&!n[0].length&&this.lastIndex>n.index&&(this.lastIndex=n.index)}return this.global||(this.lastIndex=r),n},g.test=function(e){return!!g.exec.call(this,e)},g.match=function(e){if(d.isRegExp(e)){if(e.global){var t=f.match.apply(this,arguments);return e.lastIndex=0,t}}else e=new RegExp(e);return g.exec.call(e,this)},g.replace=function(e,t){var i,n,o,r,l=d.isRegExp(e);return l?(e.xregexp&&(i=e.xregexp.captureNames),e.global||(r=e.lastIndex)):e+="",s(t,"function")?n=f.replace.call(String(this),e,function(){var n,a=arguments;if(i)for(a[0]=new String(a[0]),n=0;n<i.length;++n)i[n]&&(a[0][i[n]]=a[n+1]);return l&&e.global&&(e.lastIndex=a[a.length-2]+a[0].length),t.apply(null,a)}):(o=String(this),n=f.replace.call(o,e,function(){var e=arguments;return f.replace.call(String(t),$,function(t,n,s){var o;if(n){if(o=+n,o<=e.length-3)return e[o]||"";if(o=i?a(i,n):-1,0>o)throw new SyntaxError("backreference to undefined group "+t);return e[o+1]||""}if("$"===s)return"$";if("&"===s||0==+s)return e[0];if("`"===s)return e[e.length-1].slice(0,e[e.length-2]);if("'"===s)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(s=+s,!isNaN(s)){if(s>e.length-3)throw new SyntaxError("backreference to undefined group "+t);return e[s]||""}throw new SyntaxError("invalid token "+t)})})),l&&(e.lastIndex=e.global?0:r),n},g.split=function(t,i){if(!d.isRegExp(t))return f.split.apply(this,arguments);var n,a=String(this),s=t.lastIndex,o=[],r=0;return i=(i===e?-1:i)>>>0,d.forEach(a,t,function(e){e.index+e[0].length>r&&(o.push(a.slice(r,e.index)),e.length>1&&e.index<a.length&&Array.prototype.push.apply(o,e.slice(1)),n=e[0].length,r=e.index+n)}),r===a.length?(!f.test.call(t,"")||n)&&o.push(""):o.push(a.slice(r)),t.lastIndex=s,o.length>i?o.slice(0,i):o},h=u.on,h(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&t===y)return e[0];throw new SyntaxError("invalid escape "+e[0])},{scope:"all"}),h(/\[(\^?)]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"}),h(/(?:\(\?#[^)]*\))+/,function(e){return f.test.call(k,e.input.slice(e.index+e[0].length))?"":"(?:)"}),h(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?a(this.captureNames,e[1])+1:+e[1],i=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+e[0]);return"\\"+t+(i===e.input.length||isNaN(e.input.charAt(i))?"":"(?:)")}),h(/(?:\s+|#.*)+/,function(e){return f.test.call(k,e.input.slice(e.index+e[0].length))?"":"(?:)"},{trigger:function(){return this.hasFlag("x")},customFlags:"x"}),h(/\./,function(){return"[\\s\\S]"},{trigger:function(){return this.hasFlag("s")},customFlags:"s"}),h(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("can't use integer as capture name "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),h(/\\(\d+)/,function(e,t){if(!(t===y&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+e[0]);return e[0]},{scope:"all"}),h(/\((?!\?)/,function(){return this.hasFlag("n")?"(?:":(this.captureNames.push(null),"(")},{customFlags:"n"}),"undefined"!=typeof exports&&(exports.XRegExp=d),d}(),function(e){function t(e){return e.replace(/[- _]+/g,"").toLowerCase()}function i(e){for(;4>e.length;)e="0"+e;return e}function n(t){var n,a=[],s=-1;return e.forEach(t,/\\u(\w{4})(?:-\\u(\w{4}))?/,function(e){n=parseInt(e[1],16),n>s+1&&(a.push("\\u"+i(parseInt(s+1,10).toString(16))),n>s+2&&a.push("-\\u"+i(parseInt(n-1,10).toString(16)))),s=parseInt(e[2]||e[1],16)}),65535>s&&(a.push("\\u"+i(parseInt(s+1,10).toString(16))),65534>s&&a.push("-\\uFFFF")),a.join("")}var a={};e.install("extensibility"),e.addUnicodePackage=function(i,n){var s;if(!e.isInstalled("extensibility"))throw Error("extensibility must be installed before adding Unicode packages");if(i)for(s in i)i.hasOwnProperty(s)&&(a[t(s)]=i[s].replace(/\w{4}/g,"\\u$&"));if(n)for(s in n)n.hasOwnProperty(s)&&(a[t(n[s])]=a[t(s)])},e.addUnicodePackage({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05270531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280840-085808A008A2-08AC0904-0939093D09500958-09610971-09770979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A793A7A0-A7AAA7F8-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC"},{L:"Letter"}),e.addToken(/\\([pP]){(\^?)([^}]*)}/,function(e,i){var s="P"===e[1]||e[2]?"^":"",o=t(e[3]);if("P"===e[1]&&e[2])throw new SyntaxError("invalid double negation \\P{^");if(!a.hasOwnProperty(o))throw new SyntaxError("invalid or unknown Unicode property "+e[0]);return"class"===i?s?a["^"+o]||(a["^"+o]=n(a[o])):a[o]:"["+s+a[o]+"]"},{scope:"all"})}(XRegExp),define("lib/xregexp-unicode.min",function(){}),define("app/validation",["require","underscore","app/common","lib/jquery.mustache","app/notifier","app/ajaxLoader","lang","app/validation-methods","lib/xregexp-unicode.min"],function(e){function t(e,t){t.groups["group"+n.size(t.groups)]=$.map(e,function(e,t){return $(e).attr("name")}).join(" ")}function i(e){var i=$(e),n=$.extend(!0,{},u);$('[data-group-fields="true"]',i).each(function(e){var i=$('input:not([type="hidden"],[type="submit"])',this);t(i,n)});var a=$(".require-one",i);a.length&&t(a,n),i.submit(function(){$("section.delivery-fail").length&&s("body","loading")}),i.validate(n);for(var o in d){var r=$(".js-validator_"+o,i);r.each(function(){$(this).rules("add",d[o])})}return i.data().validator}var n=e("underscore"),a=(e("app/common"),e("lib/jquery.mustache"),e("app/notifier")),s=e("app/ajaxLoader"),o=e("lang"),r=!1;e("app/validation-methods"),e("lib/xregexp-unicode.min");var l=o.validation,c=l.errorMessage;$.extend($.validator.messages,{required:l.required,remote:l.remote,email:l.email,url:l.url,date:l.date,dateISO:l.dateISO,number:l.number,digits:l.digits,creditcard:l.creditcard,equalTo:l.equalTo,accept:l.accept,maxlength:$.validator.format(l.maxlength),minlength:$.validator.format(l.minlength),rangelength:$.validator.format(l.rangelength),range:$.validator.format(l.range),max:$.validator.format(l.max),min:$.validator.format(l.min)});var d={unicode:{unicodeWithBasicPunc:!0,maxlength:40},alphanumeric:{alphanumeric:!0,maxlength:40},digits:{digits:!0},digitsIntegerWithFormatting:{digitsIntegerWithFormatting:!0},"select-store":{messages:{required:l.select_store}},"has-store-selected":{test_other_field_has_value:[".js-validator_has-store-selected","#storeId"],messages:{test_other_field_has_value:l.has_store_selected.otherField}},question:{messages:{required:l.question}},phone:{phone:!0,minlengthIgnoreSpaces:9,maxlengthIgnoreSpaces:16,messages:{minlengthIgnoreSpaces:l.phone.min,maxlengthIgnoreSpaces:l.phone.max}},mobile:{mobileuk:!0,digitsWithSpaces:!0,minlengthIgnoreSpaces:11,maxlengthIgnoreSpaces:11,messages:{minlengthIgnoreSpaces:l.mobile.min,maxlengthIgnoreSpaces:l.mobile.max}},"house-number":{require_from_group:[1,".js-validator_house-name-number"],messages:{require_from_group:l.house_number}},"house-name":{require_from_group:[1,".js-validator_house-name-number"],messages:{require_from_group:l.house_name}},"delivery-fail":{require_from_group:[1,".js-validator_delivery-fail"],messages:{require_from_group:l.deliver_fail}},"agree-terms":{messages:{required:l.agree_terms}},"agree-terms-generic":{messages:{required:l.agree_terms_generic}},address:{unicodeWithBasicPunc:!0,maxlength:45},postcode:{alphanumeric:!0,maxlength:10,postcodeUK:!0},"postcode-je-gy":{postcodeJeGy:!0},"card-number":{digitsWithSpaces:!0,creditcard:!0},"card-start-date":{cardStartDate:!0},"card-end-date":{cardEndDate:!0},"card-name":{cardname:!0,maxlength:50},"card-issue":{digits:!0,maxlength:999,messages:{maxlength:l.card_issue}},"card-security":{digits:!0,minlength:3,maxlength:3,messages:{required:l.card_security.required,minlength:l.card_security.min,maxlength:l.card_security.max}},"old-pwd":{ajaxconfirm:!0,password:!1},"create-pwd":{ajaxconfirm:!0},"confirm-pwd":{password:!1,equalTo:"#create-pwd",messages:{equalTo:l.confirm_pwd}},"cancel-pwd":{ajaxconfirm:!0},"new-email":{ajaxconfirm:!0},"confirm-email":{equalTo:"#new-email",messages:{equalTo:l.confirm_email}},"membership-number":{minlengthIgnoreSpaces:16,maxlengthIgnoreSpaces:16,membership:!0,ajaxconfirm:!0,messages:{minlengthIgnoreSpaces:l.membership_number.min,maxlengthIgnoreSpaces:l.membership_number.max}},ean:{digits:!0,maxlength:13,messages:{digits:l.ean}},"order-reference":{alphanumeric:!0,maxlength:20,messages:{required:l.order_reference}},phone2:{require_from_group:[1,".js-validator_phone-email"]},email:{require_from_group:[1,".js-validator_phone-email"]},"test-related-phone":{test_related_field:".js-validator_test-related-field",messages:{test_related_field:l.test_related_phone}},"test-related-email":{test_related_field:".js-validator_test-related-field",messages:{test_related_field:l.test_related_email}}},u={errorElement:"span",errorClass:"is-error",focusInvalid:!1,ignore:':hidden:not(.hide-but-validate), [readonly="readonly"]',groups:{startDate:"startmonth startyear",endDate:"expirymonth expiryyear"},errorPlacement:function(e,t){var i=t.closest(".field"),n=t.closest("fieldset"),a=t.closest(".field-group"),s=(t.parents("form"),i.closest("fieldset").length>0),o=i.parents(".input-checkbox"),r=n.closest(".field").length>0,l=t.closest(".field-group").length>0,c=t.closest(".field-group-require-one").length>0,d=t.parents("form").is(".single-field-form"),u="error-"+t[0].id;e.addClass("form-error").attr({id:u}),t.attr({"aria-invalid":!0,"aria-describedby":u}),c?t.closest(".field-group-require-one").append(e):d||o||s?s&&n.data().groupFields?n.append(e):i.append(e):r?n.append(e):l?a.append(e):t.after(e)},showErrors:function(e,t){if(r&&this.currentElements.length>3||r&&$("body.checkout-delivery").length&&$(".delivery-fail").length){var i=$(this.currentForm),n={status:2,message:i.data("error-message")||c,entries:[]},a=0;$.each(t,function(){var e;if("radio"===this.element.type)e=$(this.element).closest("fieldset").data().label;else if("checkbox"===this.element.type&&$(this.element).is(".require-one"))0===a&&(e=$(this.element).closest("fieldset").data().label,a++);else{var t=$('label[for="'+this.element.id+'"]').eq(0).clone();$(".ico-required",t).remove();var i=t.data();e=t.data("labelShort")&&i.labelShort?i.labelShort:t.text()}n.entries.push({id:"#"+this.element.id,text:$.trim(e)}),$(this.element).data("additional-message")&&n.entries.push({id:"#"+this.element.id,text:$(this.element).data("additional-message")})}),i.data().notifier.notify(n),r=!1}this.defaultShowErrors()},invalidHandler:function(e,t){r=!0;var i=$(t.currentForm),n=i.data().notifier;n||(n=new a($(".delivery-fail").length?{target:$(".delivery-fail")}:i.hasClass("js-message-default")?{target:i}:i.hasClass("js-message-section-title")?{target:i.closest("section")}:{target:i}),i.data().notifier=n),t.numberOfInvalids()&&t.currentElements.length<=3&&u.scrollTo(t.errorList[0].element),i.has(".ajax-loading")&&$(".ajax-loading").remove()},highlight:function(e,t,i){$(e).addClass(t),$(e.form).find("label[for="+e.id+"]").addClass(t)},unhighlight:function(e,t,i){$(e).removeClass(t),$(e.form).find("label[for="+e.id+"]").removeClass(t)},scrollTo:function(e){var t=$(e);$("html, body").animate({scrollTop:t.offset().top},250,function(){t.focus()})},onfocusout:function(e,t){$(e).data("event",t.type),$.validator.defaults.onfocusout.call(this,e,t),$(e).removeData("event")},onkeyup:function(e,t){$(e).data("event",t.type),$.validator.defaults.onkeyup.call(this,e,t),$(e).removeData("event")}};return $("form").each(function(){i(this)}),$(document).on("click.validation keydown.validation",'.message a[href^="#"]',function(e){e.keyCode&&13!==e.keyCode||(e.preventDefault(),$($(this).attr("href")).focus())}),i}),define("app/carousel-hero",["require","app/slider","app/breakpoint","lang"],function(e){function t(e){var t,i='<sup class="pound">'+s.currency.htmlEntity+"</sup>",n=/^(£|€)/;$(e).each(function(){t=$(this).html(),t.match(n)&&$(this).html(i+t.substr(1))})}var i=e("app/slider"),n=e("app/breakpoint"),a=e("lang"),s=a.carouselHero,o=$(".carousel-hero"),r=o.data(),l=[],c=new n,d="desktop",u=$("body"),h=$(".hero-slide"),p="no-text";new i($.extend(!0,{id:o,slideShow:!0,loop:!0,touch:!0,counter:!0,controlButtons:{text:{prev:s.controlButtonsText.prev,next:s.controlButtonsText.next}},selectors:{slider:".carousel-inner",sliderPane:".cover",elems:".hero-slide",elem:null,pagination:".carousel-pagination li",controls:".carousel-controls"}},r)),l=u.hasClass("homepage")?[{mediaQuery:"screen and (max-width: 640px)",settings:{mode:"mobile"}},{mediaQuery:"screen and (min-width: 641px) and (max-width: 1024px)",settings:{mode:"tablet"}},{mediaQuery:"screen and (min-width: 1025px)",settings:{mode:"desktop"}}]:o.hasClass("hero-fullwidth")?[{mediaQuery:"screen and (max-width: 640px)",settings:{mode:"mobile"}},{mediaQuery:"screen and (min-width: 641px)",settings:{mode:"desktop"}}]:[{mediaQuery:"screen and (max-width: 900px)",settings:{mode:"mobile"}},{mediaQuery:"screen and (min-width: 901px)",settings:{mode:"desktop"}}],$.each(h,function(){0===$(this).find(".wrapper").children().length&&($(this).addClass(p),$(this).closest(".carousel-hero").addClass(p))}),$.each(l,function(e,t){c.register(t.mediaQuery,{match:function(){var e,i=$(".hero-slide");t.settings.mode!==d&&(d=t.settings.mode,"desktop"===d&&o.hasClass(p)&&o.css({display:"block"}),$.each(i,function(){var t=$(this).css("background");e="desktop"!==d?"data-img-"+d:"data-img","none"!==t&&($(this).hasClass(p)&&"mobile"===d?o.css({display:"none"}):"undefined"==typeof $(this).attr(e)?$(this).css({"background-image":"none"}):$(this).css({"background-image":"url("+$(this).attr(e)+")"}),"tablet"!==d?$(this).removeClass("tablet"):$(this).addClass("tablet"))}))}})}),t($(".banner-title > span"))}),define("app/sidebar",["require","app/toggletarget"],function(e){function t(){var e=60;e=0===$(".js-menus-trigger").height()?$(".is-back-link").height()+20:0,$(".has-back-link").css("margin-top",e)}e("app/toggletarget");var i="<i></i>";$.toggleTarget({toggle:".js-menus-trigger",target:".js-menus-container",activeClass:"is-expanded",inactiveClass:"is-collapsed",inverse:!0,useAria:!0}),$.toggleTarget({toggle:".js-menu-parent",target:".js-menu-children",context:"li",activeClass:"is-expanded",inactiveClass:"is-collapsed",inverse:!0,useAria:!0}),$(".js-menu-parent").append(i),$(document).ready(t),$(window).resize(t)}),define("app/showMore",["require","app/common","app/breakpoint","underscore","lib/jquery.mustache","lang"],function(e){var t=e("app/common"),i=e("app/breakpoint"),n=e("underscore"),a=e("lib/jquery.mustache"),s=e("lang"),o=s.showMoreLess,r=$.ec(t.object,{constructor:function(e){this.config={id:"",shownItemsQty:4,increment:null,className:"show-more",showMoreSwitchClass:"is-alt",showMoreText:o.showMore,showLessText:o.showLess,breakpoints:null,template:'<a class="{{className}} {{activeClass}}" href="#"><i/>{{linkText}}</a>',selectors:{items:".items"}},$.extend(!0,this.config,e||{}),this.config.breakpoints=e.breakpoints,this.$={},this.$.container=$(this.config.id),this._loadObjects(!0),this.isActive=!1,this._init()}}),l=r.prototype;return l._init=function(){var e,t=this;this.config.breakpoints?(e=new i({noMatch:function(){t.isInit&&t.destroy()}}),n.each(this.config.breakpoints,function(i){e.register(i.mediaQuery,{match:function(){t.config=$.extend(!0,{},t.config,i.settings),t.showRows(),t.hideExtraRows(),t.isActive=!1,t.setButton(),t.isInit=!0}},i.isDefault)})):(this.hideExtraRows(),this.setButton(),this.isInit=!0)},l._renderBtn=function(){var e=this.config,t=a.compile(e.template),i=$(t({className:e.className,activeClass:this.isActive?e.showMoreSwitchClass:"",linkText:this.isActive?e.showLessText:e.showMoreText}));this.$.button?this.$.button.replaceWith(i):this.$.container.append(i),this.$.button=i,this._bindEvents()},l.setButton=function(){var e=this.config;this.$.items.length>e.shownItemsQty?this._renderBtn():this.$.button&&(this.$.button.remove(),this.$.button=null)},l.hideExtraRows=function(){var e=this.config;this.$.items.each(function(t){t>=e.shownItemsQty&&$(this).hide()})},l.showRows=function(){var e=this,t=this.$.items.filter(":visible").length,i=0;this.config.increment?this.$.items.each(function(n){n>=t&&i<e.config.increment&&($(this).show(),i++)}):this.$.items.show()},l.destroy=function(){this._unbindEvents(),this.$.button.remove(),this.$.button=null,this.$.items.removeAttr("style"),this.isInit=!1},l._toggle=function(e){if(e&&e.preventDefault(),this.isActive?this.hideExtraRows():this.showRows(),this.config.increment){var t=this.config.shownItemsQty,i=this.$.items.filter(":visible").length;(this.$.items.length===i||t===i)&&(this.isActive=!this.isActive,this._renderBtn())}else this.isActive=!this.isActive,this._renderBtn();this.$.button.focus()},l._bindEvents=function(){this.$.button&&this.$.button.on("click.showMore",$.proxy(this._toggle,this))},l._unbindEvents=function(){this.$.button&&this.$.button.off("click.showMore")},function(e){var t;return $(e.id).each(function(){var i=$.extend(!0,{},e);i.id=this,t=new r(i)}),t}}),define("app/masonryGrid",["require","app/showMore","app/breakpoint"],function(e){var t=e("app/showMore"),i=e("app/breakpoint"),n={settings:{options:{parentSelector:".main-section",containerSelector:".masonry-grid",itemSelector:".over-merchandise",gridItemSelector:".masonry-grid .grid-item:not(.over-merchandise)",overlayTitle:".masonry-grid .inspiration-nom .overlay-title span:not(.sub-title, .accessibility)",productTitle:".masonry-grid .commercial .product-title a"},breakpoints:[{mediaQuery:"screen and (min-width: 801px)",isDefault:!0,settings:{mode:"desktop"}},{mediaQuery:"screen and (min-width: 641px) and (max-width: 50em)",settings:{mode:"large"}},{mediaQuery:"screen and (min-width: 481px) and (max-width: 40em)",settings:{mode:"medium"}},{mediaQuery:"screen and (max-width: 30em)",settings:{mode:"small"}},{mediaQuery:"screen and (max-width: 22.5em)",settings:{mode:"mobile"}}]},arrOverlayTitle:[],arrProductTitle:[],initialise:function(){var e=this,n=this.settings,a=new i;$.each(n.breakpoints,function(t,i){a.register(i.mediaQuery,{match:$.proxy(e.onMatch,e,i)},i.isDefault)}),new t({id:n.options.containerSelector,selectors:{items:"li:not(.over-merchandise)"},breakpoints:[{mediaQuery:"screen and (max-width: 30em)",settings:{shownItemsQty:5,increment:1}}]})},onMatch:function(e){var t=this,i=(this.settings,this.viewport=e.settings.mode);"undefined"!==i&&(t.showOverMerch(),t.multilineText(t.arrayText()))},showOverMerch:function(){var e,t=this,i=this.settings,n=this.viewport;t.parentSelector=i.options.parentSelector,t.$container=$(i.options.containerSelector),t.$container.each(function(){var a=$(this),s=a.find($(i.options.itemSelector)),o=a.find($(i.options.gridItemSelector));switch(s.hide(),e=$(this).parents(t.parentSelector).length?!1:!0,n){case"desktop":s.hide();break;case"large":e?o.length%3==1?s.show():o.length%3==2&&s.first().show():o.length%2==1&&s.first().show();break;case"medium":o.length%2==1&&s.first().show();break;case"small":s.hide()}})},arrayText:function(){var e=this,t=this.settings,i=$(t.options.overlayTitle),n=$(t.options.productTitle);0===e.arrOverlayTitle.length&&i.each(function(){e.arrOverlayTitle.push($(this).text())}),0===e.arrProductTitle.length&&n.each(function(){e.arrProductTitle.push($(this).text())});var a={overlayTitle:e.arrOverlayTitle,productTitle:e.arrProductTitle};return a},multilineText:function(e){var t,i=this,n=this.settings,a=this.viewport,s=$(n.options.overlayTitle),o=$(n.options.productTitle);s.each(function(n){t=50,e.overlayTitle[n].length>t&&$(this).text(i.truncateText(e.overlayTitle[n],t))}),o.each(function(n){t="small"===a?100:45,e.productTitle[n].length>t&&$(this).text(i.truncateText(e.productTitle[n],t))})},truncateText:function(e,t){return $.trim(e).substring(0,t).split(" ").slice(0,-1).join(" ")+"..."}};return n.initialise(),n}),define("app/deeplink-tabs",[],function(){var e=function(){this.deepLinkAccords()},t=function(){var e,t,i,n={},a=window.location.search.substring(1),s=a.split("&");for(e=0;e<s.length;e++)t=s[e].split("="),"undefined"==typeof n[t[0]]?n[t[0]]=t[1]:"string"==typeof n[t[0]]?(i=[n[t[0]],t[1]],n[t[0]]=i):n[t[0]].push(t[1]);return n}();return e.prototype.scrollTo=function(e,t){var i=$(e.replace("tab-ui","ui")),n=400;$(".gt-ie8,.lt-ie10").length&&(n=950),setTimeout(function(){if(i.length>0){var n=i.offset();window.scrollTo(n.left,n.top-10),t===!0&&setTimeout(function(){$(e).click()},400)}},n)},e.prototype.openAccordion=function(e){$("#"+e).is(".is-collapsed")?this.scrollTo("#"+e,!0):this.scrollTo("#"+e,!1)},e.prototype.openTab=function(e){var t=400;$("#"+e).click(),$(".gt-ie8,.lt-ie10")&&(t=800),setTimeout(function(){var t=$("#"+e).offset();window.scrollTo(t.left,t.top-10)},t)},e.prototype.opener=function(e){var t=this;$("#"+e).parents(".tab-panel")?setTimeout(function(){var i=$("#"+e).parents(".tab-panel");i.is(":visible")?t.openAccordion(e):($("#tab-"+i.prev().attr("id")).click(),t.openAccordion(e))},400):t.openAccordion(e)},e.prototype.deepLinkAccords=function(){var e=this,i=t.tab;if(i){if("tab-"===i.slice(0,4))return void setTimeout(function(){e.openTab(i)},400);$("#"+i).length&&this.opener(i)}},new e}),define("app/accordion",["require","app/toggletarget","app/deeplink-tabs"],function(e){var t=e("app/toggletarget"),i=(e("app/deeplink-tabs"),function(e){var t=this;this.settings=$.extend(this.settings,{container:".js-accordion",toggle:".js-accordion-handle",target:".js-accordion-content",context:".js-accordion-item",activeClass:"is-expanded",inactiveClass:"is-collapsed"},e),this.settings.inverse=!0,this.settings.useAria=!0,$(this.settings.toggle).each(function(){t.init(this)}),this.bindHandlers()});return i.prototype=new t,i.prototype.setAria=function(e){var t=e.data("toggletarget"),i=t.$target,n=e.closest(this.settings.container);n.attr({role:"tablist","aria-multiselectable":!0}),e.attr({role:"tab","aria-controls":i[0].id,tabindex:0,"aria-selected":t.isActive,"aria-expanded":t.isActive}),i.attr({role:"tabpanel","aria-hidden":!t.isActive,"aria-labelledby":e[0].id})},i.prototype.destroyOrig=i.prototype.destroy,i.prototype.destroy=function(e){$(this.settings.container).removeAttr("role aria-multiselectable"),this.destroyOrig()},new i,i}),define("app/jquery.touch",["require","lang"],function(e){var t=e("lang"),i=t.JQtouch,n=function(e,t){if("undefined"==typeof e)throw new Error(i.errorElement);if("undefined"==typeof t)throw new Error(i.errorCallback);this.$el=$(e),this.callback=t,this.hasTouchStart=!1,this.hasTouchMoved=!1,this.startX=null,this.startY=null,this.bind()};return n.prototype.bind=function(){this.$el.on("touchstart",$.proxy(this.onTouchStart,this)).on("touchend MSPointerUp pointerup",$.proxy(this.onTouchEnd,this)).on("touchmove",$.proxy(this.onTouchMove,this)).on("click",$.proxy(this.onClick,this))},n.prototype.onTouchMove=function(e){var t=e.originalEvent.touches[0];(Math.abs(t.clientX-this.startX)>10||Math.abs(t.clientY-this.startY)>10)&&(this.hasTouchMoved=!0)},n.prototype.onTouchStart=function(e){var t=e.originalEvent.touches[0];this.startX=t.clientX,this.startY=t.clientY,this.hasTouchStart=!0},n.prototype.onTouchEnd=function(e){e.preventDefault(),this.hasTouchMoved||this.callback.apply(this,[e]),this.hasTouchMoved=!1},n.prototype.onClick=function(e){this.hasTouchStart&&(e.preventDefault(),this.hasTouchStart=!1)},$.fn.touch=function(e){return $(this).each(function(){$(this).data("touchHandler",new n(this,e))}),this},n}),define("app/basket/miniBasket",["require","app/jquery.hasfocus","app/jquery.touch"],function(e){e("app/jquery.hasfocus"),e("app/jquery.touch");var t={options:{activeClass:"is-active"},initialise:function(){var e=this;this.$container=$(".my-basket-wrap"),this.$toggle=$(".my-basket",this.$container),this.$link=$("a",this.$toggle),this.$basket=$(".mini-basket",this.$container),this.$items=$("li",this.$basket),this.itemsCount=parseInt($(".basket-items",this.$toggle).text()),this.$items.each(function(t,i){var n=$(i).find(".description a"),a=$(i).find("a > img"),s=n.text(),o=a.attr("alt");s.length>36&&n.text(e.truncateTitle(s)),o.length>36&&a.attr("alt",e.truncateTitle(o))}),this.bindHandlers()},bindHandlers:function(){this.$container.hover($.proxy(this.open,this),$.proxy(this.close,this)).on("receivedfocus",$.proxy(this.open,this)).on("lostfocus",$.proxy(this.close,this)).on("touchend",function(e){e.stopPropagation()}),this.$toggle.touch($.proxy(this.onToggle,this)),$(".w1").on("touchend",$.proxy(this.close,this))},onToggle:function(e){var t=$(e.currentTarget);t.hasClass(this.options.activeClass)?window.location=$("> a",t).attr("href"):this.open()},close:function(e){var t=this;clearTimeout(this.timeout),e=e||0,this.timeout=setTimeout(function(){t.$toggle.removeClass(t.options.activeClass),t.$basket.removeClass(t.options.activeClass)},e)},open:function(){this.itemsCount>0&&!$("body").hasClass("js-basket")&&(this.$toggle.addClass(this.options.activeClass),this.$basket.addClass(this.options.activeClass))},truncateTitle:function(e){return $.trim(e).substring(0,36).split(" ").slice(0,-1).join(" ")+"..."}};return t.initialise(),t}),define("app/nav-room",["require","app/common","app/slider","lang"],function(e){var t=(e("app/common"),e("app/slider")),i=e("lang"),n=i.navRoom;if($("#ui-nav-room").length>0&&(window.diy.instances.navSlider=new t({id:"#ui-nav-room",breakpoints:[{mediaQuery:"screen and (min-width: 30em) and (max-width: 60em)",settings:{pageSize:5}},{mediaQuery:"screen and (min-width: 60em)",isDefault:!0,settings:{pageSize:6}}],controlButtons:{text:{prev:n.guidesButtonText.prev,next:n.guidesButtonText.next}},selectors:{slider:".nav-inner",elem:null}})),$("#ui-nav-room-compact").length>0){var a=!1,s=!1,o=!1,r=4,l=7,c=$("#ui-nav-room-compact .nav-inner ul li").length;if(c>10||6>=c){var d=10;c>10&&(a=!0)}else d=c;c>=l&&(s=!0),c>=r&&(o=!0),window.diy.instances.navSlider=new t({id:"#ui-nav-room-compact",breakpoints:[{mediaQuery:"screen and (min-width: 30em) and (max-width: 40em)",settings:{pageSize:4,controlButtons:{render:o}}},{mediaQuery:"screen and (min-width: 40em) and (max-width: 60em)",settings:{pageSize:7,controlButtons:{render:s}}},{mediaQuery:"screen and (min-width: 60em)",isDefault:!0,settings:{pageSize:d,controlButtons:{render:a}}}],controlButtons:{render:!0,text:{prev:n.projectButtonText.prev,next:n.projectButtonText.next}},selectors:{slider:".nav-inner",elem:null}})}}),define("app/mobileSiteNav",[],function(){function e(){$("input, a",".mobile-nav-secondary").attr("tabindex",-1)}function t(e){$(".mobile-nav-secondary a").attr("tabindex",-1),$("> li > a, > li > div > a, input",e).removeAttr("tabindex")}function i(e){var i=$(".mobile-nav-toggle"),n=e.parent(),a=$("> .mobile-subnav",n);e.addClass(s.inactive),n.addClass(s.active).siblings().addClass(s.inactive),t(a),i.parent().addClass(s.subnav)}function n(e){var i=$(".mobile-nav-toggle"),n=e.closest(".has-subnav"),a=n.parent();e.siblings("a").removeClass(s.inactive),n.removeClass(s.active).siblings().removeClass(s.inactive),t(a),0===e.parents(".mobile-subnav").length&&i.parent().removeClass(s.subnav);
}function a(i,n){i.hasClass(s.collapsed)?(i.parent().removeClass(s.subnav),n.removeClass(s.active),$("."+s.active,n).removeClass(s.active),$("."+s.inactive,n).removeClass(s.inactive),e()):(n.addClass(s.active),t(n)),n.siblings(".mobile-nav-secondary").removeClass(s.active)}var s={active:"is-active",inactive:"is-inactive",collapsed:"is-collapsed",subnav:"is-subnav",menuToggle:"nav-categories-toggle"};return e(),$(".w1").on("click",".mobile-nav-toggle",function(e){var t=$(this),i=$(".nav-categories"),n=$(".site-search");e.preventDefault(),e.stopPropagation(),t.toggleClass(s.collapsed).parent().toggleClass(s.active).siblings().removeClass(s.active).find("button").addClass(s.collapsed),t.hasClass(s.menuToggle)?a(t,i):a(t,n)}).on("click",".back-link > a",function(e){e.preventDefault(),e.stopPropagation(),n($(this).closest(".mobile-subnav"))}).on("click",".has-subnav > a",function(e){e.preventDefault(),e.stopPropagation(),i($(this))}),e}),function(e){e.fn.hoverIntent=function(t,i,n){var a={interval:100,sensitivity:7,timeout:0};a="object"==typeof t?e.extend(a,t):e.isFunction(i)?e.extend(a,{over:t,out:i,selector:n}):e.extend(a,{over:t,out:t,selector:i});var s,o,r,l,c=function(e){s=e.pageX,o=e.pageY},d=function(t,i){return i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(r-s)+Math.abs(l-o)<a.sensitivity?(e(i).off("mousemove.hoverIntent",c),i.hoverIntent_s=1,a.over.apply(i,[t])):(r=s,l=o,i.hoverIntent_t=setTimeout(function(){d(t,i)},a.interval),void 0)},u=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,a.out.apply(t,[e])},h=function(t){var i=jQuery.extend({},t),n=this;n.hoverIntent_t&&(n.hoverIntent_t=clearTimeout(n.hoverIntent_t)),"mouseenter"==t.type?(r=i.pageX,l=i.pageY,e(n).on("mousemove.hoverIntent",c),1!=n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){d(i,n)},a.interval))):(e(n).off("mousemove.hoverIntent",c),1==n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){u(i,n)},a.timeout)))};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},a.selector)}}(window.jQuery),define("lib/jquery.hoverIntent",function(){}),function(e){function t(t){var i=e(this),n=null,a=[],s=null,o=null,r=null,l=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",submenuMaxHeight:e(this).outerHeight(),tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),c=3,d=300,u=function(e){a.push({x:e.pageX,y:e.pageY}),a.length>c&&a.shift()},h=function(){var e=y();e?r=setTimeout(function(){h()},e):(o&&clearTimeout(o),l.exitMenu(this)&&(n&&l.deactivate(n),n=null))},p=function(){o&&clearTimeout(o),r&&clearTimeout(r),l.enter(this),v(this)},f=function(){l.exit(this)},g=function(){m(this)},m=function(e){e!=n&&(n&&l.deactivate(n),l.activate(e),n=e)},v=function(e){var t=y();t?o=setTimeout(function(){v(e)},t):m(e)},y=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!n||!e(n).is(l.submenuSelector))return 0;var o=i.offset(),r={x:o.left,y:o.top-l.tolerance},c={x:o.left+i.find(l.rowSelector).outerWidth(),y:r.y},u={x:o.left,y:o.top+i.outerHeight()+l.tolerance},h={x:c.x,y:o.top+l.submenuMaxHeight+l.tolerance},p=a[a.length-1],f=a[0];if(!p)return 0;if(f||(f=p),f.x<o.left||f.x>h.x||f.y<o.top||f.y>h.y)return 0;if(s&&p.x==s.x&&p.y==s.y)return 0;var g=c,m=h;"left"==l.submenuDirection?(g=u,m=r):"below"==l.submenuDirection?(g=h,m=u):"above"==l.submenuDirection&&(g=r,m=c);var v=t(p,g),y=t(p,m),b=t(f,g),w=t(f,m);return b>v&&y>w?(s=p,d):(s=null,0)};i.mouseleave(h).find(l.rowSelector).mouseenter(p).mouseleave(f).click(g),e(document).mousemove(u)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}(jQuery),define("lib/jquery.menu-aim",function(){}),define("app/megaDropdown",["require","lib/jquery.hoverIntent","lib/jquery.menu-aim","app/jquery.touch"],function(e){e("lib/jquery.hoverIntent"),e("lib/jquery.menu-aim"),e("app/jquery.touch");var t={options:{activeClass:"is-active"},menuAimAttached:[],initialise:function(){var e=this;this.$navPrimary=$(".site-nav-sub"),this.$navSecondary=$(".nav-shop-sub"),this.$navPrimary.each(function(t,i){$(i).attr("data-item",t),e.menuAimAttached.push(!1)}),this.bindHandlers()},bindHandlers:function(){var e=this,t=this.$navPrimary,i=this.$navSecondary;t.hoverIntent({over:$.proxy(this.onMouseOver,this),out:$.proxy(this.onMouseOut,this)}),$("> a",t).touch(function(i){e.toggleItem.call(e,$(i.target).parent(),t)}),$("> a",i).touch(function(t){e.toggleItem.call(e,$(t.target).parent(),i)}),t.on("touchend",function(e){e.stopPropagation()}),$(".w1").on("touchend",function(){t.removeClass(e.options.activeClass),i.removeClass(e.options.activeClass)})},toggleItem:function(e,t){e.hasClass(this.options.activeClass)?window.location=$("> a",e).attr("href"):(t.removeClass(this.options.activeClass),e.addClass(this.options.activeClass))},onMouseOver:function(e){var t,i=this,n=$(e.currentTarget).data("item");$(e.currentTarget).addClass(this.options.activeClass),this.menuAimAttached[n]||(t=$(".nav-shop",e.currentTarget),t.length&&(t.menuAim({activate:function(e){$(e).addClass(i.options.activeClass)},deactivate:function(e){$(e).removeClass(i.options.activeClass)},exitMenu:function(){return!0},tolerance:150}),this.menuAimAttached[n]=!0))},onMouseOut:function(e){$(e.currentTarget).removeClass(this.options.activeClass)}};return t.initialise(),t}),define("app/headerSwitcher",["require","app/breakpoint","config","lang"],function(e){var t,i=e("app/breakpoint"),n=e("config").app,a=e("lang"),s=a.siteHeader;return t={$container:$(".w1"),settings:{selectors:{desktop:".site-header:not(.mobile):not(.error)",mobile:".site-header.mobile",error:".site-header.message.error"},breakpoints:[{mediaQuery:"screen and (max-width: 767px)",settings:{mode:"mobile"}},{mediaQuery:"screen and (min-width: 768px)",isDefault:!0,settings:{mode:"desktop"}}]},cache:{},errorTemplate:'<div class="message error site-header"><div class="msg-holder"><div class="msg-icon"></div><div class="msg-text"><p class="msg-title">'+s.error+"</p></div></div></div>",initialise:function(){var e=this,t=this.settings,n=new i;$.each(t.breakpoints,function(t,i){n.register(i.mediaQuery,{match:$.proxy(e.onMatch,e,i)},i.isDefault)})},onMatch:function(e){var t,i=this,a=this.settings,s=this.viewport=e.settings.mode;t="https:"!==window.location.protocol?n.siteHeader[s]:n.siteHeader[s+"_secure"],this.cache[s]||$(a.selectors[s]).length?this.swap():$.ajax({type:"GET",url:t,dataType:"html",success:function(e){var t=$(e).filter(a.selectors[i.viewport]);i.swap(t)},error:function(){i.swap($(i.errorTemplate),!0)}})},swap:function(e,t){var i,n=this.settings,a=this.cache[this.viewport],s=$(n.selectors[this.viewport]);if(e=e||a||s,e&&e[0]!==s[0]){for(i in n.selectors)$(n.selectors[i]).detach();this.$container.prepend(e)}t&&a||(this.loadScript(),this.cache[this.viewport]=e)},loadScript:function(){switch(this.viewport){case"mobile":e(["app/mobileSiteNav"]);break;case"desktop":e(["app/megaDropdown"])}}},t.initialise(),t}),define("app/helpful-article",["require","config","lang"],function(e){var t=e("config").app,i=e("lang"),n=i.helpfulArticle;$(".kb-articles").on("click.helpfulArticle","#helpful-article",function(){var e=$(this).data("fetch"),i=$('<div id="helpful-response"/>').append('<img src="'+t.imagePath+'ajax-loader-small.gif" alt="'+n.loading+'" />');$(this).after(i).remove(),$.ajaxSetup({cache:!1}),$.getJSON(e,null,function(e){i.html("<p>"+e.message+"</p>")})})}),define("app/nav-toggle",["require","app/toggletarget"],function(e){e("app/toggletarget"),$.toggleTarget({toggle:".nav-toggle",target:"#ui-nav-room-content",tabOpens:!1,tabSkips:!0,focusTarget:!1})}),define("app/addthisToolbox",["require","app/toggletarget"],function(e){var t,i,n,a;e("app/toggletarget"),$.toggleTarget({toggle:".share-this",target:".addthis_toolbox",closeOthers:!0}),window.addthis_share={url:window.location.href},window.addthis_config={pubid:"benpaton",services_exclude:"facebook,twitter,pinterest,email,print"},t=document.createElement("script"),t.src="//s7.addthis.com/js/300/addthis_widget.js#domready=1",document.body.appendChild(t),n=$(".toolbox .share-this"),a=$(".addthis_button_compact").parent("li"),n.on("keydown",function(e){13===e.keyCode&&a.hide()}),i=$(".print-page"),i.on("click",function(){window.print()}),$(".share-this").click(function(){window.addthis&&(window.addthis.update("share","url",window.location.href),window.addthis.url=window.location.href,window.addthis.toolbox(".addthis_toolbox"))})}),define("app/calculators/metric",["require","app/common"],function(e){var t,i=e("app/common");return t=$.ec(i.object,{constructor:function(e){this.config={id:".calculator-imperial-metric",defaultDigits:"00",selectors:{convertNum:"#convert",form:"form",result:".calc-result .result-wrap ul li span",resetBtn:".btn-secondary",submitBtn:".btn-primary",units:"#fromto"},calculations:{"mm-inch":.0394,"cm-inch":.3937,"m-inch":39.37008,"km-mile":.6214,"inch-cm":2.54,"foot-cm":30.48,"yard-m":.9144,"miles-km":1.6093,"sqm-sqyard":1.196,"hectre-acre":2.4711,"sqkm-sqmile":.3861,"sqfoot-sqmetre":.0929,"sqyard-sqmetre":.8361,"acre-sqm":4046.9,"cudecimeter-cufoot":.0353,"cumetre-cuyard":1.308,"litre-gallon":.22,"cuyard-cumetre":.7646,"pint-litre":.5683,"gallon-litre":4.5461,"gram-ounce":.0353,"kg-pound":2.2046,"tonne-ton":.9842,"ounce-g":28.35,"pound-kg":.4536,"stone-kg":6.35,"ton-tonne":1.016}},$.extend(!0,this.config,e||{}),this.$={},this._loadObjects(!0),this.init()}}),t.prototype=$.extend(t.prototype,{_bindEvents:function(){var e=this;this.$.form.on("submit",$.proxy(function(t){t.preventDefault(),e.calculate(this)})),$(this.config.id).find(this.config.selectors.resetBtn).on("click",$.proxy(function(t){t.preventDefault(),e.resetCalc()}))},applyResult:function(e,t){var i=this.$;t?$.each(i.result,function(t){0===t&&$(this).html(e.opt1).parents(".result-wrap").attr("role","alert"),1===t&&$(this).html(e.opt2)}):i.result.html(e).parents(".result-wrap").attr("role","alert"),this.scroll()},calculate:function(){var e,t=this.$,i=parseFloat(t.convertNum.val()),n=t.units.val();!isNaN(i)&&"999999">=i?(e=i*this.config.calculations[n],t.result.html(e.toFixed(2)).parents(".result-wrap").attr("role","alert"),$("html, body").animate({scrollTop:$(this.config.id).offset().top},200)):t.result.html(this.config.defaultDigits)},init:function(){this._bindEvents()},resetCalc:function(){var e=this.config;this.applyResult(e.defaultDigits),this.scroll(),this.$.form[0].reset()},scroll:function(){var e=this;$("html, body").animate({scrollTop:$(e.config.id).offset().top},200)}}),new t}),define("app/calculators/btu",["require","app/common","lang"],function(e){var t=e("app/common"),i=e("lang"),n=i.calculators.message,a=$.ec(t.object,{constructor:function(e){this.config={id:".calculator-radiator",btuLevel:6e3,defaultDigits:"00",meterInFeet:.3048,modifiers:{windows:{doubleGlazedDoorsAndWindowsSub:.1,frenchDoorsAndWindowsAdd:.1}},rooms:{categoryMap:{bathroom:"0",bedroom:"0",kitchenCommon:"0",loungeDining:"0"},btuFactorMap:{Kitchen:3,Lounge:5,DiningRoom:5,Bathroom:4.5,Bedroom:4,Hallway:3}},selectors:{doubleGlazedDoorsAndWindows:"#chk-1",frenchDoorsAndWindows:"#chk-2",form:"form",heatingType:"#heatingtype",numRadiator:"#radiatornumber",result:".calc-result .result-wrap ul li span",resetBtn:".btn-secondary",resultBtn:".calc-result .btn-primary.disabled",roomHeight:"#height",roomLength:"#calculator-length",roomType:"#roomtype",roomWidth:"#width",submitBtn:".btn-primary",roomDimType:"input:radio[name=room-dim-type]",btuResult:".calculator-btu-result",btuResultMsg:".calculator-btu-result-msg"},btuResultMessage:{moreOrEqual:n.moreOrEqual,lessThanAndNotBathroom:n.lessThanAndNotBathroom,lessThanAndBathroom:n.lessThanAndBathroom}},$.extend(!0,this.config,e||{}),this.$={},this._loadObjects(!0),this.init()}});return a.prototype=$.extend(a.prototype,{_bindEvents:function(){var e=this;$(this.config.id).find(this.config.selectors.form).on("submit",$.proxy(function(t){t.preventDefault(),e.calculate()})),$(this.config.id).find(this.config.selectors.resetBtn).on("click",$.proxy(function(t){t.preventDefault(),e.resetCalc()}))},applyResult:function(e,t){this.$;$(this.config.id+" "+this.config.selectors.result).html(e).parents(".result-wrap").attr("role","alert"),t&&this.enableProductsButton(e),$("html, body").animate({scrollTop:$(this.config.id).offset().top},200)},calculate:function(){var e=this.$,t=this.config,i=0,n=e.roomDimType.filter(":checked").val(),a=parseFloat(e.roomHeight.val()),s=parseFloat(e.roomLength.val()),o=parseFloat(e.roomWidth.val()),r=e.roomType.val();return $(t.id).find("form").valid()?void(!isNaN(a)&&!isNaN(s)&&!isNaN(o)&&"99.99">=s&&"99.99">=o&&"99.99">=a&&(i="feet"===n?a*t.meterInFeet*(o*t.meterInFeet)*(s*t.meterInFeet):a*o*s,i=30*i,i*=t.rooms.btuFactorMap[r],i=this.windowsType(i),i=parseInt(Math.round(1e5*i)/1e5),$(t.selectors.btuResult).html(i),i>=t.btuLevel?$(t.selectors.btuResultMsg).html(t.btuResultMessage.moreOrEqual):i<t.btuLevel&&"Bathroom"!==r?$(t.selectors.btuResultMsg).html(t.btuResultMessage.lessThanAndNotBathroom):i<t.btuLevel&&"Bathroom"===r&&$(t.selectors.btuResultMsg).html(t.btuResultMessage.lessThanAndBathroom))):($(t.selectors.btuResult+", "+t.selectors.btuResultMsg).html(""),!1)},init:function(){this._bindEvents()},windowsType:function(e){var t=this.$,i=this.config,n=0,a=0;return t.doubleGlazedDoorsAndWindows.is(":checked")&&(n=e*i.modifiers.windows.doubleGlazedDoorsAndWindowsSub),t.frenchDoorsAndWindows.is(":checked")&&(a=e*i.modifiers.windows.frenchDoorsAndWindowsAdd),e=e-n+a},resetCalc:function(){var e=this.config,t=$('.group_radio li [type="radio"]');this.applyResult(e.defaultDigits),this.$.resultBtn.addClass("disabled").unbind("click").bind("click",function(e){e.preventDefault()}),$(".input-checkbox.checked").removeClass("checked"),$(".form-error").remove(),$(e.selectors.btuResult).length>0&&$(e.selectors.btuResult+", "+e.selectors.btuResultMsg).empty(),t.length>1&&t.first().trigger("click"),this.scroll(),$(this.config.id+" "+this.config.selectors.form)[0].reset()},enableProductsButton:function(e){var t=this.$.resultBtn.data().href,i=this.parseQueryString(t);i.propValueMin=Math.round(.9*e),i.propValueMax=Math.round(1.1*e),this.$.resultBtn[0].href=t.slice(0,t.indexOf("?")+1)+$.param(i),this.$.resultBtn.removeClass("disabled").unbind("click").on("click")},parseQueryString:function(e){for(var t,i={},n=e.slice(e.indexOf("?")+1).split("&"),a=0;a<n.length;a++)t=n[a].split("="),i[t[0]]=t[1];return i},scroll:function(){var e=this;$("html, body").animate({scrollTop:$(e.config.id).offset().top},200)}}),new a}),define("app/ajaxCalls",["require","jquery"],function(e){function t(e){return i.ajax({type:e.method,url:e.url,dataType:e.format,data:e.data,success:e.successCallback,error:e.errorCallback,timeout:e.timeout,async:!0,cache:!1})}var i=e("jquery");return{getData:t}}),define("app/safeLog",["require","config"],function(e){function t(e,t){window.console&&window.console.log&&i.app.debugMode&&i.app.devMode&&window.console.log(e,t)}var i=e("config");return t}),define("app/calculators/coverage",["require","app/common","app/ajaxCalls","lang","app/safeLog"],function(e){var t,i=e("app/common"),n=(e("app/ajaxCalls"),e("lang")),a=(e("app/safeLog"),n.calculators.coverage);return t=$.ec(i.object,{constructor:function(e){this.config={id:".calculator",calculator:{"calculator-ceiling-paint":"","calculator-loft-insulation":"","calculator-paving":"","calculator-tiling":"","calculator-wallpaint":"","calculator-wallpaper":""},defaultDigits:"00",noOfCoats:1,options:{rollSqm:5.2,singleDoor:1.5,doubleDoor:3},selectors:{addRow:".link-add",areaLength:"[name=calculator-length]",areaWidth:"#width",coats:"input[name=radio-grp-1]",form:"form",insulationThickness:"[name=thickness]",resetBtn:".btn-secondary",result:".calc-result .result-wrap ul li span",slabLength:"[name=slab-length]",slabWidth:"[name=slab-width]",submitBtn:".btn-primary",tileSize:"[name=tilesize]",digitsOnlyWithMaxCheck:".js-digits-only",decimalOnlyWithMaxCheck:".js-decimal-only"}},$.extend(!0,this.config,e||{}),this.$={},this._loadObjects(!0),this.init()}}),t.prototype=$.extend(t.prototype,{_bindEvents:function(){var e=this,t=this.config;$.each(t.calculator,function(i){$("."+i+" "+t.selectors.form).on("submit",$.proxy(function(t){var i=$(this).parents(e.config.id).attr("class").replace(e.config.id.replace(".",""),"").replace(" grid","").replace(" ","");t.preventDefault(),e.calculate(i)})),$("."+i+" "+t.selectors.resetBtn).on("click",$.proxy(function(t){var i=$(this).parents(e.config.id).attr("class").replace(e.config.id.replace(".",""),"").replace(" grid","").replace(" ","");t.preventDefault(),e.resetCalc(i)}))}),this.$.addRow.on("click",$.proxy(function(t){t.preventDefault(),e.duplicateRow($(this))})),this.$.coats.on("change",$.proxy(function(){t.noOfCoats=$(this).val()})),$(document).on("keypress",this.config.selectors.digitsOnlyWithMaxCheck,function(e){8!==e.which&&isNaN(String.fromCharCode(e.which))&&e.preventDefault(),$(e.target).val().length+1>$(e.target).attr("maxlength")&&e.preventDefault()}),$(document).on("keypress",this.config.selectors.decimalOnlyWithMaxCheck,function(e){8!==e.which&&46!==e.which&&isNaN(String.fromCharCode(e.which))&&e.preventDefault(),$(e.target).val().length+1>$(e.target).attr("maxlength")&&e.preventDefault()})},applyResult:function(e,t,i){i?$.each($("."+t+" "+this.config.selectors.result),function(t){0===t&&$(this).html(e.opt1).parents(".result-wrap").attr("role","alert"),1===t&&$(this).html(e.opt2)}):$("."+t+" "+this.config.selectors.result).html(e).parents(".result-wrap").attr("role","alert"),this.scroll(t)},calculate:function(e){if(""!==e)switch(e){case"calculator-ceiling-paint":this.calcCeilingPaint(e);break;case"calculator-loft-insulation":this.calcInsulation(e);break;case"calculator-paving":case"calculator-tiling":this.calcPaving(e);break;case"calculator-wallpaint":case"calculator-wallpaper":this.calcWall(e)}},calcCeilingPaint:function(e){var t,i=this.config,n=parseFloat($("."+e).find(this.config.selectors.areaLength).val()),a=parseFloat($("."+e).find(this.config.selectors.areaWidth).val()),s=i.noOfCoats;!isNaN(n)&&!isNaN(a)&&"99.99">=n&&"99.99">=a?(t=n*a*s/10,t=+t.toFixed(2),this.applyResult(t,e)):this.applyResult(i.defaultDigits,e)},calcInsulation:function(e){var t,i,n,s,o=this.config,r=parseFloat($("."+e+" "+o.selectors.areaLength).val()),l=parseFloat($("."+e+" "+o.selectors.areaWidth).val()),c=$("."+e+" "+o.selectors.insulationThickness).val(),d=a.product1,u=a.product2,h=a.product3;t=r*l,i=+t.toFixed(2),t=Math.ceil(t),"0-70"===c&&(16===t?(n="2",s="2 x "+u+" & "):t>=17&&23>t?(n="3",s="5 x "+u+" & "):t>=23&&29>t?(n="4",s="6 x "+u+" & "):t>=29&&41>t?(n="5",s="8 x "+u+" & "):t>=41&&47>t?(n="6",s="9 x "+u+" & "):t>=47&&58>t?(n="7",s="11 x "+u+" & "):t>=58&&65>t?(n="8",s="12 x "+u+" & "):t>=65&&73>t?(n="9",s="14 x "+u+" & "):n="",""!==n&&(n=s+""+n+" x "+d)),("70-110"===c||"120-150"===c)&&(n=16===t?"2":t>=17&&23>t?"5":t>=23&&29>t?"6":t>=29&&41>t?"8":t>=41&&47>t?"9":t>=47&&58>t?"11":t>=58&&65>t?"12":t>=65&&73>t?"14":"",""!==n&&(n=n+" x "+u)),"boarded"===c&&(n=16===t?"42":t>=17&&23>t?"59":t>=23&&29>t?"75":t>=29&&41>t?"106":t>=41&&47>t?"120":t>=47&&58>t?"149":t>=58&&65>t?"167":t>=65&&73>t?"188":"",""!==n&&(n=n+" x "+h)),!isNaN(r)&&!isNaN(l)&&"99.99">=r&&"99.99">=l?(n={opt1:i,opt2:n},this.applyResult(n,e,!0)):this.applyResult({opt1:o.defaultDigits,opt2:" "},e,!0)},calcPaving:function(e){var t,i,n=this.config,a=parseFloat($("."+e+" "+n.selectors.areaLength).val()),s=parseFloat($("."+e+" "+n.selectors.areaWidth).val()),o=parseInt($("."+e+" "+n.selectors.slabLength).val()),r=parseInt($("."+e+" "+n.selectors.slabWidth).val()),l={};!isNaN(a)&&!isNaN(s)&&!isNaN(o)&&!isNaN(r)&&"99.99">=a&&"99.99">=s&&"9999">=o&&"9999">=r?(t=a*s,i=Math.ceil(a*s*Math.ceil(1e6/Math.ceil(o*r)))+Math.ceil(Math.ceil(a*s*Math.ceil(1e6/Math.ceil(o*r)))/100*10),t=+t.toFixed(2),l={opt1:t,opt2:i},this.applyResult(l,e,!0)):this.applyResult({opt1:n.defaultDigits,opt2:n.defaultDigits},e,!0)},calcWall:function(e){var t,i,n,a,s,o,r,l,c,d=this.config,u=!1,h=$("."+e+' input[data-area="wall-height"]'),p=$("."+e+' input[data-area="wall-width"]'),f=h.length,g=0,m=0;for(i=0;f>i;i++)(p[i].value>99.99||h[i].value>99.99)&&(u=!0),g+=p[i].value*h[i].value;for(n=$("."+e+' input[data-area="window-height"]'),a=$("."+e+' input[data-area="window-width"]'),f=n.length,i=0;f>i;i++)(a[i].value>99.99||n[i].value>99.99)&&(u=!0),m+=a[i].value*n[i].value;u?this.applyResult({opt1:d.defaultDigits,opt2:d.defaultDigits},e,!0):(o=$("."+e+" [name=door-number]").val(),r=$("."+e+" [name=double-door-number]").val(),l=o*d.options.singleDoor+r*d.options.doubleDoor,c=Math.round(100*(g-(l+m)))/100,$(".calculator-wallpaint").length>0&&(d.noOfCoats>1&&(c*=d.noOfCoats),c/=10,t={opt1:+c.toFixed(2)},this.applyResult(t,e,!0)),$(".calculator-wallpaper").length>0&&(s=Math.ceil(c/d.options.rollSqm),t={opt1:c,opt2:s},this.applyResult(t,e,!0)))},duplicateRow:function(e){var t=this,i=e.closest("fieldset").find(".dimensions:last"),n=i.clone(),s=n.find("input").length,o=i.find(".remove").length,r=$('<div class="field remove"><a href="#" class="remove"><i class="icon-bin"></i><span class="accessibility">'+a.removeDuplicate+"</span></a></div>");n.attr("data-userAdded","true"),n.find("input").each(function(e){var t,i=$(this).attr("id"),n=parseInt(i.split("-").pop());n++,i=i.substring(0,i.length-1)+n,$(this).attr("name",i).attr("id",i).val(""),t=$(this).parent(".field").find("label"),t.attr("for",i),e===s-1&&0===o&&r.insertAfter($(this).closest(".field"))}),n.insertAfter(i),$(".calculator a.remove").on("click",$.proxy(function(e){e.preventDefault(),t.removeRow($(this))}))},getJSONItems:function(e){return $.ajax({type:"GET",url:"_json/"+e,dataType:"json",async:!0,cache:!1})},identifyCalc:function(){var e=this.$,t=this.config,i="";e.form.parents(".calculator").each(function(){i=$.grep(this.className.split(" "),function(e){return 0===e.indexOf("calculator-")}).join()}),t.calculator[i]=!0},init:function(){this.identifyCalc(),this._bindEvents()},removeRow:function(e){var t=e.closest("div.dimensions");t.remove()},resetCalc:function(e){var t=this.config,i=$('.group_radio li [type="radio"]');$("[data-useradded]").remove(),"calculator-loft-insulation"===e?this.applyResult({opt1:t.defaultDigits,opt2:""},e,!0):this.applyResult({opt1:t.defaultDigits,opt2:t.defaultDigits},e,!0),this.scroll(e),this.$.form[0].reset(),$("."+e).find(this.$.form)[0].reset(),i.length>1&&i.first().trigger("click")},scroll:function(e){$("html, body").animate({scrollTop:$("."+e).offset().top},200)}}),diy.instances.calc=new t,diy.instances.calc}),define("app/pagination",["require","app/common","app/ajaxLoader","lang"],function(e){function t(e){return $.ajax({url:e,type:"GET",dataType:"html"})}var i,n,a=e("app/common"),s=e("app/ajaxLoader"),o=e("lang"),r=o.pagination;return window.diy=window.diy||{},diy.instances=diy.instances||{},i=$.ec(a.object,{constructor:function(e){this.config={id:".pagination",requestTimeout:0,renderItems:[".wrapper-main"],gridViewClass:"product-grid-view",listViewClass:"product-list-view",disabledLinkClass:"disabled-link",grid:"#product-listing",selectors:{pageLinks:"ul.paginator li a",exclusions:".active",gridViewToggle:".grid-view input",listViewToggle:".list-view input"},History:{},disableHistory:!1,bindViewToggle:!1},this.$={},$.extend(!0,this.config,e||{}),this._loadObjects(!0),this._init(),this._bindEvents()}}),n=i.prototype,n._init=function(){this.config.disableHistory||(this.config.History=window.History)},n.reinit=function(){this.config.disableHistory||(this.config.History=window.History)},n.updateState=function(e){this.config.disableHistory||!this.config.History.enabled?this.dispatchRequest(e):this.config.History.pushState(null,document.title,e)},n.dispatchRequest=function(e){var i=this.dispatchRequest.timeout||null,n=this.config.renderItems,a=this;return this.config.requestTimeout?(i&&clearTimeout(this.dispatchRequest.timeout),void(this.dispatchRequest.timeout=setTimeout(function(){t(e,n).done(function(e){a.renderResults(e)})},this.config.requestTimeout))):t(e,n).done(function(e){a.renderResults(e)})},n._bindEvents=function(){var e=this,t=this.config.selectors;$(document).on("click.pagination",t.pageLinks+':not("'+t.exclusions+'")',function(t){var i=$(this);t.preventDefault(),i.hasClass(e.config.disabledLinkClass)||(s("#content",r.loading),e.updateState(i.prop("href")))}).on("click.pagination",t.pageLinks+t.exclusions,function(){return!1}),this.config.bindViewToggle&&$(document).on("click.pagination",t.gridViewToggle,function(t){var i=$(e.config.grid);i.removeClass(e.config.listViewClass).addClass(e.config.gridViewClass),e.$.listViewToggle.removeClass("is-active"),e.$.gridViewToggle.addClass("is-active"),t.preventDefault()}).on("click.pagination",t.listViewToggle,function(t){var i=$(e.config.grid);i.removeClass(e.config.gridViewClass).addClass(e.config.listViewClass),e.$.gridViewToggle.removeClass("is-active"),e.$.listViewToggle.addClass("is-active"),t.preventDefault()})},diy.instances.pagination=new i}),define("app/hotspot",["require","app/toggletarget"],function(e){e("app/toggletarget"),$.toggleTarget({toggle:".hotspot-btn",target:".hotspot-callout",context:".hotspot",activeClass:"is-active",useAria:!0,closeOthers:!0,tabCloses:!0})}),define("app/range-explorer",["require","app/slider","app/breakpoint","lang"],function(e){var t,i=e("app/slider"),n=e("app/breakpoint"),a=e("lang"),s=a.rangeExplorer;e(["app/hotspot"]),t=function(){var e,t=6;this.settings={gallery:"#ui-range-gallery",breakpoint:"screen and (min-width: 60em)",breakpointSmall:"screen and (max-width: 60em)"},e=$(this.settings.gallery).parents("#content").hasClass("left-side-bar")?!0:!1,e&&(t=4),this.settings.navigation={id:".rangeexplorer-nav",counter:!0,loop:!0,controlButtons:{text:{prev:s.controlButtonsText.prev,next:s.controlButtonsText.next}},selectors:{slider:".rangeexplorer-nav-wrap",elem:"li a"},breakpoints:[{mediaQuery:this.settings.breakpoint,isDefault:!0,settings:{pageSize:t}},{mediaQuery:this.settings.breakpointSmall,settings:{pageSize:1}}]},this.settings.productList={id:".carousel-vertical-product",alignment:"vertical",useCSS:!1,controlButtons:{text:{prev:s.imagesControlButtonsText.prev,next:s.imagesControlButtonsText.next}},selectors:{sliderWindow:".vertical-carousel",elem:null},breakpoints:[{mediaQuery:this.settings.breakpoint,isDefault:!0}]},this.xhr=null,this.navigation=null,this.productList=null,this.currentIndex=0,this.$gallery=$(this.settings.gallery),this.init()},t.prototype={init:function(){this.navigation=new i(this.settings.navigation),this.productList=new i(this.settings.productList),this.navigation.$.elems.eq(0).addClass(this.navigation.config.activeClass),this.bindHandlers()},bindHandlers:function(){var e=this,t=new n;this.navigation.$.elem.on("click.rangeexplorer keydown.rangeexplorer",$.proxy(this.onNavigation,this)),t.register(this.settings.breakpoint,{match:function(){e.$gallery.swipe("destroy"),e.navigation.$.elems.off(".rangeexplorer")},unmatch:function(){e.$gallery.swipe({allowPageScroll:"vertical",swipe:$.proxy(e.onSwipe,e),threshold:75}),e.navigation.$.elems.off(".rangeexplorer").on("click.rangeexplorer",$.proxy(e.activateSlide,e))}},!0)},activateSlide:function(e,t){var i,n=this.navigation.config.activeClass;i=e?$(e.currentTarget):this.navigation.$.elems.eq(t),$("a",i).eq(0).triggerHandler("click.rangeexplorer"),this.navigation.$.elems.removeClass(n),i.addClass(n)},load:function(e){var t=this;this.xhr&&this.xhr.abort(),this.xhr=$.get(e,function(e){t.$gallery.html(e),t.productList=new i(t.settings.productList)})},onNavigation:function(e){var t=this.navigation.$.elems.has(e.currentTarget),i=$(e.currentTarget).attr("href"),n=this.navigation.$.elems.index(t);(!e.keyCode||/(13|32)/.test(e.keyCode))&&(e.preventDefault(),this.load(i),this.currentIndex=n)},onSwipe:function(e,t){var i,n=this.currentIndex;if("left"===t){if(!(n<this.navigation.$.elems.length-1))return;n++}if("right"===t){if(0===n)return;n--}this.activateSlide(null,n),this.settings.navigation.counter&&(i=$(".carousel-slide-number"),i.text(n+1))}},new t}),define("app/wishlist",["require","app/notifier","lang","app/toggletarget","app/common"],function(e){var t,i=e("app/notifier"),n=e("lang"),a=n.wishlist;return e("app/toggletarget"),e("app/common"),t=function(e){this.settings=$.extend(!0,{newOrExistingRadioBtn:".wishlist-radio",newAndExistingNameFields:".wishlist-input",addToListBtn:"#wishlist-primary",cancelLink:"#wishlist-close",toggle:"#wishlist-action-open",target:"#wishlist-collapsed",newWishListName:"#wishlist-new-name",existingWishListNames:"#wishlist-existing-select",form:"#wishlist-form",activeClass:"display",screenReaderTextElementId:"wishlist-note",screenReaderClosedText:a.closedText,screenReaderOpenText:a.openedText},e),this.init(),this.bindEvents()},$.extend(t.prototype,{init:function(){var e=this.settings;$.toggleTarget({toggle:e.toggle,target:e.target,activeClass:e.activeClass}),this.notifier=new i({target:e.toggle,prepend:!1,scrollTo:!1}),$(e.target).removeClass(e.activeClass),$(e.newOrExistingRadioBtn).add(e.newAndExistingNameFields).add(e.addToListBtn).add(e.cancelLink).attr("tabindex",-1),$(e.newAndExistingNameFields+","+e.addToListBtn).prop("disabled",!0),$(e.toggle).append('<span id="{0}" class="accessibility">{1}</span>'.format(e.screenReaderTextElementId,e.screenReaderClosedText))},bindEvents:function(){var e=this.settings;$(e.newOrExistingRadioBtn).on("change.wishlist",$.proxy(this.wishListTypeSelectionHandler,this)),$(e.existingWishListNames).on("change.wishlist",$.proxy(this.setSubmitButtonState,this)),$(e.newWishListName).on("keyup.wishlist",$.proxy(this.setSubmitButtonState,this)),$(e.form).on("submit.wishlist",$.proxy(this.addToWishList,this)),$(e.toggle).on("active.toggletarget inactive.toggletarget",$.proxy(this.toggleTargetHandler,this)),$(e.cancelLink).on("click.wishlist",function(t){t.preventDefault(),$(e.toggle).click()})},getTabableElements:function(){var e=this.settings;return $(e.newOrExistingRadioBtn).add(e.newAndExistingNameFields).add(e.addToListBtn).add(e.cancelLink)},toggleTargetHandler:function(e){var t=this.settings,i=$("#"+t.screenReaderTextElementId);"active"===e.type?(i.html(t.screenReaderOpenText),this.getTabableElements().attr("tabindex",0),this.notifier.close()):"inactive"===e.type&&(i.html(t.screenReaderClosedText),this.getTabableElements().attr("tabindex",-1))},wishListTypeSelectionHandler:function(e){this.setInputState(e),this.setSubmitButtonState(e)},setInputState:function(){var e=this.settings,t=$(e.newOrExistingRadioBtn).filter(":checked").val();$(e.newAndExistingNameFields).prop("disabled",!0),"newList"===t?$(e.newWishListName).prop("disabled",!1):"existingList"===t&&$(e.existingWishListNames).prop("disabled",!1)},setSubmitButtonState:function(){var e=this.settings,t=$(e.newOrExistingRadioBtn).filter(":checked").val(),i=!0;"newList"===t?i=!($(e.newWishListName).val().length>0):"existingList"===t&&(i=0===$(e.existingWishListNames)[0].selectedIndex),$(e.addToListBtn).prop("disabled",i)},resetForm:function(){var e,t=this.settings;$(t.addToListBtn).prop("disabled",!0),$(t.newWishListName).val(""),$(t.existingWishListNames).val(0),e=$(t.newOrExistingRadioBtn),e.filter(":checked").prop("checked",!1),e.parent(".input-radio").removeClass("checked"),$(t.toggle).trigger("click")},addToWishList:function(e){var t=this.settings,i=$(t.addToListBtn),n=$(t.form),a=n.serialize();return e.preventDefault(),i.prop("disabled",!0),""!==a&&(a+="&"),a+=i.attr("name")+"="+i.val(),$.ajax({type:n.attr("method"),url:n.attr("action"),dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},data:a}).done(function(e){0===parseInt(e.status)&&this.resetForm(),this.notifier.notify(e)}.bind(this))}}),new t}),define("app/accessToLocalNav",["require","lang"],function(e){var t=e("lang"),i=t.accessToLocalNav,n="local-navingation",a=i.linkText;1!==$(".sideBar").length||$(".site-header.checkout").length||($(".sideBar").attr("id",n),$(".skip-nav:first li:last").before('<li><a href="#'+n+'">'+a+"</a></li>"));
}),define("app/tooltip",["require","app/common","lang","lib/jquery.hoverIntent"],function(e){var t,i=e("app/common"),n=e("lang"),a=n.toolTip;return e("lib/jquery.hoverIntent"),t=$.ec(i.object,{constructor:function(e){this.config={clickOnly:!1,modal:!1,adjustHeight:!0,positions:{left:{tooltipClass:"tooltip-left"},right:{tooltipClass:"tooltip-right"},topLeft:{tooltipClass:"tooltip-top-left"},topRight:{tooltipClass:"tooltip-top-right"},bottomLeft:{tooltipClass:"tooltip-bottom-left"},bottomRight:{tooltipClass:"tooltip-bottom-right"}},selectors:{elems:".tooltip",close:".ico-tooltip-close"},tooltipHTML:'<div class="tooltip-text tooltip-top-left">                                  <i class="ico-tooltip"></i>                                  <i class="ico-tooltip-close accessibility"></i>                                  <p>'+a.toolTipMsg+".</p></div>"},$.extend(!0,this.config,e||{}),this.$={},this.$activetip=null,this._loadObjects(!1),this._init(),this._bindEvents()}}),$.extend(t.prototype,{_init:function(){var e,t=this;this.$.elems&&this.$.elems.each(function(){return(e=$(".tooltip-text",this))?void t.storeOriginalPosition(e):!1})},_bindEvents:function(){var e=this.config.selectors;$(document).hoverIntent({over:$.proxy(this.handleMouseEnterTarget,this),out:$.proxy(this.handleMouseLeaveTarget,this),selector:e.elems}).on("focusin.tooltip",e.elems,$.proxy(this.handleMouseEnterTarget,this)).on("focusout.tooltip",e.elems,$.proxy(this.handleMouseLeaveTarget,this)).on("click.tooltip",e.elems,$.proxy(this.handleClickTarget,this)).on("click.tooltip",e.close,$.proxy(this.handleClickClose,this))},handleMouseEnterTarget:function(e){var t=$(e.target).closest(".tooltip"),i=$(".tooltip-text",t);!this.$activetip&&i&&(i.data("tooltip")||this.storeOriginalPosition(i),this.config.clickOnly||i.hasClass("is-visible")||this.positionTooltip(i))},handleMouseLeaveTarget:function(e){var t=$(e.target).closest(".tooltip"),i=$(".tooltip-text",t);this.$activetip||i.length>0&&!this.config.clickOnly&&this.resetTooltip(i)},handleClickTarget:function(e){var t,i;this.config.selectors.elems&&(t=$(e.target).closest(".tooltip"),i=$(".tooltip-text",t),i.data("tooltip")||this.storeOriginalPosition(i),this.resetTooltip(),this.openTooltip(t),this.$activetip=$(".tooltip-text",t))},handleClickClose:function(e){var t=$(e.target),i=t.closest(".tooltip-text");t.addClass("accessibility"),this.resetTooltip(i),e.stopPropagation()},createTooltip:function(e){var t=$(this.config.tooltipHTML);return this.storeOriginalPosition(t),e.append(t),this.openTooltip(e),t},openTooltip:function(e){var t=$(".tooltip-text",e),i=$(document).height();this.config.modal&&($("body").append('<div id="overlay"></div>'),$("#overlay").height(i).css({opacity:.4,position:"absolute",top:0,left:0,"background-color":"black",width:"100%","z-index":100})),t.hasClass("is-visible")||this.positionTooltip(t),this.$activetip=e,$(this.config.selectors.close,e).removeClass("accessibility")},swapPositions:function(e,t,i){e.removeClass(this.config.positions[t].tooltipClass),e.addClass(this.config.positions[i].tooltipClass),e.data("tooltip").newPos=i},resetTooltip:function(e){var t=e.data("tooltip");e=e||this.$activetip,e&&(e.hasClass("is-visible")&&(e.removeClass("is-visible"),t.newPos&&(e.removeClass(this.config.positions[t.newPos].tooltipClass),e.addClass(this.config.positions[t.origPos].tooltipClass),delete t.newPos),this.revertTooltipHeight(e),this.config.modal&&$("#overlay").remove(),e.trigger("tooltipClosed")),this.$activetip=null)},storeOriginalPosition:function(e){var t;for(t in this.config.positions)if(this.config.positions.hasOwnProperty(t)&&e.hasClass(this.config.positions[t].tooltipClass)){e.data("tooltip",{origPos:t});break}},expandTooltip:function(e){if(this.config.adjustHeight){var t=e[0].scrollHeight,i=e.height(),n=t-i,a=e.position().top;n>0&&(e.height(t),e[0].style.top=a-n+"px")}},revertTooltipHeight:function(e){e[0].style.height=null,e[0].style.top=null},isVisible:function(e){var t=$(window),i=t.width(),n=t.height(),a=t.scrollTop(),s=e.outerWidth(!1),o=e.outerHeight(!1),r=e.offset(),l=r.top,c=r.left,d=function(){return{fits:c>0,hiddenAmount:c>0?0:c}}(),u=function(){var e=c+s-i;return{fits:0>e,hiddenAmount:0>e?0:e}}(),h=function(){var e=a-l;return{fits:0>e,hiddenAmount:0>e?0:e}}(),p=function(){var e=l+o-a-n;return{fits:0>e,hiddenAmount:0>e?0:e}}();return{fits:d.fits&&u.fits&&h.fits&&p.fits,hiddenAmount:d.hiddenAmount+u.hiddenAmount+h.hiddenAmount+p.hiddenAmount}},positionTooltip:function(e){var t,i,n=e.data("tooltip").origPos,a=null,s=0;e.addClass("is-visible"),("topLeft"===n||"topRight"===n)&&this.expandTooltip(e),t=this.isVisible(e),t.fits||(i=n,a=null,s=0,this.revertTooltipHeight(e),$.each(this.config.positions,function(n){return this.swapPositions(e,i,n),("topLeft"===n||"topRight"===n)&&this.expandTooltip(e),i=n,t=this.isVisible(e),t.fits?!1:(this.revertTooltipHeight(e),void((t.hiddenAmount<s||0===s)&&(s=t.hiddenAmount,a=i)))}.bind(this)),t.fits||(this.swapPositions(e,i,a),("topLeft"===a||"topRight"===a)&&this.expandTooltip(e)))}}),$(".compare-now.tooltip").length>0?new t({clickOnly:!0,modal:!0,adjustHeight:!1,selectors:{elems:null}}):new t}),function(e){var t={goToSection:function(e){$("html, body").animate({scrollTop:$(e).offset().top},0)}};$(e).on("click",".pagination-btm a:not(.disabled-link)",function(){$("#ui-jump-hook").is(":visible")?t.goToSection("#ui-jump-hook"):t.goToSection(".sideBar:first")})}(this.document),define("app/jumphook",function(){}),define("app/lonlat",["require","lang"],function(e){function t(){function t(e){var t=e.coords.latitude,i=e.coords.longitude;a=l.success.feedback,o.html(a),setTimeout(function(){a=l.myLocation.feedback,o.html(a),$(".ico-loader").removeClass("ico-loader").addClass("icon-gps")},2e3),$("#frm-latitude").val(t),$("#frm-longitude").val(i),$("#store-locator-search-btn").length?($("#find_store_direction").val(l.myLocationtext),$("#store-locator-search-btn").click()):($("#search_store_location").val(l.myLocationtext),$("#searchLocationMain").submit())}function i(e){a=e.error.feedback,o.html(a),$(".ico-loader").removeClass("ico-loader").addClass("icon-gps")}function n(){a=l.search.feedback,$(".icon-gps").removeClass("icon-gps").addClass("ico-loader"),o.html(a),navigator.geolocation?navigator.geolocation.getCurrentPosition(t,i):i(l.error.notSupported)}var a,s="#js-current-location",o=$(s),r=e("lang"),l=r.lonlat;$(document).on("click",s,function(){return n(),!1}).on("keydown",s,function(e){return 13===e.which?(n(),!1):void 0})}$(document).ready(t)}),define("app/promoGrids",["require","app/jquery.equalheights"],function(e){var t=$(".link-list-thumbnailed.grid");e("app/jquery.equalheights"),t.each(function(){var e=$(this).find(".grid-item");e.find(".btn").length>0&&$(this).addClass("has-btn"),e.equalHeights({resize:!0,rows:!0})})}),define("app/google-maps",["require","config","lang"],function(e){var t,i=e("config").app,n=e("lang"),a=n.googleMaps;return t=function(e){this.APILoaded=!1,this.markers=[],this.directionsService=null,this.directionsDisplay=null,this.directionsString=null,this.storeData,this.map=null,this.storeMapOption=null,this.settings=$.extend({hasMap:!0,googleUser:diy.isProduction?diy.googleUser.prod:diy.googleUser.dev,googleKey:diy.isProduction?"client":"key",canvasIDName:"map_canvas",googleMapScriptID:"googleMapsScript",multipleLocations:!0,markerPopUps:!0,labelMarkers:!0,markersLimit:5,mapMarkerImg:i.imagePath+"sprite.png",myLocationText:a.myLocation,errorClass:"is-error",mapOptions:{defaultLatLngNameSelector:"[data-lat]:first",defaultLat:$("[data-lat]:first").data("lat"),defaultLng:$("[data-lat]:first").data("lng"),defaultName:$("[data-end-name]:first").data("endName"),zoom:8,mapTypeId:"ROADMAP"},selectors:{mapDataPoints:"#stores-list > li",getDirectionsSubmit:"#store-locator-search-btn",getDirectionsTextInput:"#find_store_direction",mapDiv:".store-locator-fields",hiddenLatInput:"#frm-latitude",hiddenLngInput:"#frm-longitude",travelModeOuter:"#travel-modes",travelModesElements:"input",listingMarkerClass:".store-listing-marker"}},e),this.settings.hasMap?this.init():this.bindHandlers()},t.prototype={init:function(){this.settings.multipleLocations===!1&&this.gatherStoreData(),this.bindHandlers(),this.loadAPI()},gatherStoreData:function(){this.storeData={lat:$(this.settings.mapOptions.defaultLatLngNameSelector).data("lat"),lng:$(this.settings.mapOptions.defaultLatLngNameSelector).data("lng"),endName:$(this.settings.mapOptions.defaultLatLngNameSelector).data("endName")}},googleCallBack:function(){$(document).trigger("apiLoaded")},bindHandlers:function(){var e=this;$(document).on("apiLoaded",function(){e.generateMap()}),this.settings.multipleLocations===!1&&($(this.settings.selectors.getDirectionsSubmit).on("click",function(){var t=$(e.settings.selectors.getDirectionsTextInput).val();return""!==t?($(e.settings.selectors.getDirectionsTextInput).removeClass(e.settings.errorClass),(""===$.trim(t)||$.trim(t)===e.settings.myLocationText)&&(t={lat:$(e.settings.selectors.hiddenLatInput).val(),lng:$(e.settings.selectors.hiddenLngInput).val()}),e.getDirections(t,e.map)):$(e.settings.selectors.getDirectionsTextInput).addClass(e.settings.errorClass),!1}),$(this.settings.selectors.travelModeOuter+" "+this.settings.selectors.travelModesElements).on("click.travelMode",function(){$(e.settings.selectors.travelModeOuter+" .selected").removeClass("selected"),$(this).addClass("selected"),""!==$(e.settings.selectors.getDirectionsTextInput).val()?($(e.settings.selectors.getDirectionsTextInput).removeClass(e.settings.errorClass),$(e.settings.selectors.getDirectionsSubmit).click()):$(e.settings.selectors.getDirectionsTextInput).addClass(e.settings.errorClass)}),$(this.settings.selectors.mapDiv+" [type=text]").on("keypress.storeLocator",function(t){return t.preventDefault(),13===t.keyCode?(""!==$(this).val()?($(this).removeClass(e.settings.errorClass),$(e.settings.selectors.getDirectionsSubmit).focus().click()):$(this).addClass(e.settings.errorClass),!1):void 0}))},loadAPI:function(){var e;window.diy=window.diy||{},diy.page=diy.page||{},window.diy.page.googleMaps={generateMap:this.googleCallBack,settings:this.settings},this.APILoaded!==!1||$("#"+this.settings.googleMapScriptID).length?this.generateMap():(e=document.createElement("script"),e.type="text/javascript",e.src="//maps.googleapis.com/maps/api/js?"+this.settings.googleKey+"="+this.settings.googleUser+"&sensor=false&language=en-GB&callback=diy.page.googleMaps.generateMap",e.id=this.settings.googleMapScriptID,document.body.appendChild(e),this.APILoaded=!0)},generateMap:function(){var e=this,t=e.settings.mapOptions.zoom,i={center:new google.maps.LatLng($(this.settings.mapOptions.defaultLatLngNameSelector).data("lat"),$(this.settings.mapOptions.defaultLatLngNameSelector).data("lng")),zoom:t,mapTypeId:google.maps.MapTypeId[this.settings.mapOptions.zoom]};this.markers=[],this.storeMapOption=i,this.map=new google.maps.Map(document.getElementById(this.settings.canvasIDName),i),this.addMarkers()},addMarkers:function(){var e,t,n=this,s=!1;if(n.settings.multipleLocations)var o=function(e,t){t.open(n.map,e),s!==!1&&s.close(),s=t};var r=1;if($(n.settings.selectors.mapDataPoints).each(function(t,s){if(r<=n.settings.markersLimit){r++;var l=$(s);e=new google.maps.LatLng(l.data("lat"),l.data("lng"));var c={url:i.imagePath+"sprite.png",size:new google.maps.Size(29,35),origin:new google.maps.Point(50+50*t,350),anchor:new google.maps.Point(17,34)},d=new google.maps.Marker({position:e,title:l.find("h3").text(),map:n.map,icon:c}),u="";if(n.settings.markerPopUps===!0){var h=l.find("[data-info-prop='candc']").text();h&&(h="<p>"+h+"</p>"),u+="<div class='map-info'><div class='map-info-header'><h3>"+l.find("[data-info-prop='title']").text()+"</h3>"+h+"</div>"+l.find("[data-info-prop='address']").html()+"<p><a class='btn btn-secondary' href='"+l.find("[data-info-prop='link'] > a").attr("href")+">"+a.fullDetails+"</a></p></div>";var p="<div class='infowindow-content'>"+u+"</div>",f=new google.maps.InfoWindow({content:p});google.maps.event.addListener(d,"click",function(){return o(d,f),!1}),l.find(n.settings.selectors.listingMarkerClass).on("click.marker",function(){return o(d,f),!1})}n.markers.push(e)}}),n.settings.multipleLocations){t=new google.maps.LatLngBounds;for(var l=0;l<n.markers.length;l++)t.extend(n.markers[l]);n.map.fitBounds(t)}else n.map.setCenter(e)},getDirections:function(e){var t,i=this;this.map=new google.maps.Map(document.getElementById(this.settings.canvasIDName),this.storeMapOption),null===this.directionsDisplay&&(this.directionsDisplay=new google.maps.DirectionsRenderer,this.directionsDisplay.setMap(null),this.directionsDisplay.setOptions({suppressMarkers:!0})),null===this.directionsService&&(this.directionsService=new google.maps.DirectionsService),"object"==typeof e&&(e=new google.maps.LatLng(e.lat,e.lng)),t={origin:e,destination:new google.maps.LatLng(this.storeData.lat,this.storeData.lng),travelMode:$(i.settings.selectors.travelModeOuter+" .selected").val(),unitSystem:google.maps.UnitSystem.IMPERIAL},i.directionsService.route(t,function(t,n){var s,o,r,l="";$(".wrapper-store-direction").empty(),i.directionsDisplay.setMap(i.map),i.clearMarkers(),n===google.maps.DirectionsStatus.OK?(i.directionsDisplay.setMap(i.map),i.directionsDisplay.setDirections(t),i.renderDirections(e,t),$(".wrapper-cta-print-map").show(),s=$(".cta-view-directions"),r=t.routes[0].legs[0],o=s.data("urlTemplate"),o=o.replace("{START_LATLNG}",r.start_location.lat()+","+r.start_location.lng()).replace("{DEST_LATLNG}",r.end_location.lat()+","+r.end_location.lng()),Modernizr.appleios?s.attr("href",o):s.attr("href",o.replace("maps.apple","maps.google")),s.show()):($(".cta-view-directions").hide(),l=n===google.maps.DirectionsStatus.NOT_FOUND?a.error1:n===google.maps.DirectionsStatus.ZERO_RESULTS?a.error2:a.error3,$(".wrapper-store-direction").append('<div class="message error"><div class="msg-holder"><div class="msg-icon"></div><div class="msg-text">'+l+"</div></div></div>"))})},clearMarkers:function(){this.setAllMap(null),this.markers=[]},setAllMap:function(e){var t,i=this;if(1===this.markers.length)this.markers=[];else for(t=0;t<this.markers.length;t++)i.markers[t].setMap(e)},addMarker:function(e,t,i){var n={url:this.settings.mapMarkerImg,size:new google.maps.Size(29,35),origin:new google.maps.Point(50*i,350),anchor:new google.maps.Point(17,34)},a=new google.maps.Marker({position:t,title:e,map:this.map,icon:n});this.markers.push(a)},renderDirections:function(e,t){var i,n,a=t.routes[0].legs[0],s="",o="",r="direction-none";for(i=0;i<a.steps.length;i++)o=a.steps[i].instructions.toLowerCase(),r="direction-none",-1!==o.indexOf("<b>left</b>")?r="direction-left":-1!==o.indexOf("<b>right</b>")?r="direction-right":-1!==o.indexOf("at the roundabout")&&(r="direction-roundabout"),s+='<li><span class="'+r+'"></span><span class="step-num">'+(i+1)+'. </span><span class="instructions">'+a.steps[i].instructions+'</span> <span class="miles"><em>'+a.steps[i].distance.text.replace(" ","")+"</em></span></li>";n='<div class="wrapper-store-direction"><h2 class="accessibility">Direction to '+this.storeData.endName+" store from "+e+'</h2><div class="start-point"><span class="pin"></span><h3>'+a.start_address+"</h3></div><ol>"+s+'</ol><div class="end-point"><span class="pin"></span><h3>'+this.storeData.endName+' <br><span class="end-location">'+a.end_address+"</span></h3></div></div>",$(".wrapper-store-direction").replaceWith(n),this.addMarker("Starting point - "+a.start_address,a.start_location,1),this.addMarker("End point - "+this.storeData.endName,a.end_location,2)}},t}),define("app/storeSelector",["require","app/google-maps","config","lib/jquery.mustache","lang","app/ajaxLoader"],function(e){var t,i=e("app/google-maps"),n=e("config").app,a=e("lib/jquery.mustache"),s=e("lang"),o=e("app/ajaxLoader"),r=s.storeSelector;return t=function(e){this.settings=$.extend(this.settings,{selectors:{mapDiv:".store-locator-fields",backToSearch:"#backToSelector",hiddenLatInput:"#frm-latitude",hiddenLngInput:"#frm-longitude",mapDataPointsforDetailsMap:".store-times-pop-in:first",getDirectionsSubmit:"#store-locator-search-btn",getDirectionsTextInput:"#find_store_direction",travelModeOuter:"#travel-modes",travelModesElements:"input",listingColumn:".listing-info",storeNameTarget:".store-listing-detail [data-info-prop=title]",storeAddressTarget:".store-listing-detail-extra dl:first",storeTimesTarget:".map-info-times",storeEndNameTarget:"[data-info-prop=title]",mustacheTemplate:"#chosenStore",errorClass:"is-error",listingMarkerClass:".store-listing-marker",hiddenInputName:"storeId",hiddenInputLabelText:r.hiddenInputLabelText}},e),this.init(),this.cachedSearchBox=$(this.settings.selectors.mapDiv).html(),this.mapToLoad=""},t.prototype={init:function(){this.bindHandlers()},printPage:function(){window.print()},bindHandlers:function(){this.bindStoreLocatorbtn()},bindPrint:function(){var e=this;$(this.settings.selectors.mapDiv).on("click",".cta-print-map",function(){return e.printPage(),!1})},bindListingButtons:function(){var e=this;$(e.settings.selectors.listingColumn).on("click.storeListing",".btn-primary",function(t){var n=$(this).parents("li"),s={storeName:n.find(e.settings.selectors.storeNameTarget).html(),storeAddress:n.find(e.settings.selectors.storeAddressTarget).html(),storeTimes:n.find(e.settings.selectors.storeTimesTarget).html(),storeLat:n.data("lat"),storeLng:n.data("lng"),storeId:n.data("storeId"),storeEndName:n.find(e.settings.selectors.storeEndNameTarget).text()},o=$(e.settings.selectors.mustacheTemplate).html(),r=a.render(o,s);t.preventDefault(),$(e.settings.selectors.mapDiv).html(r).removeClass("ajax-loading-parent"),$(e.settings.selectors.mapDiv).find(".btn:first").focus(),$(e.settings.selectors.mapDiv).find("[type=submit]").attr("type","button").addClass("route"),$("#map_canvas_2").length>0&&new i({canvasIDName:"map_canvas_2",multipleLocations:!1,markerPopUps:!1,mapOptions:{defaultLatLngNameSelector:"[data-lat]:first",zoom:12,mapTypeId:"ROADMAP"},selectors:{mapDataPoints:e.settings.selectors.mapDataPointsforDetailsMap,getDirectionsSubmit:e.settings.selectors.getDirectionsSubmit,getDirectionsTextInput:e.settings.selectors.getDirectionsTextInput,mapDiv:e.settings.selectors.mapDiv,hiddenLatInput:e.settings.selectors.hiddenLatInput,hiddenLngInput:e.settings.selectors.hiddenLngInput,travelModeOuter:e.settings.selectors.travelModeOuter,travelModesElements:e.settings.selectors.travelModesElements,listingMarkerClass:e.settings.selectors.listingMarkerClass}}),e.scrollTo($(e.settings.selectors.mapDiv).prev(),null),e.bindBackButtons(),e.bindPrint()})},bindBackButtons:function(){var e=this;$(this.settings.selectors.backToSearch).on("click.storeSelectorBack",function(){$(e.settings.selectors.mapDiv).html(e.cachedSearchBox),$(e.settings.selectors.mapDiv).find("input:first").focus(),e.bindStoreLocatorbtn()})},scrollTo:function(e,t){$("html, body").stop().animate({scrollTop:e.offset().top},250,t)},bindStoreLocatorbtn:function(){var e=this;$(e.settings.selectors.mapDiv+" [type=text]").on("keypress.storeLocator",function(e){return 13===e.keyCode?(e.preventDefault(),$(".btn-search-store:first").click(),!1):void 0}),$(e.settings.selectors.mapDiv+" [type=button]:not(.route, .route-option, .change-store)").on("click.storeLocator",function(t){var a=$(this);return t.preventDefault(),""!==$(e.settings.selectors.mapDiv+" input[type=text]").val()?($(this).prev().removeClass(e.settings.selectors.errorClass),o(e.settings.selectors.mapDiv,"loading map"),$.ajax({type:"post",dataType:"html",url:a.data("call"),data:{"/kf/store/formhandler/StoreSearchFormHandler.address":$(e.settings.selectors.getDirectionsTextInput).val(),latitude:$(e.settings.selectors.hiddenLatInput).val(),longitude:$(e.settings.selectors.hiddenLngInput).val(),partial:!0},headers:{"cache-control":"no-cache"},timeout:5e3}).success(function(t){$(e.settings.selectors.mapDiv).html(t),$("#map_canvas").length>0&&new i,$("#map_canvas").after('<label class="accessibility" for="'+e.settings.selectors.hiddenInputName+'">'+e.settings.selectors.hiddenInputLabelText+'</label><input class="hide-but-validate js-validator_question accessibility" required type="text" id="'+e.settings.selectors.hiddenInputName+'" name="'+e.settings.selectors.hiddenInputName+'"/>'),e.bindListingButtons(),e.bindBackButtons(),$(e.settings.selectors.mapDiv).find("a:first").focus()}).fail(function(e){if(n.debugMode)throw new Error(e)}).done(function(){$(".ajax-loading").remove()})):$(this).prev().addClass(e.settings.selectors.errorClass).focus(),!1})}},t}),define("app/designConsultation",["require","app/common","config","app/storeSelector"],function(e){var t=(e("app/common"),e("config").app,e("app/storeSelector"));new t}),define("app/modal",["require","app/ajaxLoader"],function(e){function t(e,t){var i,n=e.find("*");27===t.which&&(t.preventDefault(),i=n.filter("#js-modal-close-button"),i.click())}function i(e,t){var i,n,a,s,o;9===t.which&&(i=e.find("*"),n=i.filter(r).filter(":visible"),a=$(":focus"),s=n.length,o=n.index(a),t.shiftKey?0===o&&(n.get(s-1).focus(),t.preventDefault()):o===s-1&&(n.get(0).focus(),t.preventDefault()))}function n(e){var n=e.find("*");$(".w1").attr("aria-hidden","true"),$("#js-modal, #js-modal-overlay").removeClass("is-hidden"),$("#js-modal").attr("aria-hidden","false"),$("body").css({overflow:"hidden"}),$("#js-modal").on("keydown",function(e){i($(this),e)}),$(document).off("keyup"),$("#js-modal").on("keydown",function(e){t($(this),e)}),o=$(":focus"),n.filter(r).filter(":visible").first().focus()}function a(){$("#js-modal, #js-modal-overlay").addClass("is-hidden"),$("#js-modal").attr("aria-hidden","true"),$(".w1").attr("aria-hidden","false"),$("body").removeAttr("style"),$("#js-modal").off("keydown"),o.focus()}function s(){a()}var o,r="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",l=e("app/ajaxLoader");$(function(){$(".start-modal").click(function(e){var t=$(this).attr("href");e.preventDefault(),l("#js-modal-content","Loading"),$(this).hasClass("js-noajax")||$("#js-modal-content").load(t,function(){$(".ajax-loading").length&&($(".ajax-loading").remove(),$(".ajax-loading-parent").removeClass("ajax-loading-parent"))}),n($("#js-modal"))}),$("#cancel").click(function(){a()}),$("#cancel-button").click(function(){a()}),$("#enter").click(function(){s()}),$("#js-modal-close-button").click(function(){a()}),$(".modal-overlay").click(function(){a()})})}),define("app/jquery.countdown",["require","lang"],function(e){var t=e("lang"),i=t.countdown,n=function(e,t){this.settings=$.extend({targetElem:"",endTime:"",endMessage:"",hideZero:!0},t),this.$element=$(e),this.init()};return n.prototype.init=function(){this.parseDates(this.$element,this.settings)},n.prototype.parseDates=function(){var e,t,n,a,s,o,r,l,c,d,u,h,p,f=this;e=""!==this.settings.targetElem?this.$element.find(this.settings.targetElem):this.$element,t=Date.parse(this.settings.endTime),setInterval(function(){n=new Date,a=Date.parse(n),t>a?(s=t-a,o=s/1e3,r=o/60,l=r/60,c=l/24,d=Math.floor(o-60*Math.floor(r)),u=Math.floor(r-60*Math.floor(l)),h=Math.floor(l-24*Math.floor(c)),p=Math.floor(c),f.outputDates(e,p,h,u,d)):(""===f.settings.endMessage&&(f.settings.endMessage=i.endOffer),e.html(f.settings.endMessage).addClass("is-countdown-ended"))},1e3),setTimeout(function(){e.addClass("is-countdown").wrap('<div class="is-countdown-wrap"></div>')},1e3)},n.prototype.outputDates=function(e,t,n,a,s){var o='<span class="counter days">'+t+"<span>"+i.days+"</span></span> ",r='<span class="counter hrs">'+n+"<span>"+i.hrs+"</span></span> ",l='<span class="counter mins">'+a+"<span>"+i.mins+"</span></span> ",c='<span class="counter secs">'+s+"<span>"+i.secs+"</span></span> ";this.settings.hideZero&&0===t?e.html(r+l+c):e.html(o+r+l+c)},$.fn.countdown=function(e){var t=$(this).data();return t.countdown||"object"!=typeof e&&e?t.countdown&&t.countdown[e]&&t.countdown[e](Array.prototype.slice.call(arguments,1)):t.countdown=new n(this,e),this},n}),define("app/product-bundles-group",["require","app/slider"],function(e){var t=e("app/slider");new t({id:".product-bundles-group",slideShow:!1,touch:!0,useCSS:!1,counter:!0,selectors:{slider:".product-bundles-inner",sliderPane:".product-bundles-wrap",elems:".product-bundle",elem:null},breakpoints:[{mediaQuery:"screen and (max-width: 47.93em)",settings:{pageSize:1}}]})}),define("app/bloomreach",["require","app/jquery.equalheights","app/slider","underscore"],function(e){e("app/jquery.equalheights");var t,i=e("app/slider"),n=e("underscore"),a=($(".br-wrapper"),$(".br-sf-widget")),s=$(".br-sf-widget, .br-rp-qv-hide"),o='<div class="br-promo-blocks"><div class="promo-blocks-inner"><div class="promo-blocks-wrap grid grid-4 grid-alt"></div></div></div>',r=$(".br-sf-widget-merchant-qv a"),l=($(".br-sf-widget-merchant-popup-close a"),$("#js-modal")),c=$(".modal-content"),d=$(".modal-content-wrap"),u=".quickviewClose",h="300";a.addClass("grid-item"),s.wrapAll(o);var p=function(e){this.bindEvents()};return $.extend(p.prototype,{bindEvents:function(){var e=this;r.on("click",function(){var t=$("#"+$(this).data("id")).find(".br-sf-widget-merchant-popup-cont").html();c.html(t),l.addClass("isQuickviewModalOpen"),l.find(".modal-close-button").addClass("quickviewClose"),$(u).bind("click"),e.resizeQuickviewModalFunction()}),$("body").on("click",u,function(){l.hasClass("isQuickviewModalOpen")&&(l.removeAttr("style"),d.removeAttr("style"),c.empty(),l.removeClass("isQuickviewModalOpen"))}),t=n.debounce(function(){l.hasClass("isQuickviewModalOpen")&&e.resizeQuickviewModalFunction()},10),$(window).on("resize",t),$(".br-sf-widget.grid-item").length&&$(".br-sf-widget.grid-item").equalHeights({resize:!0}),new i({id:".br-promo-blocks",slideShow:!1,touch:!0,useCSS:!1,counter:!0,selectors:{slider:".promo-blocks-inner",sliderPane:".promo-blocks-wrap",elems:".grid-item",elem:null},breakpoints:[{mediaQuery:"screen and (max-width: 30em)",settings:{pageSize:1}},{mediaQuery:"screen and (min-width: 30.0625em) and (max-width: 40em)",settings:{pageSize:2}},{mediaQuery:"screen and (min-width: 40.0625em) and (max-width: 50em)",settings:{pageSize:3}}]})},resizeQuickviewModalFunction:function(){l.hasClass("isQuickviewModalOpen")&&(c.height()+100>$(window).height()?($(window).width()>=480&&$(window).width()<640?l.css("height","100%"):$(window).width()>=640&&l.css("height","80%"),d.css({"overflow-y":"scroll"})):c.height()<h?(l.css({height:h+"px"}),d.css("overflow-y","hidden")):(l.height(c.height()+50),d.css("overflow-y","hidden")))}}),new p}),define("app/promo-blocks",["require","app/slider","app/jquery.equalheights"],function(e){var t=e("app/slider"),i=$(".promo-blocks");e("app/jquery.equalheights"),new t({id:".promo-blocks",slideShow:!1,touch:!0,useCSS:!1,counter:!0,selectors:{slider:".promo-blocks-inner",sliderPane:".promo-blocks-wrap",elems:".grid-item",elem:null},breakpoints:[{mediaQuery:"screen and (max-width: 40em)",settings:{pageSize:1}}]}),$(".promo-blocks .promo-block-wrap").length&&$(".promo-blocks .promo-block-wrap").equalHeights({rows:!0,resize:!0}),i.each(function(e){var t=$(this).attr("aria-labelledby"),i=$(this).find("#promo-blocks-title").attr("id");$(this).attr("aria-labelledby",t+e),$(this).find("#promo-blocks-title").attr("id",i+e)})}),define("app/backToTop",["require","underscore"],function(e){function t(){var e=o.offset().top,t=$(window).outerHeight(!0);return{domPosition:e,windowHeight:t}}var i,n,a=e("underscore"),s=$(".back-to-top-wrapper"),o=$(".footer-header");i=t(),i.domPosition>i.windowHeight-100&&(s.removeClass("is-dom-removed"),s.attr("aria-hidden","false")),n=a.debounce(function(){i=t(),i.domPosition>i.windowHeight-100?(s.removeClass("is-dom-removed"),s.attr("aria-hidden","false")):(s.addClass("is-dom-removed"),s.attr("aria-hidden","true"))},10),$(window).on("resize",n)}),define("app/mediaplayer",["require","app/common","config","underscore","lang","lib/jquery.mustache"],function(e){function t(e){e.each(function(){var e=$(this).data();e.MediaViewer?e.MediaViewer.display():new r(this,e)})}var i=(e("app/common"),e("config").app),n=e("underscore"),a=e("lang"),s=a.mediaPlayer,o=e("lib/jquery.mustache"),r=function(e,t){if(this.config=$.extend(!0,{},t),!this.viewer)if(diy.scene7url){if(this.config.asset)this.initialised=!1,this.rendered=!1,this.$container=$(e),this.init();else if(i.debugMode)throw new Error("MediaViewer(): no asset provided")}else if(i.debugMode)throw new Error("MediaViewer(): Scene7 url not found, please ensure it's declared in the diy namespace.")};r.prototype={init:function(){var e=this.$container,t=e.data("MediaViewer");if(!t){var i=e.attr("id");i||(i="s7-mediaview-"+Math.floor(1e16*Math.random()),e.attr("id",i)),this.containerId=i,this.load(),e.data("MediaViewer",this)}},load:function(){e([this.config.s7Viewer],this.setup.bind(this))},setup:function(e){function t(){setTimeout(function(){var e=$(".s7mutebutton",a.$container);e.length>0?e.show():t()},100)}var n,a=this,s=this.config,o={serverurl:diy.scene7url+i.scene7.serverurl,contenturl:diy.scene7url+i.scene7.contenturl,emailurl:diy.scene7url+i.scene7.emailurl,videoserverurl:diy.scene7url+i.scene7.videoserverurl,asset:-1===s.asset.indexOf("/")?diy.scene7assetPath+s.asset:s.asset};switch(s.s7Viewer){case"s7MixedMediaViewer":n=new e.MixedMediaViewer,o.config=i.scene7.config.mixedMediaViewer,o.playback=Modernizr.video?"native":"auto",o["Swatches.textpos"]="bottom",o["Swatches.align"]="center,top";break;case"s7VideoViewer":n=new e.VideoViewer,o.config=i.scene7.config.videoViewer,o.playback=Modernizr.video?"native":"auto";break;case"s7ZoomViewer":n=new e.ZoomViewer,o.config=i.scene7.config.zoomViewer;break;case"s7BasicZoomViewer":n=new e.BasicZoomViewer,o.config=i.scene7.config.basicZoomViewer}this.viewer=n,n.setContainerId(this.containerId),n.setParams($.param(o)),n.setHandlers({initComplete:this.initCompleteMethods.bind(this)}),this.display(),$("html").hasClass("lt-ie9")&&o.playback&&(window.onerror=function(e,t,i){return t.indexOf("VideoControls.js")>-1?!0:void 0},t()),this.errorTimeout=setTimeout(function(e){var t={player:$(".media-player"),imgRoundel:$(".roundel-holder.accessibility")};e=a.rendered,e||(a.$container.parent().removeClass("ajax-loading-parent"),t.imgRoundel.removeClass("accessibility"),t.player.remove(),$(".ajax-loading").remove())},15e3)},display:function(){this.viewer&&this.$container.is(":visible")&&!this.initialised&&(this.setSize(),this.viewer.init(),this.initialised=!0)},setSize:function(e,t){e=e||this.config.width,t=t||this.config.height,e&&this.viewer.setParam("stagesize",e+","+t)},initCompleteMethods:function(){var e=this,t={player:$(".media-player"),s7swatches:$(".s7swatches"),imgRoundel:$(".roundel-holder.accessibility"),imgBackup:$(".main-img"),imgAll:$(".pdp-images img")};if(this.rendered=!0,this.$container.parent().hasClass("pdp-viewer")){this.$container.parent().removeClass("ajax-loading-parent"),$(".ajax-loading").remove(),t.player.addClass("is-rendered"),t.s7swatches.addClass("is-rendered"),t.imgRoundel.removeClass("accessibility"),t.imgBackup.remove(),this.modifyPDPimage(t);var i=n.debounce(function(i){e.modifyPDPimage(t,!0)},200);$(window).on("resize",i,!1)}else this.setSwatchLabels();return this.rendered},setSwatchLabels:function(){var e=this.viewer.getComponent("swatches");if(e){for(var t=e.component.mediaSet_.landscape.items,i=0;i<t.length;i++)if(t[i].swatch&&!t[i].swatch.label){var n=t[i].swatch.asset.split("/")[1].replace(/_/g," ");t[i].swatch.label=decodeURI(n)}var a={w:e.getWidth(),h:e.getHeight()};e.reload(),e.resize(a.w,a.h)}},modifyPDPimage:function(e,t){this.viewer.getComponent("swatches"),$(".s7thumbcell");e.imgAll.each(function(e){var t=$(this).attr("alt"),i=e+1;$(this).attr("alt",t+": Image "+i)})},renderPDPimageMustache:function(e,t,i){var n=o.render(i,t);e.html(n)}},r.popup={scroll:null,open:function(e){e.preventDefault();var t=$(this).data();
this.scroll=$(window).scrollTop();var i=$("<div>",{"class":"popup"}),n=$("<a>",{href:"",id:"ui-popup-close","class":"popup-close"}).html("<span>"+s.closeOverlay+"</span>");i.attr("tabindex","-1").append(n),$("body").append(i).css("overflow","hidden"),i.focus(),new r(i[0],t)},close:function(e){e.preventDefault(),$(this).parent().remove(),$("body").css("overflow",""),$("html").scrollTop(this.scroll)}},$(document).on("click.popup",'[data-s7-viewer][data-popup="true"]',r.popup.open).on("click.popup","#ui-popup-close",r.popup.close);var l='[data-s7-viewer]:not([data-popup="true"])',c=$(l).filter(function(){return 0===$(this).closest(".tab-panel").length});return $(document).on("changed.tabs active.toggletarget",function(e,i){var n=$(l).filter(function(){return $(this).closest(i).length>0});t(n)}),t(c),r}),define("app/addressLookup",["require","app/common","lib/jquery.mustache","config","lang","app/validation"],function(e){var t,i=e("app/common"),n=e("lib/jquery.mustache"),a=e("config").app,s=e("lang"),o=s.AddressLookup;return e("app/validation"),a.devMode||e(["dwr"]),t=$.ec(i.object,{constructor:function(e){this.config={id:null,hiddenInputId:"QASAddressInput",selectors:{items:{addressQAS:".address-qas",addressUpdate:".update-address",addressForm:".address-form",addressList:".address-list"},match:{houseNumber:".house-number-qas",postCode:".postcode-qas"},cta:{find:".find-address",select:".address-list"},link:".link"},template:"#ui-template-address-list",resKeyAttr:"data-name"},$.extend(!0,this.config,e||{}),this.$={},this.$event=void 0,this.$ctx=null,this.$toggleItem=null,this.$template=null,this.formData=null,this.isException=!1,this.editMode=!1,this._loadObjects(!0),this._init()}}),$.extend(t.prototype,{_init:function(){this.$ctx=this.$.id,this._handleExceptions(),this._handleEvents(!1),this._bindValidation()},_handleEvents:function(e){var t=this;e?t.$ctx.on("click.addressLookup",t.$.cta[0].find,$.proxy(t._handleExceptions,t)).on("click.addressLookup",t.$.cta[0].select,$.proxy(t._handleExceptions,t)).on("click.addressLookup",t.$.link.selector,$.proxy(t._handleExceptions,t)):t.$ctx.on("click.addressLookup",t.config.selectors.cta.find,$.proxy(t.lookup,t)).on("change.addressLookup",t.config.selectors.cta.select,$.proxy(t.updateLookup,t)).on("click.addressLookup",t.config.selectors.link,$.proxy(t.toggleMode,t)).on("keypress.addressLookup",t.config.selectors.match.postCode,function(e){13===e.which&&(e.preventDefault(),$(t.config.selectors.cta.find,t.$ctx).click())}).on("IOException.addressLookup",$.proxy(t._handleExceptions,t))},_bindValidation:function(){var e=$(this.$.match[0].postCode,this.$ctx);e.data("editMode",this.editMode).rules("add",{qas:!0})},safeLog:function(e,t){window.console&&window.console.log&&window.console.log(e,t)},toggleMode:function(e){var t=$(e.target).closest(this.config.id),i=$(".js-qas-content",t),n=i.filter(":not(.is-collapsed)"),a=this.$.link.data(),s=this.$.link.text();return i.toggleClass("is-collapsed"),$("html").hasClass("lt-ie9")?setTimeout(function(){n.css({visibility:"hidden"}).css({visibility:""}).attr("tabindex",-1).focus()},0):n.attr("tabindex",-1).focus(),this.$template&&(this.$template.remove(),this.$template=null,$(this.config.selectors.items.addressUpdate,t).addClass("is-collapsed")),this.$.link.text(a.alt),a.alt=s,this.editMode=!this.editMode,$(this.$.match[0].postCode,this.$ctx).data("editMode",this.editMode),$("input[type=text]:first",i).focus(),!1},lookup:function(t){var i=this,n=$(t.target).closest(i.config.id),s=i.$.items[0],o=i.$.match[0],r=s.addressUpdate,l=$(r,n),c=o.houseNumber,d=$(c,n),u=d.val(),h=o.postCode,p=$(h,n),f=p.val(),g=$(t.target).data().ajaxUrl;return $("#"+this.config.hiddenInputId).length||$(this.config.selectors.items.addressQAS).before('<input type="hidden" id="'+this.config.hiddenInputId+'" name="'+this.config.hiddenInputId+'" value="true" />'),this.safeLog("$ctx: "+n,n),this.safeLog("$ctx.length: "+n.length,n.length),this.safeLog("self.$.items: "+i.$.items,i.$.items),this.safeLog("self.$.items "+i.$.items.length,i.$.items.length),this.safeLog("self.$.match: "+i.$.match,i.$.match),this.safeLog("self.$.match "+i.$.match.length,i.$.match.length),this.safeLog("addressUpdate: "+r,r),this.safeLog("$toggleItem: "+l,l),this.safeLog("$toggleItem.length: "+l.length,l.length),this.safeLog("houseNumber: "+c,c),this.safeLog("$houseNumber: "+d,d),this.safeLog("$houseNumber.length: "+d.length,d.length),this.safeLog("houseNumberVal: "+u,u),this.safeLog("postCode: "+h,h),this.safeLog("$postCode: "+p,p),this.safeLog("$postCode.length: "+p.length,p.length),this.safeLog("postCodeVal: "+f,f),this.safeLog("reqUrl: "+g,g),p.rules("remove","qas"),p.valid()||d.valid()?(this.safeLog("$postCode.valid() && $houseNumber.valid() both == true"),p.rules("add",{qas:!0}),i.formData=u?{postCode:f,houseNumber:u}:{postCode:f},i.setToggleItem(l),i.setCtx(n),i.formData.postCode&&(this.safeLog("Inside self.formData.postCode == true"),a.devMode?(this.safeLog("Inside appConfig.devMode == true"),i.dispatchRequest(i.formData,g).done(function(e){e.status=parseInt(e.status),p.valid(),p.next(".is-error").hide(),e.status<1?(p.removeClass("is-error"),i.populateForm(e)):(1===e.status||e.status>1)&&p.val(f).next(".is-error").text(e.message).show()})):(this.safeLog("Inside appConfig.devMode == false"),e(["qas"],function(e){i.safeLog("Inside require call"),i.safeLog("implAddressLookUp: "+e,e),i.safeLog("AddressLookUp: "+AddressLookUp,AddressLookUp),AddressLookUp.lookupAddress(i.formData,{callback:function(e){i.safeLog(e),e=$.parseJSON(e),e.status=parseInt(e.status),i.safeLog(e),p.valid(),p.next(".is-error").hide(),e.status<1?(p.removeClass("is-error"),i.populateForm(e)):(1===e.status||e.status>1)&&p.val(f).next(".is-error").text(e.message).show()},errorHandler:function(e){if(i.safeLog("errorThrown: "+e,e),a.debugMode)throw new Error(e)}})}))),!1):void 0},updateLookup:function(t){var i=this,n=$(t.target).closest(i.config.id),s=i.$.items[0],r=s.addressForm,l=$(r,n),c=s.addressList,d=$(c,n),u=d.val(),h=(d.hasClass("is-error"),$(t.target).data().ajaxUrl);return i.formData={id:u},i.setToggleItem(l),i.setCtx(n),i.toggleMode(t),a.devMode?i.dispatchRequest(i.formData,h).done(function(e){e.status=parseInt(e.status),e.status<1?i.populateForm(e):1===e.status?d.val(o.notFound).focus().focusout().val(u).next(".is-error").text(e.message):e.status>1&&d.val(o.serverDown).focus().focusout().val(u).next(".is-error").text(e.message)}):e(["qas"],function(e){AddressLookUp.updateLookupAddress(i.formData,{callback:function(e){e=$.parseJSON(e),e.status=parseInt(e.status),e.status<1?i.populateForm(e):1===e.status?d.val(o.notFound).focus().focusout().val(u).next(".is-error").text(e.message):e.status>1&&d.val(o.serverDown).focus().focusout().val(u).next(".is-error").text(e.message)},errorHandler:function(e){if(a.debugMode)throw new Error(e)}})}),!1},populateForm:function(e){var t,i,a,s,o,r,l=this,c=l.getCtx(),d=l.getToggleItem(),u=l.$.items[0],h=null,p=null,f=l.config.resKeyAttr,g=null;switch(this.safeLog("$ctx: "+c,c),this.safeLog("$toggleItem: "+d,d),this.safeLog("$toggleItem.length: "+d.length,d.length),this.safeLog("self.$.items: "+l.$.items,l.$.items),this.safeLog("self.$.items.length "+l.$.items.length,l.$.items.length),this.safeLog("$items: "+u,u),this.safeLog("$toggleItem.selector: "+d.selector,d.selector),this.safeLog("$items.addressUpdate: "+u.addressUpdate,u.addressUpdate),this.safeLog("$items.addressUpdate.length: "+u.addressUpdate.length,u.addressUpdate.length),this.safeLog("$items.addressForm: "+u.addressForm,u.addressForm),this.safeLog("$items.addressForm.length: "+u.addressForm.length,u.addressForm.length),d.selector){case u.addressUpdate:this.safeLog("matches $items.addressUpdate"),this.safeLog("self.isException: "+l.isException,l.isException),t=e.addressList,e.ctx=c[0].id.split("-")[1],i=$(l.config.template),a=i.html(),s=n.compile(a),o=s(e),r=$(o,c),this.safeLog("self.config.template: "+l.config.template,l.config.template),this.safeLog("$tmpl: "+i,i),this.safeLog("$tmpl.length: "+i.length,i.length),this.safeLog("$tmpl.html(): "+i.html(),i.html()),this.safeLog("tmpl: "+s,s),this.safeLog("addressList: "+o,o),this.safeLog("$addressList: "+r,r),this.safeLog("$addressList.length: "+r.length,r.length),l._responseExceptionHandler(r),this.safeLog("got past _response.ExceptionHandler"),l.isException||(this.safeLog("self.isException is false."),this.safeLog("before setting selected"),r.find("option:first").prop("selected",!0),this.safeLog("selected has been set."),this.safeLog("self.$template: "+l.$template,l.$template),l.$template?(this.safeLog("self.$template is not false / null"),this.safeLog("doing a replacewith"),l.$template.replaceWith(r)):(this.safeLog("self.$template is false / null"),this.safeLog("doing a prepend"),d.prepend(r).removeClass("is-collapsed")),l.$template=r);break;case u.addressForm:this.safeLog("matches $items.addressForm"),h=null,p=null,f=l.config.resKeyAttr,g=null;for(h in e)if(e.hasOwnProperty(h))for(p in e[h])e[h].hasOwnProperty(p)&&"object"==typeof e[h]&&(g=$("["+f+"="+p+"]",d),l._responseExceptionHandler([d,g,f,p]),l.isException||g.val(e[h][p]));break;default:this.safeLog("does not match either of them."),this.safeLog("$toggleItem.selector ==  $items.addressUpdate "+d.selector===u.addressUpdate,d.selector===u.addressUpdate),this.safeLog("$toggleItem.addressForm ==  $items.addressForm "+d.selector===u.addressForme,d.selector===u.addressForm)}this.safeLog("self.isException: "+l.isException,l.isException),this.safeLog("exiting populateForm."),2===$(this.config.selectors.items.addressList+" option").length&&$(this.config.selectors.items.addressList+" option:eq(1)").attr("selected","selected").parent().change()},dispatchRequest:function(e,t){var i=$.ajax({type:"post",dataType:"json",url:t,data:e,headers:{"cache-control":"no-cache"},timeout:5e4}).fail(function(e){if(a.debugMode)throw new Error(e)});return i},_responseExceptionHandler:function(e){var t,i=this,n=[],a=$.isArray(e),s=a?e[0]:$(e),o=i.$.items[0],r=null,l=null,c=[],d=[];this.safeLog("$respondentCtx.closest($items.addressUpdate).length: "+s.closest(o.addressUpdate).length,s.closest(o.addressUpdate).length),s.closest(o.addressUpdate).length>0&&(t=$(i.$.items[0].addressList,s).children(),r=null,l=null,c=[],d=[],this.safeLog("$opts.length: "+t.length,t.length),t.each(function(){r=$(this).val(),l=$(this).text(),r.length>0&&c.push(r),l.length>0&&d.push(l)}),!t.length>0?i.$ctx.trigger("IOException",["opts","template"]):(!c.length>0&&i.$ctx.trigger("IOException",["optsValues","template"]),!d.length>0&&i.$ctx.trigger("IOException",["optsTexts","template"]))),this.safeLog("$respondentCtx.closest($items.addressForm).length "+s.closest(o.addressForm).length,s.closest(o.addressForm).length),s.closest(o.addressForm).length>0&&(this.safeLog("respondent[1].length: "+e[1].length,e[1].length),!e[1].length>0&&(n=["field",e[2],e[3]],i.$ctx.trigger("IOException",[n,"form"])))},_handleExceptions:function(e,t,i){var n=this,s=n.$ctx,o=n.$.items[0],r=n.$.match[0],l=n.$.cta[0],c=[o.addressQAS,o.addressUpdate,o.addressForm,r.houseNumber,r.postCode,l.find,n.config.selectors.link],d=n.config.template,u=$(d),h=[],p=[],f="";try{if(this.safeLog("selectors: "+c,c),this.safeLog("$(selectors).length: "+$(c).length,$(c).length),$(c).each(function(){n.safeLog("selectors in loop: "+this,this),n.safeLog("$(this, $ctx).length: "+$(this,s).length,$(this,s).length),!$(this,s).length>0&&(n.safeLog("pushing "+this,this),h.push(this))}),this.safeLog("$addressListTmpl.length: "+u.length,u.length),!u.length>0&&h.push(d),this.safeLog("contextType: "+i),"template"===i&&("opts"===t&&p.push("No template was parsed by "+d),"optsValues"===t&&p.push("Value reference does not match the response key, using "+d),"optsTexts"===t&&p.push("Text node reference does not match the response key, using "+d)),"form"===i&&"field"===t[0]&&p.push("Either attribute reference ["+t[1]+'] does not match, or response key "'+t[2]+'" does not match the attribute value in '+o.addressForm),this.safeLog("referenceError.length: "+h.length,h.length),this.safeLog("responseError.length: "+p.length,p.length),h.length>0)throw h.join(", ");if(p.length>0)throw p.join(", ")}catch(g){this.safeLog("exc: "+g,g),this.safeLog("exc.message: "+g.message,g.message),n.isException=!0,h.length>0&&(f=new Error('No reference found for "'+g+'" in "#'+s[0].id+'" in the HTML!')),p.length>0&&(f=new Error(g)),a.debugMode&&("undefined"==typeof console?window.console={error:function(){alert(f)}}:"undefined"!=typeof e?console.error(f):console.error(f)),this.safeLog("errorMsg; "+f,f),this.safeLog("e: "+e,e),this.safeLog("typeof e: "+typeof e,typeof e)}finally{if("undefined"!=typeof e)return!1}},setCtx:function(e){this.$ctx=e},getCtx:function(){return this.$ctx},setToggleItem:function(e){this.$toggleItem=e},getToggleItem:function(){return this.$toggleItem}}),$.validator.addMethod("qas",function(e,t){var i=$(t).data();return!(void 0===i.event&&!i.editMode)},o.validateQAS),t}),define("app/ajaxform",["require","app/common","app/notifier","app/validation","lang"],function(e){var t,i=(e("app/common"),e("app/notifier")),n=e("app/validation"),a=e("lang"),s=a.ajaxForms;return diy.page=diy.page||{},diy.page.editing=!1,t=function(e){this.$container=$(e),this.editMode=!1,this.bindHandlers(),$(e).data("ajaxform",this)},t.prototype=$.extend(t.prototype,{bindHandlers:function(){this.$container.on("click.ajaxform",'[type="submit"]:not([data-ajax-submit="false"])',$.proxy(this.toggleView,this)).on("click.ajaxform",'[data-action="cancel"]',$.proxy(this.cancel,this)),$(document).on("reset.ajaxform",$.proxy(this.reset,this)).on("confirm.ajaxform",$.proxy(this.confirm,this))},toggleView:function(e){var t,i=$(e.target),n=this.$form=i.closest("form"),a=i.data().ajax!==!1,s=n.valid();return e&&e.preventDefault(),!this.editMode&&diy.page.editing?($(document).trigger("confirm.ajaxform",[this]),!1):void(s&&a&&(t=this.serializeForm(i),e.preventDefault(),this.notifier&&this.notifier.destroy(),$(document).trigger("closeall.notifier"),this.editMode||(this.$initialState=this.$container.html()),$("input, button, select, textarea, .btn",n).attr("disabled","disabled").addClass("disabled"),this.doAjax(t).done($.proxy(this.insertForm,this))))},insertForm:function(e){var t,a=this.$container;this.editMode=!this.editMode,diy.page.editing=!diy.page.editing,a.html(e),t=$("form",a),diy.instances.customFormElements.reinit(),n(t),this.notifier=new i({target:t}),this.editMode?(this.scrollTo(a),$("input, select",a).filter(":visible").first().focus(),$(document).trigger("editing.ajaxform",[a])):(this.notifier.notify({status:0,message:s.editNotify}),$(document).trigger("readonly.ajaxform",[a]).trigger("saved.ajaxform",[a]))},serializeForm:function(e){var t=this.$form.serialize();return""!==t&&(t+="&"),t+=e.attr("name")+"="+e.val()},cancel:function(e){this.editMode&&(e&&e.preventDefault(),this.reset(),this.scrollTo(this.$container),$('[type="submit"]',this.$container).last().focus())},confirm:function(e,t){var i,n,a=this;return this.editMode&&(i=$("form",this.$container),n=i.data().notifier,n.notify({status:2,title:s.confirmChanges.title,message:s.confirmChanges.message,confirm:!0}),n.$notification.on("no",function(){a.reset(),a.scrollTo(t.$container,function(){$('[type="submit"]',t.$form).trigger("click")})}).on("yes",function(){$('[type="submit"]',i).trigger("click")})),!1},reset:function(){this.$container.html(this.$initialState),this.editMode=!1,diy.page.editing=!1,$(document).trigger("readonly.ajaxform",[this.$container])},doAjax:function(e){var t=$.ajax({type:this.$form.attr("method"),url:this.$form.attr("action"),headers:{"cache-control":"no-cache"},data:e}).fail(function(e,t,i){throw new Error("get(): "+i)});return t},scrollTo:function(e,t){$("html, body").stop().animate({scrollTop:e.offset().top},250,t)}}),t}),define("pages/homepage",["require"],function(e){$(document).on("componentResize",function(){$(document).trigger("resize")}),$("#carousel-hero .hero-slide:first-child").addClass("is-active"),$("#carousel-hero").on("slide-changed",function(e,t){$("#carousel-hero .hero-slide").removeClass("is-active"),t.addClass("is-active")})}),define("app/qty-field",["require","lang"],function(e){var t,i=e("lang"),n=i.qtyFields;return t=function(e){if(this.settings=$.extend({target:null,wrapper:".w1",eventType:"keydown.qty keypress.qty paste.qty"},e),!this.settings.target)throw new Error(n.error);this.ie8=!1,this.init()},t.prototype={init:function(){this.ie8=this.isIE("9","lte"),this.bindHandlers()},bindHandlers:function(){var e=this;$(this.settings.wrapper).on(this.settings.eventType,this.settings.target,function(t){switch(t.type){case"keydown":e.keyedDown(t,this);case"keypress":e.keyPressed(t,this);break;case"paste":e.onPasting(t,this)}})},isIE:function(e,t){var i,n="IE",a=document.createElement("B"),s=document.documentElement;return e&&(n+=" "+e,t&&(n=t+" "+n)),a.innerHTML="<!--[if "+n+']><b id="iecctest"></b><![endif]-->',s.appendChild(a),i=!!document.getElementById("iecctest"),s.removeChild(a),i},keyFilter:function(e){return e.ctrlKey===!0||e.metaKey===!0?!0:e.shiftKey===!0||e.altKey===!0?!1:e.which>=35&&e.which<=40||-1!==$.inArray(e.keyCode,[46,8,9,27,13])?!0:!1},getSelectionText:function(){var e="";return $(".gt-ie8.lt-ie10").length?e=document.selection.createRange().htmlText:document.selection&&"Control"!==document.selection.type?e=document.selection.createRange().text:window.getSelection&&(e=window.getSelection().toString()),e},limitNumbers:function(e,t,i,n){var a=$(i).val();switch(n){case"last":a.length>t-1&&$(i).val($(i).val().substring(0,t-1));break;case"stream":a.length>=t&&$(i).val($(i).val().substring(1,t+1));break;case"kill":if(a.length>=t){if(this.getSelectionText()===$(i).val())return;return e.preventDefault(),!1}}},keyPressed:function(e,t){return this.keyFilter(e)?void 0:e.which>=48&&e.which<=57||e.which>=96&&e.which<=105||e.shiftKey&&9===e.keyCode?(this.limitNumbers(e,3,t,"kill"),!1):e.keyCode>=35&&e.keyCode<=40?!0:void e.preventDefault()},keyedDown:function(e,t){var i,n,a=this,s=$(t);if(13===e.which){if($("body.js-basket, body.basket").length)return s.next().focus().click(),e.preventDefault(),!1;if($("body.js-wishlist").length)return s.next().focus().click(),e.preventDefault(),!1;if($("#ui-list-productlist").length)return s.parents("li").find(".btn-super-handle").focus(),e.preventDefault(),!1;if("qty"===s.attr("name"))return s.parents("li").find(".btn-super-handle").focus(),e.preventDefault(),!1;if("productQuantity"===s.attr("id"))return s.parents(".box").find("[type=submit]:not(:disabled):first").focus(),e.preventDefault(),!1}if(this.ie8){if(e.which>=35&&e.which<=40||-1!==$.inArray(e.which,[46,8,9,27,13])||e.shiftKey&&9===e.which)return!0;i=!1,n=!1,(e.ctrlKey===!0||e.metaKey===!0)&&(65===e.which&&(i=!0),67===e.which&&(n=!0)),i||n||setTimeout(function(){var e=s.val();s.val(a.trimNClean(e))},10)}},trimNClean:function(e){var t,i=e.replace(/[^\d]/g,""),n=i.replace(/^0+/,"");return t=n.length<2||n?n.substring(0,3):i.substring(0,3),""===t&&(t=0),t},onPasting:function(e,t){var i,n,a=void 0;return window.clipboardData&&window.clipboardData.getData?a=window.clipboardData.getData("Text"):e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(a=e.originalEvent.clipboardData.getData("text/plain")),i=a.replace(/[^\d]/g,""),n=i.substring(0,3),$(t).val(n),e.preventDefault(),!1}},t}),define("app/basket/mainBasket",["require","app/jquery.equalheights","jquery","app/slider","app/showMore","app/qty-field","lang","app/ajaxLoader"],function(e){function t(e){-1!==i.inArray(e.keyCode,[46,8,9,27,13])||65==e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.altKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}e("app/jquery.equalheights");var i=e("jquery"),n=e("app/slider"),a=e("app/showMore"),s=e("app/qty-field"),o=e("lang"),r=e("app/ajaxLoader"),l=o.mainBasket,c={target:".basket-items-update-input"},d=(new s(c),function(){this.init()});d.prototype={init:function(){this.bindHandlers()},disableInputDuringAjax:function(e){i(".btn.btn-primary[type=submit]:not([disabled])").attr("disabled","").data("flag","remove-disabled-checkout"),i(e).parents("div").find(".btn").attr("disabled","").data("flag","remove-disabled")},bindHandlers:function(){i(document).on("click.basketajax",'[data-action="remove"]',i.proxy(this.remove,this)).on("click.basketajax",'[data-action="confirmDelete"]',i.proxy(this.confirmDelete,this)).on("click.basketajax",'[data-action="cancel"]:not([disabled])',i.proxy(this.cancel,this)).on("click.basketajax",'[data-action="confirm"]:not([disabled])',i.proxy(this.confirm,this)).on("click.basketajax",'[data-action="update"]',i.proxy(this.update,this)).on("click.basketajax",'[data-action="fulfilment"]',i.proxy(this.fulfilment,this)).on("click.basketajax",'[data-action="addDiscount"]',i.proxy(this.addDiscount,this)).on("click.basketajax",'[data-action="removeDiscount"]:not([disabled])',i.proxy(this.removeDiscount,this)).on("click.basketajax",'[data-action="addVoucher"]',i.proxy(this.addVoucher,this)).on("click.basketajax",'[data-action="removeVoucher"]',i.proxy(this.removeVoucher,this)).on("click.basketajax",'[data-action="removeDiscountCard"],[data-action="removeBQClubCard"]',i.proxy(this.removeDiscountCard,this)).on("click.basketajax",'[data-action="confirmVoucherRemoval"]:not([disabled])',i.proxy(this.confirmVoucherRemoval,this)).on("click.basketajax",'[data-action="addBQcrd"]',i.proxy(this.addBQcard,this)).on("click.basketajax",'[data-action="empty"]',i.proxy(this.empty,this)).on("click.basketajax",'[data-action="removeBQcrd"]',i.proxy(this.removeBQcard,this)).on("keypress.submitThisOnly",".addData [type=text], .addData select",i.proxy(this.submitThisOnly,this)).on("click",".js-add-card",i.proxy(this.addDiscountCard,this))},remove:function(e){var t=i(e.target),n=t.closest(".basket-item-wrapper"),a=n.parent(),s="removeBasketMessageBlock";i('[data-action="cancel"]').trigger("click"),n.addClass("basket-item-removing"),a.append('<div  id="'+s+'" class="basket-remove-item" style="display: none;"><p><i class="icon-warning"></i><em>'+l.item_remove.sure+'</em></p><ul><li><a href="#" class="btn btn-secondary" data-action="cancel">'+l.item_remove.cancel+'</a></li><li><a href="#remove-item" id="remove-single-item" class="btn btn-primary" data-action="confirm">'+l.item_remove.confirm+"</a></li></ul></div>"),a.find(".basket-remove-item").slideDown(150,function(){i('[data-action="confirm"]').focus()}),e.preventDefault()},empty:function(e){var t=i(e.target),n=t.closest(".basket-buttons"),a=n.parent(),s="emptyBasketMessageBlock";i('[data-action="cancel"]').trigger("click"),n.addClass(".basket-item-removing"),a.append('<div id="'+s+'" class="basket-remove-item" style="display: none;"><p><i class="icon-warning"></i><em>'+l.empty.sure+'</em></p><ul><li><a href="#" class="btn btn-secondary" data-action="cancel">'+l.empty.cancel+'</a></li><li><a class="btn btn-primary" href="#remove-item" id="empty-all" data-action="confirm">'+l.empty.confirm+"</a></li></ul></div>"),a.find(".basket-remove-item").slideDown(function(){i("html, body").animate({scrollTop:i("#"+s).offset().top},10)}),e.preventDefault()},showVoucherMessage:function(e){var t="removeVoucher",n=i(e.target),a=n.closest(".voucher-block");return a.after('<div  id="'+t+'" class="basket-remove-item" style="display: none;"><p><i class="icon-warning"></i><em>'+l.showVoucherMessage.sure+'</em></p><ul><li><a href="#" class="btn btn-secondary" data-action="cancel">'+l.showVoucherMessage.cancel+'</a></li><li><a href="#remove-item" id="remove-single-item" class="btn btn-primary" data-action="confirm">'+l.showVoucherMessage.confirm+"/a></li></ul></div>"),!1},cancel:function(e){var t=i(e.target).closest(".basket-remove-item");t.slideUp(function(){t.siblings(".basket-item-wrapper").removeClass("basket-item-removing"),t.remove()}),e.preventDefault()},update:function(e){var t=i(e.target),n=t.closest("div.basket-item-wrapper").attr("id");this.sendData(this.serializeForm(e.target)).done(function(){i(".basket-items-update-input","#"+n).focus()}),e.preventDefault()},confirm:function(e){this.disableInputDuringAjax(e.target),this.sendData(this.serializeForm(e.target)).done(function(){return i(".basket-remove-item").parent().animate({height:0,opacity:0},1e3)})},fulfilment:function(e){var t=this.serializeForm(e.target);this.sendData(t,"")},addDiscount:function(e){var t=this.serializeForm(e.target);this.sendData(t,""),e.preventDefault()},addDiscountCard:function(e){var t=i(e.target);e.preventDefault(),i(".js-discount-card-details").show(),t.hide()},confirmDelete:function(e){var t=i(e.target),n=t.closest("div.test"),a=n.parent(),s="removingDiscountBlock";e.preventDefault(),i('[data-action="cancel"]').trigger("click"),n.addClass("basket-item-removing"),a.append('<div  id="'+s+'" class="basket-remove-item" style="display: none;"><p><i class="icon-warning"></i><em>'+l.confirmDelete.sure+'</em></p><ul><li><a href="#" class="btn btn-secondary" data-action="cancel">'+l.confirmDelete.cancel+'</a></li><li><a href="#remove-item" id="remove-single-item" class="btn btn-primary" data-action="confirm">'+l.confirmDelete.confirm+"</a></li></ul></div>"),a.find(".basket-remove-item").slideDown(150,function(){i('[data-action="confirm"]').focus()})},removeDiscount:function(e){var t=this.serializeForm(e.target);this.sendData(t,""),e.preventDefault()},addVoucher:function(e){var t=this.serializeForm(e.target);this.sendData(t,""),e.preventDefault()},removeVoucher:function(e){var t="removeVoucher";if(i("#"+t).length)i("#"+t).slideUp(0,function(){i(this).remove()});else{var n=i(e.target),a=n.closest(".voucher-block"),s='<div  id="'+t+'" class="basket-remove-item" style="display: none;"><p><i class="icon-warning"></i><em>'+l.removeVoucher.sure+'</em></p><ul><li ><a href="#" class="btn btn-secondary" data-action="cancel">'+l.removeVoucher.cancel+'</a></li><li ><a href="#0" id="remove-single-item" class="btn btn-primary" data-ref="'+n.attr("name")+'" data-action="confirmVoucherRemoval">'+l.removeVoucher.confirm+"</a></li></ul></div>";a.append(s),i("#"+t).slideDown(0)}return!1},removeDiscountCard:function(e){var t="removeDiscountCardId";if(i("#"+t).length)i("#"+t).slideUp(0,function(){i(this).remove()});else{var n=i(e.target),a=n.closest(".more-info"),s='<div  id="'+t+'" class="basket-remove-item" style="display: none;"><p><i class="icon-warning"></i><em>'+l.removeDiscountCard.sure+'</em></p><ul><li ><a href="#" class="btn btn-secondary" data-action="cancel">'+l.removeDiscountCard.cancel+'</a></li><li ><a href="#0" id="remove-single-item" class="btn btn-primary" data-ref="'+n.attr("name")+'" data-action="confirmVoucherRemoval">'+l.removeDiscountCard.confirm+"</a></li></ul></div>";a.append(s),i("#"+t).slideDown(0)}return e.preventDefault(),!1},confirmVoucherRemoval:function(e){this.disableInputDuringAjax(e.target);var t=(i('input[name="'+i(e.target).data("ref")+'"]'),this.serializeForm(i('input[name="'+i(e.target).data("ref")+'"]')));this.sendData(t,""),e.preventDefault()},addBQcard:function(e){var t=this.serializeForm(e.target);this.sendData(t,""),e.preventDefault()},removeBQcard:function(e){var t=this.serializeForm(e.target);this.sendData(t,""),e.preventDefault()},removeBQvoucher:function(e){this.showVoucherMessage(e)},submitThisOnly:function(e){return 13==e.keyCode?(i(e.target).parents(".addData").is(".addCard")?e.preventDefault():i(e.target).parents(".addData").find(".btn-secondary").click(),!1):void 0},serializeForm:function(e){if("remove-single-item"==i(e).attr("id"))var t=i(document).find(".basket-remove-item").parent().find(".basket-item-remove").find("input[type=submit]");else t="empty-all"==i(e).attr("id")?i(document).find(".basket-buttons").find("input[type=submit].btn-tertiary"):i(e);var n=i("#baskets-form-id"),a=n.serialize();return""!==a&&(a+="&"),a+=t.attr("name")+"="+t.val()},sendData:function(e,t){var n=i("#baskets-form-id"),a=function(e){var t=i(e),n=parseInt(t.find("#count").val()),a=parseFloat(t.find("#price").val());a=0===n?l.basketHeading:"£"+a.toFixed(2),i(".my-basket .basket-items").html(n),i(".price").html(a),i("#content").html("<h1> "+l.basketHeading+" </h1>"+e)};r("body",l.updatingBasket);var s=i.ajax({type:n.attr("method"),url:n.attr("action"),dataType:"html",headers:{"cache-control":"no-cache"},data:e,timeout:8500});return s.done(function(e){t?t().promise().done(function(){a(e)}):a(e),i(".ajax-loading").length&&i(".ajax-loading").remove()}).fail(function(e,t){"timeout"==t?location.reload(!0):"error"==t&&i("#removeBasketMessageBlock .btn[disabled]").removeAttr("disabled").data("flag",""),i(".ajax-loading").length&&i(".ajax-loading").remove()}).complete(function(){i(".basket-totals-special").length>0&&i(".basket-totals-special span, .basket-totals-special em").equalHeights({rows:!0,resize:!0,destroy:!0}),i(".basket-delivery").length>0&&i(".basket-delivery span, .basket-delivery em").equalHeights({rows:!0,resize:!0,destroy:!0})}),s}},diy.instances.relatedEsseentialsProductsSlider=new n({id:"#ui-carousel-product-Dev2_block_500041",paging:!0,controlButtons:{render:!0},selectors:{slider:".carousel-inner",sliderPane:".slider",sliderWindow:".carousel",elems:"li",elem:"li a"}}),diy.instances.youMayAlsoNeedProductsSlider=new n({id:"#ui-carousel-product-Dev2_block_500043",paging:!0,controlButtons:{render:!0},selectors:{slider:".carousel-inner",sliderPane:".slider",sliderWindow:".carousel",elems:"li",elem:"li a"}}),i(document).on("loaded.customRenderer",function(){diy.instances.showMore=new a({id:".product-categories-grid",shownItemsQty:6,increment:6,showMoreText:l.categoryGridShowMore,showLessText:l.categoryGridShowLess,selectors:{items:"li.product-nom"}})});var u=!1;return i("#ui_bandq-club").attr("disabled","true"),i(document).on("click",".addData a.title",function(e){e.preventDefault(),u||(u=!0,i(this).toggleClass("open"),i(this).parents(".addData").find(".more-info").slideToggle("slow",function(){u=!1}))}).on("keyup","#membershipNumber",function(){var e=i("#ui_bandq-club");i(this).val().length>=16&&/^[0-9]+$/.test(i(this).val().replace(/\s+/g,""))?e.removeAttr("disabled"):e.attr("disabled","true")}).on("keydown","#membershipNumber",t),i(document).ready(function(){i("html").is(".lt-ie10")&&i(".btn-clickcollect[disabled], .btn-homedelivery[disabled]").each(function(){i(this).removeAttr("disabled"),i(this).on("click",function(){return!1})})}),i(".basket-totals-special").length>0&&i(".basket-totals-special span, .basket-totals-special em").equalHeights({rows:!0,resize:!0,destroy:!0}),i(".basket-totals-special-delivery").length>0&&i(".basket-totals-special-delivery span, .basket-totals-special-delivery em").equalHeights({rows:!0,resize:!0,destroy:!0}),new d}),define("app/facetsSection",["require","app/common","app/ajaxLoader","lang"],function(e){function t(e){var t=$(e).contents().filter(function(){return 3===this.nodeType});return t.length>0?t[0].nodeValue.trim():null}function i(e){return $.ajax({url:e,type:"GET",dataType:"html"})}function n(){$(".ajax-loading").length&&($(".ajax-loading").remove(),$(".loader").remove(),$(".ajax-loading-parent").removeClass("ajax-loading-parent"))}var a=e("app/common"),s=e("app/ajaxLoader"),o=e("lang"),r=o.facetsSection,l=$.ec(a.object,{constructor:function(e){this.config={id:".refine-search-section",shownItemsQty:4,requestTimeout:0,showMoreSwitchClass:"alt",renderItems:[".wrapper-main"],animateScroll:10,linkHTML:'<div class="show-more">                                    <a class="show-more-link" href="#">                                        <span class="is-visible">'+r.showMore+'</span>                                        <br class="accessibility" />                                        <span class="is-hidden">'+r.showLess+"</span>                                    </a>                                </div>",accessHtmlForFacets:'<span class="accessibility">'+r.accessFacetText+"</span>",selectors:{container:".content-inner",showMoreLinks:".show-more",
facetRows:"li",facetItems:"ul>li>a",facetsClear:"a.js-clear-facets",topAnchorSearchListing:".tab-panels.tabs",topAnchorProductListing:".sideBar",facetRangeForm:".form-range",facetRangeFormUrl:".js-facet-url",accordionContent:".js-accordion-content",resetPriceRange:".js-reset-form-range",disableFacets:".js-range-input",fromPrice:"#from-price",toPrice:"#to-price"},History:{},disableHistory:!1},$.extend(!0,this.config,e||{}),this.focusedFacetText=null,this.containerStates=$(this.config.selectors.container,this.config.id).map(function(){return{id:this.id,truncated:!0,collapsed:!1}}),this.expandedFacetToggles=[],this._init(),this._bindEvents(),this.applyContainerStates()}}),c=l.prototype;return c.reinit=function(){this._unbindEvents(),this._init(),this._bindEvents(),this.applyContainerStates()},c.getContainerState=function(e){return $(this.containerStates).filter(function(){return this.id===e})[0]},c.applyContainerStates=function(){var e,t,i,n,a,s=this.config,o=s.selectors.facetRows,r=s.linkHTML,l=s.showMoreSwitchClass;for(e=0,t=this.containerStates.length;t>e;e++)i=$("#"+this.containerStates[e].id),n=$(o,i).not(":has(.active)"),a=this.containerStates[e],n.length>s.shownItemsQty&&(a&&a.truncated?(this.hideExtraRows(i),i.append(r)):$(r).addClass(l).appendTo(i)),a.collapsed&&(a.collapsed=!1,$(".js-accordion-handle",i.closest(".js-accordion-item")).click())},c.hideExtraRows=function(e){var t=this.config,i=t.selectors.facetRows,n=$(i,e).has(".active"),a=Math.max(0,t.shownItemsQty-n.length);$("<ul></ul>").append(n.clone()).prependTo(e),n.hide(),$("ul",e).eq(1).find(i).filter(":visible").slice(a).hide(),this.getContainerState(e.attr("id")).truncated=!0},c.showAllRows=function(e){var t=e.find("ul"),i=this.config.selectors.facetRows;t.eq(0).remove(),setTimeout(function(){t.eq(1).find(i).show()},0),this.getContainerState(e.attr("id")).truncated=!1},c.accordionToggleHandler=function(e){var t,i=this.getContainerState(e.attr("id"));i.collapsed?(e.next("ul").remove(),i.collapsed=!1):(t=$(this.config.selectors.facetRows,e).filter(":visible:has(.active)"),t.length>0&&$('<ul class="content-inner"></ul>').append(t.clone()).insertAfter(e),i.collapsed=!0)},c.updatedHandler=function(){var e=this;null!==e.focusedFacetText&&$(e.config.selectors.facetItems).filter(function(){return $(this).is(":visible")&&t(this)===e.focusedFacetText}).focus(),e.focusedFacetText=null,$(".ajax-loading").length&&($(".ajax-loading").remove(),$(".ajax-loading-parent").removeClass("ajax-loading-parent"),$(this.config.selectors.topAnchorSearchListing).length?this.scrollTop(this.config.selectors.topAnchorSearchListing):$(this.config.selectors.topAnchorProductListing).length&&this.scrollTop(this.config.selectors.topAnchorProductListing),this.resetPriceBox())},c.renderResults=function(e){var t=this.config.renderItems,i=t.length,n=0,a=null,s=null,o="";for(e=$(e);i>n;n++)s=t[n],a=$(s),o=e.find(s).length?e.find(s):e.filter(s),a.replaceWith(o),diy.instances.customFormElements.reinit();this.reinit()},c.dispatchRequest=function(e){var t=this.dispatchRequest.timeout||null,n=this.config.renderItems,a=this;return this.config.requestTimeout?(t&&clearTimeout(this.dispatchRequest.timeout),void(this.dispatchRequest.timeout=setTimeout(function(){i(e,n).done(function(e){a.renderResults(e)})},this.config.requestTimeout))):i(e,n).done(function(e){a.renderResults(e)})},c._init=function(){this.config.disableHistory||(this.config.History=window.History)},c.updateState=function(e){$("#product-listing").length&&$("#product-listing").attr("data-pull",e),this.config.disableHistory||!this.config.History.enabled?this.dispatchRequest(e):this.config.History.pushState(null,document.title,e)},c._bindEvents=function(){var e=this,i=this.config.selectors;$(e.config.id).on("click.facetsSection",i.showMoreLinks,function(t){var n=$(t.currentTarget),a=e.config.showMoreSwitchClass,s=n.closest(i.container);t.preventDefault(),n.hasClass(a)?e.hideExtraRows(s):e.showAllRows(s),n.toggleClass(a)}).on("click.facetsSection",i.facetItems,function(i){var n,a=$(i.target),o=a.filter(function(){return $(this).not(".accessibility").parents(":header").length<1});return $(this).hasClass("disabled")?!1:(s("body","Loading"),void(o.length>0&&(n=a.closest("a"),i.preventDefault(),e.focusedFacetText=t(this),n.addClass("active"),e.updateState(n.prop("href")))))}).on("keydown.facetsSection",i.facetItems,function(e){32===e.which&&(e.preventDefault(),$(this).trigger("click"))}).on("click.facetsSection",i.facetsClear,function(t){var n=$(t.target);t.preventDefault(),s("body","Clearing refinements"),e.scrollTop(i.topAnchorProductListing),e.updateState(n.prop("href"))}).on("click.facetsSection",".js-accordion-handle",function(t){var i=$(t.target),n=$(".js-accordion-content",i.closest(".js-accordion-item"));e.accordionToggleHandler(n)}).on("submit.facetsSection",i.facetRangeForm,function(t){var a=parseFloat($(i.fromPrice).val()),o=parseFloat($(i.toPrice).val()),r=$(i.facetRangeForm).serialize(),l=$(i.facetRangeForm).attr("action"),c="";t.preventDefault(),s("body","Loading"),a>o?$(i.toPrice).val([a,$(i.fromPrice).val(o)][0]):"",c=$(i.facetRangeForm).data("is-faceted")?l+"&"+r:l+"?&"+r,$(i.facetRangeForm).attr("action",c),$.ajax({url:c,data:r}).success(function(){e.updateState(c)}).fail(function(){n()})}).on("click.facetsSection",i.resetPriceRange,function(t){t.preventDefault(),e.resetPriceBox(!0)}).on("keypress.facetsSection",i.disableFacets,function(e){8!==e.which&&46!==e.which&&isNaN(String.fromCharCode(e.which))&&e.preventDefault()}).on("keyup.facetsSection",i.disableFacets,function(t){t.preventDefault(),e.resetPriceBox()}),$(document).on("updated.ajaxHistory",$.proxy(e.updatedHandler,e))},c.resetPriceBox=function(e){var t,i=$(this.config.selectors.facetRangeForm),n=this.config.selectors.accordionContent,a=this.config.selectors.resetPriceRange,s=i.closest(n).find("ul>li>a>span"),o=$(a).find("span");i.closest(n).find("ul>li>a.active").length>0?(i.find('[type="number"], '+a+" ").attr("disabled","disabled").addClass("disabled"),i.find('[type="submit"]').attr("disabled","disabled"),i.find('[type="number"]').val("")):(i.find('[type="number"], '+a+" ").removeAttr("disabled").removeClass("disabled"),i.find('[type="submit"]').removeAttr("disabled")),i.find('[type="number"]').filter(function(){return this.value}).length!=-0?i.closest(n).find("ul>li>a").addClass("disabled"):i.closest(n).find("ul>li>a").removeClass("disabled"),e&&(i.find('[type="number"], '+a+" ").removeAttr("disabled").removeClass("disabled"),i.find('[type="submit"]').removeAttr("disabled"),i.find('[type="number"]').val("")),0===i.find('[type="number"]').filter(function(){return!this.value}).length?i.find('[type="submit"]').removeAttr("disabled"):i.find('[type="submit"]').attr("disabled","disabled"),t=i.closest(n).find("ul>li>a.disabled"),s.remove(),t.append(this.config.accessHtmlForFacets),o.length>0?o.remove():"",$(a).hasClass("disabled")?$(a).append(this.config.accessHtmlForFacets):""},c.scrollTop=function(e){var t=this;$(e).length&&$("html, body").animate({scrollTop:$(e).offset().top},t.config.animateScroll)},c._unbindEvents=function(){var e=this.config.selectors;$(this.config.id).off("click.facetsSection",e.showMoreLinks).off("click.facetsSection",e.facetItems).off("click.facetsSection",e.facetsClear)},l}),define("app/loaderPlaceholder",["require","app/templates"],function(e){var t=e("app/templates"),i=function(e){this.config={id:"",html:'<div class="loader"></div>'},$.extend(!0,this.config,e||{}),this.$={},this._init()};return i.prototype={_init:function(){this.template=new t,this.$.holder=$(this.config.id),this.show()},getHolderInfo:function(){var e=this.$.holder,t=e.offset();return{position:"absolute",top:t.top,left:t.left,width:e.outerWidth(),height:e.outerHeight(),zIndex:999}},hide:function(){return this.$.loader.length&&this.$.loader.remove(),this},show:function(){var e=$(this.config.html);return e.css(this.getHolderInfo()).appendTo($(document.body)),this.$.loader=e,this}},i}),define("app/ajaxHistory",["require","app/common","app/loaderPlaceholder"],function(e){function t(e,t){var i=[];return $.each(t,function(e,t){$(t).length>0&&i.push(new n({id:t}))}),$.ajax({url:e,type:"GET",dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},success:function(){$.each(i,function(e,t){t.hide(),delete t})}})}var i=e("app/common"),n=e("app/loaderPlaceholder"),a=$.ec(i.object,{constructor:function(t){this.config={timeout:0,renderItems:[".wrapper-main"],History:{},updateHistory:!0,modulesToReinit:[],callback:null},$.extend(!0,this.config,t||{}),this._bindEvents(),e(["history"])}}),s=a.prototype;return s._bindEvents=function(){var e=this;$(window).bind("statechange",function(){var t=window.History.getState();e.config.updateHistory&&(void 0===t.data.reload||t.data.reload===!0)&&(e.config.updateHistory=!1,e.dispatchRequest(t.url))})},s.dispatchRequest=function(e){var i=this.dispatchRequest.timeout||null,n=this.config.renderItems,a=this;return this.config.requestTimeout?(i&&clearTimeout(this.dispatchRequest.timeout),void(this.dispatchRequest.timeout=setTimeout(function(){t(e,n).done(function(e){a.renderResults(e),a.config.callback&&a.config.callback(e)})},this.config.requestTimeout))):t(e,n).done(function(e){a.renderResults(e),a.config.callback&&a.config.callback(e)})},s.renderResults=function(e){for(var t,i=this.config.renderItems,n=i.length,a=0,s=null,o=null,r="",l=$(e);n>a;a++)o=i[a],s=$(o),r=l.find(o).length?l.find(o):l.filter(o),s.replaceWith(r);for(t=l.find("title").length?l.find("title"):l.filter("title"),t.length>0&&t.text().length>0&&(document.title=t.text()),a=0;a<this.config.modulesToReinit.length;a++)this.config.modulesToReinit[a].reinit();this.config.updateHistory=!0,$(document).trigger("updated.ajaxHistory")},a}),define("app/sortingFilter",["require","app/common","app/ajaxLoader","lang"],function(e){function t(e,t,i){var n=new RegExp("([?|&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+i+"$2"):e+a+t+"="+i}function i(e,t){return e=$(e),$.ajax({url:e.attr("action"),type:e.attr("method"),dataType:"html",data:t?t:e.serialize()})}var n,a,s=e("app/common"),o=e("app/ajaxLoader"),r=e("lang"),l=r.sortingFilter;return n=$.ec(s.object,{constructor:function(e){this.config={id:".filter-result",form:".filter-result",requestTimeout:500,renderItems:[".section-holder-content"],selectors:{select:"select",sortBy:"#ui-sort-by",resultsQty:"#ui-results-qty",showAllLink:".sort-show-all"},History:{},disableHistory:!1},this.$={},this.activeId=null,$.extend(!0,this.config,e||{}),this._loadObjects(!0),this._init(),this._bindEvents()}}),a=n.prototype,a._init=function(){this.config.disableHistory||(this.config.History=window.History)},a._bindEvents=function(){var e=this.config.selectors;$(document).on("change.sortingfilter",e.select,$.proxy(this.updateStateFormData,this)).on("click.sortingfilter",e.showAllLink,$.proxy(this.updateState,this)).on("updated.ajaxHistory",$.proxy(this.updatedHandler,this))},a.updateStateFormData=function(e){var i,n=$(e.target),a=n.closest("form"),s=a.attr("action");e.preventDefault(),o("#content",l.loading),this.activeId=n.attr("id"),this.config.disableHistory||!this.config.History.enabled?this.dispatchRequest(s,a):(i=a.serialize(),$.each(i.split("&"),function(e,i){var n=i.split("=");s=t(s,n[0],n[1])}),this.config.History.pushState(null,document.title,s))},a.updateState=function(e){var t=$(e.target),i=t.prop("href"),n=t.closest("form");e.preventDefault(),this.activeId=t.attr("id"),this.config.disableHistory||!this.config.History.enabled?this.dispatchRequest(i,n):this.config.History.pushState(null,document.title,i)},a.dispatchRequest=function(e,t){var n=e?e.split("?"):[],a=n.length-1?n[n.length-1]:!1,s=this.dispatchRequest.timeout||null,o=this.config.renderItems,r=this;return this.config.requestTimeout?(s&&clearTimeout(this.dispatchRequest.timeout),void(this.dispatchRequest.timeout=setTimeout(function(){i(t,a,o).done(function(e){r.renderResults(e)})},this.config.requestTimeout))):i(t,a,o).done(function(e){r.renderResults(e)})},a.renderResults=function(e){var t=this.config.renderItems,i=t.length,n=0,a=null,s=null,o="";for(e=$(e);i>n;n++)s=t[n],a=$(s),o=e.find(s).length?e.find(s):e.filter(s),a.replaceWith(o),diy.instances.customFormElements.reinit();$("#"+this.activeId).focus(),this.activeId=null},a.updatedHandler=function(){$("#"+this.activeId).focus(),this.activeId=null},n}),define("app/productView",["require","app/common","app/ajaxCalls","config","lang","app/tooltip"],function(e){var t,i=e("app/common"),n=e("app/ajaxCalls"),a=e("config").app,s=e("lang"),o=s.productView;return diy.instances.tooltip=e("app/tooltip"),t=$.ec(i.object,{constructor:function(e){this.config={maxNumToCompare:4,selectors:{comparisonWrap:".product-comparison",compareNowCheckbox:".compare-now input:checkbox",clearComparisonLink:"#ui-clear-comparison"},compareNowDefaultHTML:o.compareNowDefaultHTML},$.extend(!0,this.config,e||{}),this.$={},this._loadObjects(!1),this._init(),this._bindEvents()}}),$.extend(t.prototype,{_init:function(){$(".product-list-view > li:last-child").addClass("last-child")},compareNowActiveHTML:function(){var e=$("#compare_backurl").val();return'<a href="/product/productcomparison/?backurl='+encodeURIComponent(e)+'">'+o.compareNow+"</a>"},setCompareNowLabel:function(){var e=this;this.$.compareNowCheckbox.filter(":checked").map(function(){return $('label[for="'+$(this).attr("id")+'"]')}).each(function(){$(this).html(e.compareNowActiveHTML())})},getCompareCount:function(){return $.ajax({type:"GET",url:a.productView.compareCountUrl,dataType:"json",async:!0,cache:!1})},clearComparison:function(){var e=this;n.getData({method:"GET",url:"/common/product/tile/clearComparisonAjax.jsp",format:"html",data:{},timeout:5e4}).done(function(){e.$.compareNowCheckbox.filter(":checked").each(function(){var t=$(this);t.prop("checked",!1),t.parent().removeClass("checked"),$('label[for="'+t.attr("id")+'"]').html(e.config.compareNowDefaultHTML)}),e.$.comparisonWrap.addClass("is-hidden")})},reinit:function(){this._unbindEvents(),this._loadObjects(!1),this._init(),this._bindEvents()},_bindEvents:function(){var e=this,t=this.config.selectors;$(document).on("click.productView",t.compareNowCheckbox,function(){var t=$(this);e.getCompareCount().done(function(i){var a=i.count;if(t.prop("checked")){if(a>=e.config.maxNumToCompare)return t.prop("checked",!1),t.parent().removeClass("checked"),void diy.instances.tooltip.createTooltip(t.parent()).on("tooltipClosed",function(){$(this).remove()});a>=1&&(e.$.comparisonWrap.removeClass("is-hidden"),e.$.compareNowCheckbox.filter(":checked").map(function(){return $('label[for="'+$(this).attr("id")+'"]')}).each(function(){$(this).html(e.compareNowActiveHTML())}))}else $('label[for="'+t.attr("id")+'"]').html(e.config.compareNowDefaultHTML),2>=a&&(e.$.comparisonWrap.addClass("is-hidden"),e.$.compareNowCheckbox.filter(":checked").map(function(){return $('label[for="'+$(this).attr("id")+'"]')}).each(function(){$(this).html(e.config.compareNowDefaultHTML)}));n.getData({method:"POST",url:"/common/product/tile/compareAddRemove.jsp",format:"json",data:{action:t.prop("checked")?"add":"remove",productId:t.val()},timeout:5e4})})}).on("click.productView",t.clearComparisonLink,function(t){t.preventDefault(),e.clearComparison(this.href)})},_unbindEvents:function(){var e=this.config.selectors;$(document).off("click.productView",e.compareNowCheckbox).off("click.productView",e.clearComparisonLink)}}),t}),define("app/tabs",["require","app/common","app/accordion","app/breakpoint"],function(e){function t(e,t,i){var n=new RegExp("([?|&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+i+"$2"):e+a+t+"="+i}var i=e("app/common"),n=e("app/accordion"),a=e("app/breakpoint"),s=$.ec(i.object,{constructor:function(e){this.config={id:".tab-panels",currentTabClass:"current",currentInfoPosition:"prepend",currentInfoClass:"accessibility",tabsListClass:"tabs-list",expandedClass:"is-expanded",collapsedClass:"is-collapsed",accordionClass:"accordion",tabClass:"tabs",firstNavItemClass:"first",lastNavItemClass:"last",position:"top",currentInfoText:"current tab: ",insertAt:null,selectors:{tabHeader:".tab-header",tabPanel:".tab-panel"},History:{},disableHistory:!0,mode:"tabs",breakpoints:[{mediaQuery:"screen and (max-width: 480px)",settings:{mode:"accordion"}},{mediaQuery:"screen and (min-width: 481px)",isDefault:!0,settings:{mode:"tabs"}}]},e=e||{},$.extend(!0,this.config,e),e.breakpoints&&(this.config.breakpoints=e.breakpoints),this.$={},this.$.tabList=null,this.state="",this.currentIndex=0,this.initTabsFlag=!1,this.initAccordionFlag=!1,this._loadObjects(!0),this.currentStyle=!1,this.init()}});s.prototype=$.extend(s.prototype,{init:function(){var e=this;if(this.config.disableHistory||(this.config.History=window.History),this.config.breakpoints){var t=new a({noMatch:function(){(e.initTabsFlag||e.initAccordionFlag)&&e.destroy()}});_.each(this.config.breakpoints,function(i){t.register(i.mediaQuery,{match:function(){e.config.mode;switch(e.config=$.extend(!0,{},e.config,i.settings),e.config.mode){case"tabs":e.initTabs();break;case"accordion":e.initAccordion()}}},i.isDefault)})}else this.initTabs()},reinit:function(){this.destroy(),this._loadObjects(!0),this.init()},initAccordion:function(){"accordion"!==this.currentStyle&&(this.initTabsFlag?this.changeToAccordion():this.setPanelState(),this.accordion||(this.accordion=new n({container:this.config.id,toggle:this.config.id+" "+this.config.selectors.tabHeader,target:this.config.selectors.tabPanel,context:".tab-panels section",inverse:!1})),$(this.config.id).addClass(this.config.accordionClass).removeClass(this.config.tabClass),this.initAccordionFlag=!0,this.currentStyle="accordion")},initTabs:function(){var e=this,t={top:"prepend",bottom:"append",before:"before",after:"after"},i=$('<ul class="'+e.config.tabsListClass+'" role="tablist"/>');if($(e.config.id).addClass(e.config.tabClass).removeClass(e.config.accordionClass),e.$.tabPanel.attr("role","tabpanel"),!e.initTabsFlag){e.$.tabHeader.each(function(t){var n=Math.floor(1e16*Math.random()),a="tab-"+($(this).attr("id")||n),s=e.$.tabPanel.eq(t).attr("id")||"tabpanel-"+n,o=$("<li>",{id:a,role:"tab","aria-controls":s,"aria-selected":!1,tabindex:-1}).html($(this).html());i.append(o),e.$.tabPanel.eq(t).attr({id:s,"aria-labelledby":a})}),i.addClass("tabamount"+e.$.tabHeader.length),e.$.tabList=i;var n=e.config.insertAt?$(e.config.insertAt):e.$.id;n[t[e.config.position]](i),e.bindTabEvents(),e.initTabsFlag=!0}this.accordion?e.changeToTabs():e.setActiveTab(this.currentIndex),this.currentStyle="tabs"},changeToAccordion:function(){this.$.tabHeader.removeClass(this.config.expandedClass).addClass(this.config.collapsedClass).eq(this.currentIndex).removeClass(this.config.collapsedClass).addClass(this.config.expandedClass),null!==this.config.insertAt&&this.$.tabList.hide(),$(this.config.id).addClass(this.config.accordionClass).removeClass(this.config.tabClass)},changeToTabs:function(){var e=$("."+this.config.expandedClass).index(this.config.selectors.tabHeader)||0;this.accordion&&(this.accordion.destroy(),this.accordion=null),this.setActiveTab(e),null!==this.config.insertAt&&this.$.tabList.show(),$(this.config.id).addClass(this.config.tabClass).removeClass(this.config.accordionClass)},bindTabEvents:function(){$("> li",this.$.tabList).on("click.tabs",$.proxy(this.onTabLinkClick,this)).on("keydown.tabs",$.proxy(this.onTabLinkKeyup,this))},unbindTabEvents:function(){$("> li",this.$.tabList).off(".tabs")},destroy:function(){this.unbindTabEvents(),this.$.tabList.remove(),this.$.id.removeClass(this.config.tabClass+" "+this.config.accordionClass),this.$.tabHeader.removeClass(this.config.expandedClass+" "+this.config.collapsedClass),this.$.tabPanel.removeClass(this.config.expandedClass+" "+this.config.collapsedClass),this.accordion&&(this.accordion.destroy(),this.accordion=null),this.initTabsFlag=!1,this.initAccordionFlag=!1},setActiveTab:function(e){var i,n,a=this;if("number"==typeof e?(n=$("> li",this.$.tabList).eq(e),i=e):(n=$(e),i=n.index()),n.addClass(a.config.currentTabClass).attr({tabindex:0,"aria-selected":!0}).siblings().removeClass(a.config.currentTabClass).attr({tabindex:-1,"aria-selected":!1}),this.setPanelState(i),!a.config.disableHistory&&a.config.History.enabled){var s=History.getState(),o=s.url,r=n.prop("id");o=t(o,"tab",r),a.config.History.replaceState({reload:!1},document.title,o)}this.currentIndex=i},setPanelState:function(e){var t=this;e=e||0,t.$.tabPanel.filter(":visible").attr({"aria-hidden":!0}).removeClass(t.config.expandedClass).addClass(t.config.collapsedClass),t.$.tabPanel.eq(e).attr({"aria-hidden":!1}).removeClass(t.config.collapsedClass).addClass(t.config.expandedClass),t.$.tabHeader.addClass(this.config.collapsedClass).eq(e).removeClass(this.config.collapsedClass).addClass(this.config.expandedClass),$(document).trigger("changed.tabs",[t.$.tabPanel.eq(e)])},showAccessibleTabSelector:function(e,t){var i=$(e);if(i.on("click"),this.scrollTo(e),t&&$(window).width()>=768){var n=$(window).scrollTop();$(window).scrollTop(n-2*t)}},onTabLinkClick:function(e){e.preventDefault(),$(e.target).is("span")?this.setActiveTab($(e.target).parents("li")):this.setActiveTab(e.target)},onTabLinkKeyup:function(e){if(!e.keyCode||/(37|38|39|40)/.test(e.keyCode)){e.preventDefault();var t,i=$(e.target),n=$("> li",this.$.tabList);return(37===e.keyCode||38===e.keyCode)&&(t=i.prev(),t.length||(t=n.eq(n.length-1))),(39===e.keyCode||40===e.keyCode)&&(t=i.next(),t.length||(t=n.eq(0))),36===e.keyCode&&(t=n.eq(0)),35===e.keyCode&&(t=n.eq(n.length-1)),t?void t.trigger("click").focus():void 0}},scrollTo:function(e){var t=$(e);if(t.length>0){t.click();var i=t.offset();window.scrollTo(i.left,i.top)}}});(function(){for(var e={},t=window.location.search.substring(1),i=t.split("&"),n=0;n<i.length;n++){var a=i[n].split("=");if("undefined"==typeof e[a[0]])e[a[0]]=a[1];else if("string"==typeof e[a[0]]){var s=[e[a[0]],a[1]];e[a[0]]=s}else e[a[0]].push(a[1])}return e})();return s}),define("app/accessibility-links",["require","lang"],function(e){var t=e("lang"),i=t.accessibilityLinks,n=function(e){this.settings=$.extend({linkZones:[{location:"#ui-products-panel",links:[{text:i.articleText,target:"#ui-articles-panel",opensTab:"#tab-ui-articles",attachIDTo:null,id:"#accessible-ui-articles-panel-link"},{text:i.menuText,target:"#local-nav-products",opensTab:null,attachIDTo:"#ui-products-panel .sideBar",id:"linkID"}]},{location:"#ui-articles-panel",links:[{text:i.productText,target:"#ui-products-panel",opensTab:"#tab-ui-products",attachIDTo:null,id:"#accessible-ui-products-panel-link"},{text:i.menuText,target:"#local-nav-articles",opensTab:null,attachIDTo:"#ui-articles-panel .sideBar",id:"linkID"}]}],menuIdsExist:!1,skipLinkHtml:'<nav class="skip-nav" role="navigation">                     <ul>                     </ul>                     </nav>'},e),this.addLinks()};return n.prototype={addLinks:function(){var e=this.settings.skipLinkHtml;$.each(this.settings.linkZones,function(t,i){var n=i.location;$(i.location+" *:first").before(e),$.each(i.links,function(e,t){$(n).find(".skip-nav ul").append('<li><a id="'+t.id.replace("#","")+'" href="'+t.target+'">'+t.text+"</a></li>"),t.attachIDTo&&($(t.target).length||$(t.attachIDTo).attr("id",t.target.replace("#",""))),t.opensTab&&$(document).on("click.showTabAndFocus",t.id,function(){diy.instances.tabs.showAccessibleTabSelector(t.opensTab)})})})}},n}),define("app/orientation-watcher",["require"],function(e){var t=function(){this.lastOrientation=this.getOrientation(),this.bindHandlers()};return t.prototype.getScreenSizes=function(){var e=$(window),t=e.height(),i=e.width();return[t,i]},t.prototype.getOrientation=function(){var e,t=this.getScreenSizes();return e=t[0]>t[1]?"portrait":"landscape"},t.prototype.bindHandlers=function(){var e,t=this;window.matchMedia&&window.matchMedia("all").addListener?(e=window.matchMedia("(orientation: portrait)"),e.addListener(function(e){e.matches?$(document).trigger("orientationChange",["portrait"]):$(document).trigger("orientationChange",["landscape"])})):$(window).resize(function(){var e=t.getOrientation();t.lastOrientation!==e&&$(document).trigger("orientation",[e])}),$(document).on("orientation",function(e,i){t.lastOrientation=i,$(document).trigger("orientationChange",[i])})},new t}),define("pages/searchResults",["require","app/common","app/facetsSection","app/ajaxHistory","app/sortingFilter","app/productView","app/tabs","app/accessibility-links","app/toggletarget","app/jquery.equalheights","app/orientation-watcher"],function(e){var t,i,n=(e("app/common"),e("app/facetsSection")),a=e("app/ajaxHistory"),s=e("app/sortingFilter"),o=e("app/productView"),r=e("app/tabs"),l=e("app/accessibility-links"),c=[];e("app/toggletarget"),e("app/jquery.equalheights"),e("app/orientation-watcher"),diy.instances.accessibleLinks=new l,t=[diy.instances.customFormElements],diy.instances.searchResultsProductsFilter=new s({id:"#ui-products-panel",form:"#ui-products-panel .filter-result"}),diy.instances.searchResultsArticlesFilter=new s({id:"#ui-articles-panel",form:"#ui-articles-panel .filter-result"}),diy.instances.tabs=new r({disableHistory:!1,breakpoints:null}),diy.instances.facetsSectionProductSelection=new n({id:"#ui-products-panel .pillbox"}),diy.instances.facetsSectionProductCategories=new n({id:"#ui-products-panel .menus"}),diy.instances.facetsSectionProductFacets=new n({id:"#ui-products-panel.is-expanded .facets"}),diy.instances.facetsSectionArticlesFacets=new n({id:"#ui-articles-panel.is-expanded .facets"}),diy.instances.productView=new o,t.push(diy.instances.facetsSectionProductSelection,diy.instances.facetsSectionProductCategories,diy.instances.facetsSectionProductFacets,diy.instances.facetsSectionArticlesFacets,diy.instances.productView,diy.instances.pagination),i=new a({renderItems:[".login-nav",".search-msg","#ui-products-panel .main-section-holder","#ui-products-panel .sideBar","#ui-articles-panel .main-section-holder","#ui-articles-panel .sideBar",'meta[name="description"]:first'],updateHistory:!0,modulesToReinit:t,callback:function(e){$("#tab-ui-products").text($(e).find(".tab-header:first").text()),$("#tab-ui-articles").text($(e).find(".tab-header:last").text())}}),$.toggleTarget({toggle:".js-facets-handle",target:".js-facets-content",context:".facets",activeClass:"is-expanded",inactiveClass:"is-collapsed",inverse:!0,useAria:!0}),$(document).on("active.toggletarget inactive.toggletarget",".js-facets-handle",function(e){var t=$(e.target).attr("aria-controls");"active"===e.type?c.push(t):"inactive"===e.type&&(c=$.grep(c,function(e){return e!==t}))}).on("updated.ajaxHistory",function(){$.each(c,function(){$("[aria-controls="+this+"]").removeClass("is-collapsed").addClass("is-expanded"),$("#"+this).removeClass("is-collapsed").addClass("is-expanded")}),$(".pagination:first").offset().top>=screen.height&&$("html, body").animate({scrollTop:$(".pagination:first").offset().top},100)}).on("click.showTabAndFocus","#skip-to-products, #skip-to-articles",function(){"skip-to-products"===$(this).attr("id")?diy.instances.tabs.showAccessibleTabSelector("#ui-products"):diy.instances.tabs.showAccessibleTabSelector("#ui-articles"),$($(this).attr("href")).focus()}).on("orientationChange",function(){var e=navigator.userAgent.toLowerCase();e.indexOf("android")>-1;$(".tooltip-text").length&&($("body,html").addClass("androidFix"),$(".tooltip-text").is(":visible")?$("html, body").delay(100).animate({scrollTop:$(".tooltip-text:first").offset().top-100},100,function(){$("body,html").removeClass("androidFix")}):$("html, body").delay(100).animate({scrollTop:$(".tooltip-text:first").parents("li").find("img").offset().top.top-200},100,function(){$("body,html").removeClass("androidFix")}))}),$(".product-grid-view .wrap-product-grid").length>0&&$(".product-grid-view .wrap-product-grid").equalHeights({rows:!0,resize:!0,destroy:!0}),$(".product-categories-grid .category-title").length&&$(".product-categories-grid .category-title").equalHeights({resize:!0,rows:!0})}),define("pages/productListing",["require","app/common","app/facetsSection","app/ajaxHistory","app/sortingFilter","app/productView","app/safeLog","app/toggletarget","app/jquery.equalheights","app/orientation-watcher","app/jquery.equalheights"],function(e){var t,i=(e("app/common"),e("app/facetsSection")),n=e("app/ajaxHistory"),a=e("app/sortingFilter"),s=e("app/productView"),o=(e("app/safeLog"),[diy.instances.customFormElements]),r=[];e("app/toggletarget"),e("app/jquery.equalheights"),e("app/orientation-watcher"),e("app/jquery.equalheights"),diy.instances.searchResultsFilter=new a,diy.instances.facetsSectionProductSelection=new i({id:".sideBar .pillbox"}),diy.instances.facetsSectionProductCategories=new i({id:".sideBar .menus"}),diy.instances.facetsSectionProductFacets=new i({id:".sideBar .facets"}),diy.instances.productView=new s,o.push(diy.instances.facetsSectionProductSelection,diy.instances.facetsSectionProductCategories,diy.instances.facetsSectionProductFacets,diy.instances.productView,diy.instances.pagination),t=new n({renderItems:[".main-section-holder",".sideBar",".login-nav",'meta[name="description"]:first'],updateHistory:!0,modulesToReinit:o}),$.toggleTarget({toggle:".js-facets-handle",target:".js-facets-content",context:".facets",activeClass:"is-expanded",inactiveClass:"is-collapsed",inverse:!0,useAria:!0}),$(document).on("active.toggletarget inactive.toggletarget",".js-facets-handle",function(e){var t=$(e.target).attr("aria-controls");"active"===e.type?r.push(t):"inactive"===e.type&&(r=$.grep(r,function(e){return e!==t}))}).on("updated.ajaxHistory",function(){$.each(r,function(){$("[aria-controls="+this+"]").removeClass("is-collapsed").addClass("is-expanded"),$("#"+this).removeClass("is-collapsed").addClass("is-expanded")})}).on("orientationChange",function(){var e=navigator.userAgent.toLowerCase();e.indexOf("android")>-1;$(".tooltip-text").length&&($("body, html").addClass("androidFix"),$(".tooltip-text").is(":visible")?$("html, body").delay(100).animate({scrollTop:$(".tooltip-text:first").offset().top-100},100,function(){$("body, html").removeClass("androidFix")}):$("html, body").delay(100).animate({scrollTop:$(".tooltip-text:first").parents("li").find("img").offset().top-200},100,function(){$("body, html").removeClass("androidFix")}))}),$(".product-grid-view .wrap-product-grid").length>0&&$(".product-grid-view .wrap-product-grid").equalHeights({rows:!0,resize:!0,destroy:!0})}),define("pages/productDetails",["require","app/common","app/tabs","app/slider","app/showMore","app/mediaplayer","app/qty-field","app/ajaxLoader","underscore","app/orientation-watcher","app/jquery.equalheights"],function(e){function t(e){var t,i={},n=/[?&]?([^=]+)=([^&]*)/g;for(e=e.split("+").join(" ");t=n.exec(e);)i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return i}var i,n,a,s=(e("app/common"),e("app/tabs")),o=(e("app/slider"),e("app/showMore")),r=(e("app/mediaplayer"),e("app/qty-field")),l=e("app/ajaxLoader"),c=e("underscore"),d={target:"#productQuantity"},u=(new r(d),""),h=$(".product-summary-fixed"),p="is-fixed",f="is-hidden",g=$(".product-summary-fixed .buying-option-bar"),m=($(".product-summary-fixed .price-container"),[$(".site-header"),$(".breadcrumb-tools"),$(".message.notice"),$(".product-summary-fixed"),$(".addtocart-bar.is-hidden-on-less-than-ipad")]),v=0;e("app/orientation-watcher"),e("app/jquery.equalheights"),diy.instances.tabs=new s,i=t(document.location.search),i.tab&&(i.tab.indexOf("tab-")&&(u="tab-"),diy.instances.tabs.showAccessibleTabSelector("#"+u+i.tab)),diy.instances.showMore=new o({id:"#ui-product-bundles",className:"show-more-link",showMoreText:"See all items in bundle",showLessText:"Hide items in the bundle",selectors:{items:".product-bundle-item"}}),$(document).on("orientationChange",function(){$(".bv-dropdown-in").remove()}),$(".review-write").on("click",function(e){e.stopPropagation(),$BV.ui("rr","submit_review",{})}),l(".pdp-viewer","loading image viewer"),
$(m).each(function(){v+=$(this).outerHeight()}),$(document).ready(function(){$(window).scrollTop(0)}),n=c.debounce(function(){$(window).scrollTop()>v?(h.addClass(p),g.removeClass(f)):(h.removeClass(p),g.addClass(f))},10),$(window).on("scroll",n),a=h.outerHeight(!0),$(".star-rating, .review-count").click(function(e){e.preventDefault(),diy.instances.tabs.showAccessibleTabSelector("#tab-reviews, #reviews",a)}),$("p.product-more-info a").click(function(e){e.preventDefault(),diy.instances.tabs.showAccessibleTabSelector("#tab-product-details, #product-details",a)}),$(".buying-option-button").click(function(){$("html, body").animate({scrollTop:$("#site-navigation").offset().top},1e3)})}),define("pages/landingRoom",["require","app/tabs","app/common","app/jquery.equalheights"],function(e){var t=e("app/tabs");e("app/common"),e("app/jquery.equalheights"),diy.instances.tabs=new t,$(".product-categories-grid .category-title").equalHeights()}),define("app/showMoreGrid",["require","config","app/slider","app/showMore","lang","app/jquery.equalheights"],function(e){var t,i=(e("config").app,e("app/slider")),n=e("app/showMore"),a=e("lang"),s=a.showMoreLessGrid;return e("app/jquery.equalheights"),t=function(e){this.settings=$.extend(!0,{id:".product-details-grid",showMore:{showMoreText:s.showMore,showLessText:s.showLess,breakpoints:[{mediaQuery:"screen and (min-width: 30em)",isDefault:!0,settings:{shownItemsQty:3,increment:3}}],selectors:{items:"li"}},slider:{useCSS:!1,touch:!0,breakpoints:[{mediaQuery:"screen and (max-width: 30em)",settings:{pageSize:1}}],selectors:{slider:".product-details-grid-inner",sliderPane:".grid",elems:"li",elem:"li"}},selectors:{itemWrap:".product-wrap"}},e);this._init(),this._bindEvents()},t.prototype={_init:function(){var e,t,a=$(this.settings.id);a.length>0&&(e=a.data("showMoreGrid"),e||(t=$(this.settings.selectors.itemWrap,a),this.settings.showMore.id=this.settings.slider.id=a,t.length>0&&t.equalHeights({rows:!0,resize:!0}),this.showMore=new n(this.settings.showMore),this.slider=new i(this.settings.slider),a.data("showMoreGrid",this)))},_bindEvents:function(){$(document).on("loaded.customRenderer.showmore",$.proxy(this._init,this))}},t}),define("pages/landingCategory",["require","app/tabs","app/showMoreGrid","app/facetsSection","app/ajaxHistory","app/sortingFilter","app/productView","app/common","app/jquery.equalheights","app/toggletarget","app/orientation-watcher"],function(e){var t,i,n,a=e("app/tabs"),s=e("app/showMoreGrid"),o=e("app/facetsSection"),r=e("app/ajaxHistory"),l=e("app/sortingFilter"),c=e("app/productView");e("app/common"),e("app/jquery.equalheights"),e("app/toggletarget"),e("app/orientation-watcher"),diy.instances.tabs=new a,new s,$(".product-brands-grid a").hover(function(){$(this).find("img").toggleClass("is-visible").toggleClass("is-hidden")}),$(".product-categories-grid .category-title").length&&$(".product-categories-grid .category-title").equalHeights({resize:!0,rows:!0}),t=[diy.instances.customFormElements],diy.instances.searchResultsFilter=new l,diy.instances.facetsSectionProductSelection=new o({id:".sideBar .pillbox"}),diy.instances.facetsSectionProductFacets=new o({id:".sideBar .facets"}),diy.instances.productView=new c,t.push(diy.instances.facetsSectionProductSelection,diy.instances.facetsSectionProductFacets,diy.instances.productView,diy.instances.pagination),i=new r({renderItems:[".main-section-holder",".sideBar",".login-nav",'meta[name="description"]:first'],updateHistory:!0,modulesToReinit:t}),n=[],$.toggleTarget({toggle:".js-facets-handle",target:".js-facets-content",context:".facets",activeClass:"is-expanded",inactiveClass:"is-collapsed",inverse:!0,useAria:!0})}),define("app/ajaxlist",["require","underscore","lib/jquery.mustache","lang"],function(e){var t=e("underscore"),i=e("lib/jquery.mustache"),n=e("lang"),a=n.ajaxList,s=function(e){var t=this.settings=$.extend(!0,{container:"#ui-ajaxlist",counter:"#ui-ajaxlist-counter",wrap:".prompt-confirmdelete-wrap",overlay:".prompt-confirmdelete-overlay",controls:".prompt-confirmdelete-controls",isTable:!1,notifier:null,dataUrl:null,hideOnEmpty:"",templates:{confirm:"#ui-template-listitem-confirm",noResults:"#ui-template-list-empty"}},e);if(!t.container)throw new Error(a.containerMissing);this.$container=$(t.container),this.jxhr=null,this.notifier=t.notifier,this.row={count:0,data:null,$current:null,$original:null},this.template={confirm:null,noResults:null},this.init()};return s.prototype={init:function(){var e=this.settings.templates,t=this.$container.data(),i=$(e.confirm),n=$(e.noResults);i.length>0&&(this.template.confirm=this.parseTemplate(i)),n.length>0&&(this.template.noResults=this.parseTemplate(n)),this.dataUrl=this.settings.dataUrl||t&&t.url||this.$container.attr("action")||$("form",this.$container).attr("action"),this.setCounter(),this.bindHandlers()},bindHandlers:function(){this.$container.on("click.ajaxlist",'[data-action="confirm"]:not([disabled])',$.proxy(this.confirm,this)).on("click.ajaxlist",'[data-action="cancel"]:not([disabled])',$.proxy(this.cancel,this)).on("click.ajaxlist",'[data-action="remove"]:not([disabled])',$.proxy(this.remove,this)).on("click.ajaxlist",'[data-action="update"]:not([disabled])',$.proxy(this.update,this)).on("keypress.ajaxlist","[data-submitted-by]",$.proxy(this.captureSubmit,this)).on("list-updated.ajaxlist",$.proxy(this.setCounter,this))},remove:function(e){function t(){var e=i.template.noResults&&$(i.template.noResults());e&&e.hide().prependTo(i.$container).fadeIn(150)}e.preventDefault();var i=this,n=this.settings,a=this.$container,s=this.row.$current,o=this.serializeForm(e.target);$("input, select, button",s).attr({disabled:"disabled"}),$('[data-action="cancel"]',s).addClass("disabled"),this.sendData(o,function(e){$(n.wrap,s).animate({height:0,opacity:0},150,function(){s.remove(),i.row.count--,0===i.row.count&&(n.isTable&&(n.hideOnEmpty+=n.hideOnEmpty?",table":"table"),n.hideOnEmpty?$(n.hideOnEmpty,i.$container).fadeOut(150).promise().done(t):t(),i.$container.trigger("list-emptied",[e])),i.notifier&&i.notifier.close(),a.trigger("item-removed",[e]).trigger("list-updated")})})},cancel:function(e){if(e&&e.preventDefault(),!this.jxhr||"pending"!==this.jxhr.state()){var t=this.settings,i=this.$container,n=this.row.$current,a=this.row.$original,s=$(t.wrap,n);$(t.overlay,n).fadeTo(150,0),s.animate({height:s.data().origHeight},150,function(){n.replaceWith(a),i.trigger("list-cancelled")}),this.row.$current=null,i.trigger("action-cancelled")}},confirm:function(e){e.preventDefault();var t={},i=$(e.target).closest("[data-item-id]"),n=i.clone();if(this.row.$current&&this.cancel(),this.settings.isTable){var a=$("thead th",this.$container),s=0;for(s;s<a.length;s++)i.children().eq(s).attr("headers",a[s].id);t.columncount=a.length}t.itemId=i.data().itemId,t.content=n.html(),this.row.$original=i,this.row.$current=$(this.template.confirm(t)),this.row.data=t,this.renderConfirm()},update:function(e){e.preventDefault();var t=$(e.target).closest("[data-item-id]"),i=this.serializeForm(e.target);return $("body.js-wishlist, body.js-quick-order").length&&t.has("input[id^='qty-']")&&(0===t.find("input[id^='qty-']").val()||"0"===t.find("input[id^='qty-']").val())?void this.$container.trigger("item-updated",[{status:0,bypass:!0},t]):void this.sendData(i,"json",$.proxy(function(e){0!==parseInt(e.status)?this.notifier&&this.notifier.notify(e):this.$container.trigger("item-updated",[e,t])},this))},refresh:function(e){this.sendData(e,"json",$.proxy(function(e){if(this.notifier&&this.notifier.notify(e),!(parseInt(e.status)>0)){var i=$(t.unescape(e.fragment));0===this.row.count&&i.hide(),this.$container.html(i),0===this.row.count&&i.fadeIn(150),this.setCounter(!0)}},this))},setCounter:function(e){(!this.row.count||e)&&(this.row.count=$("[data-item-id]",this.$container).length),this.settings.counter&&$(this.settings.counter,this.$container).text(this.row.count)},serializeForm:function(e,t){var i,n=$(e);return t=t||("FORM"===this.$container[0].nodeName?this.$container:$("form",this.$container)),i=t.serialize(),""!==i&&(i+="&"),i+=n.attr("name")+"="+n.val()},parseTemplate:function(e){var t=e.html();return t=t.replace(/<!--[\s\S]*?-->/g,""),i.compile(t)},sendData:function(e,t,i){var n={type:"post",url:this.dataUrl,headers:{"cache-control":"no-cache"},data:e};"function"==typeof t&&(i=t,t=null),t&&(n.dataType=t),this.jxhr=$.ajax(n),this.jxhr.fail(function(e,t,i){throw new Error("sendData(): "+i)}).done(i)},captureSubmit:function(e){var t=$(e.target).data();return 13===e.keyCode?($(t.submittedBy).trigger("click"),!1):void 0},renderConfirm:function(){var e=this.settings,t=this.row.$original,i=this.row.$current,n=$(e.wrap,i),a=$(e.controls,i),s=$(e.overlay,i),o=t.height(),r=n.height();t.replaceWith(i),n.height(o),a.css({opacity:0}),Modernizr.rgba&&s.css({opacity:0}).fadeTo(150,1),$(":tabbable",n).not($(":tabbable",a)).attr("tabindex",-1),n.data("origHeight",o).animate({height:r},150,function(){a.fadeTo(150,1),n.css({height:""}),$('[type="submit"]',a).focus()})}},s}),define("pages/checkout/details",["require","app/ajaxlist","app/ajaxLoader"],function(e){var t=e("app/ajaxlist"),i=e("app/ajaxLoader"),n=function(e){this.config={addressForm:".delivery-address-form",addressList:{formId:"#ui-form-deliveryAddress",listId:"#ui-list-deliveryAddress",listItem:{container:".address-wrap",btn:"[name=shippingAddressId]",extra:".delivery-access"}},cssModifiers:{selected:"is-selected",hidden:"is-dom-removed"},deliverDiffPersonYesBlock:"#diff-personal-details",deliverDiffPersonYes:"#deliver-diff-person-yes",delieveryAddressRadio:".delivery-address [type=radio]",deliveryAddressNo:"#delivery-address-no",addressQas:".address-qas",addressQasForm:".address-form",deliveryAddressQas:"#ui-delivery-address-qas"},$.extend(!0,this.config,e),this.initPage(),this._bindEvents()};return n.prototype={_bindEvents:function(){var e=this.config;$(function(){$(e.delieveryAddressRadio).trigger("change"),$(e.deliveryAddressNo).is(":checked")&&($(e.deliveryAddressQas).find(e.addressQas).slideUp(),$(e.deliveryAddressQas).find(e.addressQasForm).slideDown()),$(e.deliverDiffPersonYes).is(":checked")?$(e.deliverDiffPersonYesBlock).slideDown():""})},initPage:function(){var e=this.config,t={addressForm:e.addressForm,formId:e.addressList.formId,listId:e.addressList.listId,listItem:e.addressList.listItem.container,listItemBtn:e.addressList.listItem.btn,listItemExtra:e.addressList.listItem.extra,selectedClass:e.cssModifiers.selected,hiddenClass:e.cssModifiers.hidden,delieveryAddress:e.delieveryAddressRadio};$(t.listItemExtra,$(t.listItem,$(t.listId)).eq(0)).removeClass(t.hiddenClass),this.pickAddress(t),$(t.listId).length>0&&this.updateAddressList(t),this.addEditAddress(t),this.buttonController()},pickAddress:function(e){var t=$(e.formId),i=$(e.listId,t),n=$(e.listItem,i),a=$(e.listItemBtn,i),s=$(e.listItemExtra,i);i.on("click",e.listItem+" "+e.listItemBtn,function(t){var i=$(t.currentTarget).closest(e.listItem);$(t.target);i.hasClass(e.selectedClass)||(n.removeClass(e.selectedClass),a.prop("checked",!1),a.parent().removeClass("checked"),$(e.listItemBtn,i).prop("checked",!0),$(e.listItemBtn,i).parent().addClass("checked"),$(e.listItemExtra).not($(e.listItemExtra,i)).slideUp(),i.addClass(e.selectedClass).find(s).removeClass(e.hiddenClass).hide().slideDown())})},updateAddressList:function(e){var i=this,n=new t({container:e.formId});n.$container.on("list-emptied",function(t){$(t.target).slideUp(),$(e.addressForm).fadeIn()}).on("list-updated",function(t){var n=$(e.listId,t.target),a=$(e.listItem,n),s=a.filter("."+e.selectedClass);a.length&&(s.length||($(e.listItemBtn,a.eq(0)).trigger("click"),i._scrollTo(a.eq(0))))})},addEditAddress:function(e){var t=$(e.addressForm),i=$(e.formId),n=$(e.listId,i),a=$(e.listItem,n),s=$("#deliver-diff-person-yes, #deliver-diff-person");a.length>0?t.hide():(i.hide(),t.show()),$("#diff-delivery-details, #diff-personal-details").hide(),$(document).on("change",e.delieveryAddress,function(){$("#delivery-address-no").is(":checked")?$("#diff-delivery-details").slideDown().on("change","[type=radio], [type=checkbox]",function(){s.is(":checked")?$("#diff-personal-details").slideDown():$("#diff-personal-details").slideUp()}):$("#diff-delivery-details").slideUp()})},buttonController:function(){$("form").on("click.continueButton",".buttons .btn-primary",function(){setTimeout(function(){if(!$(".is-error").length){var e=$("body");i(e),$(".buttons .btn-primary").prop("disabled","disabled")}},25)})},_scrollTo:function(e,t){$("html, body").stop().animate({scrollTop:e.offset().top},500,t)}},new n}),define("pages/checkout/payment",["require","app/common","app/tooltip","app/validation","app/addressLookup","app/notifier","lang","lib/jquery.mustache"],function(e){e("app/common"),e("app/tooltip");var t=e("app/validation"),i=e("app/addressLookup"),n=e("app/notifier"),a=e("lang"),s=e("lib/jquery.mustache"),o=a.checkoutPayment,r=function(e){this.config={newCard_form:"#new-card-details-form",savedCard_form:"#saved-card-edit-form",validateSession_form:"#validate-session-form",newOrSavedCard_radios:'input[type="radio"][name="card-type"]',savedCard_radio:"#card-saved",savedCard_select:"#card-select",savedCardType_text:"#card-type",newCardType_select:"#new-card-type",securityNumber_text:"#card-security",useDeliveryAddress_input:"[name=use-delivery-address]",saveCardDetails_checkbox:"#save-card-details",editBillingAddress_link:"a[data-item-toggle=edit-address-link]",giftCardBlock:".section-holder-content",deletedItem:"",jsQAS:".js-qas",savedAddress:".use-saved-address",giftCard:{removeAction:'[data-action="removeGiftCard"]',confirmGiftCardRemoval:'[data-action="confirmGiftCardRemoval"]',cancelRemovalAction:'[data-action="cancelGiftCardRemoval"]',checkBalanceAction:'[data-action="checkGiftCardBalance"]',applyGiftCardAmount:'[data-action="applyGiftCardAmount"]',removeGiftCardAction:"removeGiftCard",removeTemplateSelector:"#ui-template-delete-giftcard",newRowTemplateSelector:"#ui-template-new-giftcard-row",removeTemplate:null,numberInputSelector:"#gift-card-number",PINInputSelector:"#gift-card-security",tableSelector:".table-balance",calculateTotal:".js-amount-to-use",cancelGiftCard:'[data-action="cancelGiftCards"]',deleteingItemBean:"",deleteingItemBeanVal:""}},$.extend(!0,this.config,e),this.cache={},this.xhr=null,this.sessionIsValid=null,this.selectedCardType=null,this.initPage()};return $.extend(r.prototype,{initPage:function(){var e=this.config;$(document).on("change",e.newCardType_select,$.proxy(this.handleNewCardTypeChange,this)).on("change",e.useDeliveryAddress_input,$.proxy(this.handleUseDeliveryAddressChange,this)).on("change",e.saveCardDetails_checkbox,$.proxy(this.handleSaveCardDetailsChange,this)).on("submit",e.newCard_form,$.proxy(this.handleNewCardFormSubmit,this)).on("click",e.giftCard.removeAction,$.proxy(this.removeGiftCard,this)).on("click",e.giftCard.cancelRemovalAction,$.proxy(this.cancelGiftCardRemoval,this)).on("click",e.giftCard.checkBalanceAction,$.proxy(this.checkGiftCardBalance,this)).on("click",e.giftCard.applyGiftCardAmount,$.proxy(this.applyGiftCardAmount,this)).on("click",e.giftCard.confirmGiftCardRemoval,$.proxy(this.confirmGiftCardRemoval,this)).on("focusout keyup click",e.giftCard.calculateTotal,$.proxy(this.calculateGiftCardTotal,this)).on("click",e.giftCard.cancelGiftCard,$.proxy(this.cancelGiftCard,this)).on("focusout",e.giftCard.numberInputSelector,$.proxy(this.toggleCheckBalanceButton,this));var t=$(e.giftCard.newRowTemplateSelector),i=$(e.giftCard.removeTemplateSelector);t.length>0&&(e.giftCard.rowTemplate=s.compile(t.html().replace(/<!--[\s\S]*?-->/g,""))),i.length>0&&(e.giftCard.removeTemplate=s.compile(i.html().replace(/<!--[\s\S]*?-->/g,""))),$(".table-gift-card").find(".table-row").length>0?$(".form-section-title").find(".required").addClass("checkout-payment-required"):$(".form-section-title").find(".required").removeClass("checkout-payment-required"),$(e.newOrSavedCard_radios).length>0&&($(document).on("change",e.newOrSavedCard_radios,$.proxy(this.handleNewOrSavedCardChange,this)).on("change",e.savedCard_select,$.proxy(this.handleSavedCardChange,this)).on("click",e.editBillingAddress_link,$.proxy(this.handleEditBillingAddressClick,this)),this.editInvalidSavedCardBillingAddress(),$(e.savedCard_form)[0]&&(this.cache[$(e.savedCard_select).val()]=$(e.savedCard_form)[0].outerHTML)),this.hideQASform()},hideQASform:function(){var e=this.config;$(e.jsQAS)&&$(e.jsQAS).prev().hasClass("use-saved-address")&&$(e.jsQAS).remove()},handleNewOrSavedCardChange:function(e){var t=$(e.target),i=t.attr("id");if(i!==this.selectedCardType){this.selectedCardType=i;var n=this.config,a=$(n.savedCard_select),s=null,r=null,l=null;switch(i){case"card-new":a.prepend('<option value="">'+o.newCardSelect+"</option>"),a.find("option:selected").prop("selected",!1),a.find("option:first").prop("selected",!0),r=$(n.savedCard_form),l="newCard";break;case"card-saved":a.find("option:first").remove(),r=$(n.newCard_form),s={cardKey:a.val()},l=a.val()}return l in this.cache?void this.attachCardDetailsForm(r,this.cache[l]):void this.dispatchRequest(t.data("item-url"),s,"GET").done(function(e){this.attachCardDetailsForm(r,e),this.cache[l]=e}.bind(this))}},attachCardDetailsForm:function(e,n){var a=this.swapForm(e,n);if(a.length>0){t(a);var s=$(".js-qas",a),o=s.data();s.length>0&&(o.addressLookup=new i({id:s}))}this.editInvalidSavedCardBillingAddress()},swapForm:function(e,t){var i=$(t).insertBefore(e);return e.remove(),i},handleNewCardTypeChange:function(e){var t=$(e.target),i=this.config,n=$(".js-card-security");t.val()===o.tradeAccountCard?($("<input />").attr({type:"hidden",name:"csc"}).appendTo(i.newCard_form),$(i.securityNumber_text).prop("disabled",!0),n&&n.addClass("is-dom-removed").attr("aria-hidden","true")):($('input[name="csc"][type="hidden"]').remove(),$(i.securityNumber_text).prop("disabled",!1),n&&n.removeClass("is-dom-removed").attr("aria-hidden","false"))},handleSavedCardChange:function(e){var t=this.config,i=$(t.savedCard_radio);if(!i.is(":checked"))return i.prop("checked",!0),void i.trigger("change");var n=$(e.target),a=n.val(),s=$(t.savedCard_form);return a in this.cache?void this.attachCardDetailsForm(s,this.cache[a]):void this.dispatchRequest(n.data("item-url"),{cardKey:n.val()},"GET").done(function(e){this.attachCardDetailsForm(s,e),this.cache[a]=e}.bind(this))},handleNewCardFormSubmit:function(e){var t=this.config;if(this.sessionIsValid)this.fixAddressFields(),this.trimCardNumber();else{var i=$(t.validateSession_form),n=$('[type="submit"]',i),a=this.serializeForm(n,i);this.dispatchRequest(i.attr("action"),a,"POST").done(function(e){try{var i=$.parseJSON(e).hasSessionExpired;i?window.location.reload(!0):(this.sessionIsValid=!0,$('[type="submit"]',t.newCard_form).click())}catch(n){window.location.reload(!0)}}.bind(this)),e.preventDefault()}},handleUseDeliveryAddressChange:function(e){var t=this.config,n=$(e.target),a=$("#use-delivery-address-yes"),s=$("#use-delivery-address-no");this.dispatchRequest(n.data("item-url"),null,"GET").done(function(e){var n=$.parseHTML(e);a.is(":checked")?($(t.jsQAS).fadeOut().detach(),setTimeout(function(){a.closest(".field").after($(e))},400)):s.is(":checked")&&($(t.savedAddress).fadeOut().detach(),setTimeout(function(){s.closest(".field").after($(e)),n.addressLookup=new i({id:$(t.jsQAS)})},400))})},handleSaveCardDetailsChange:function(e){var t=$(e.target);this.dispatchRequest(t.data("item-url"),{saveCard:t[0].checked},"POST")},handleEditBillingAddressClick:function(e){e.preventDefault(),$(e.target).hide(),$("#updateBillingAddress").val("true");var t=$(".saved-details");t.prepend('<h2 class="block-title-alt form-title">'+o.cardDetails+"</h2>"),t.css("background","none"),$(".address-form").closest("section").removeClass("is-dom-removed").slideDown(),$(".contact-details").parent(".field").slideUp()},editInvalidSavedCardBillingAddress:function(){},fixAddressFields:function(){var e=$("#payment-address-house-name").val(),t=$("#payment-address-house-number").val(),i=$("#payment-address-address2").val(),n=$("#payment-address-address3").val(),a=$('[name="address1"]'),s=$('[name="address2"]'),o=$("#payment-address-manualAddressInput").val();""===e&&""===t?a.val(" "):"false"!=o?a.val(e+"|||"+t+"|||"+o):a.val(e+"|||"+t),s.val(i+"|||"+n),$('[name="town"]').val($("#payment-address-city").val()),$('[name="county"]').val($("#payment-address-county").val()),$('[name="postcode"]').val($("#payment-address-postcode").val())},cancelGiftCard:function(e){e.preventDefault();var i=this.config,n=$(e.target),a=n.closest("form"),s=n.attr("name"),o=n.val(),r=a.serialize(),l=a.attr("action");r+="&"+s+"="+o;var c=this.dispatchRequest(l,r,"post");c.done(function(e,t,a){n.closest(i.giftCardBlock).html(e)}).fail(function(e,t,i){console.log("Error occurred")}).complete(function(e,n,a){diy.instances.customFormElements.reinit();var s=$(i.giftCardBlock).find("form");s.each(function(e,i){t(i)})})},applyGiftCardAmount:function(e){e.preventDefault();var i=this.config,n=$(e.target),a=n.closest("form"),s=0,o=$(".js-amount-to-use"),r=parseFloat($(".balance-data").text().replace(/\u00A3|,/g,""))||0,l=$(e.target).closest("form").find(".js-giftcard-data"),c={},d=[];$.each(l,function(e,t){var i={};i.cardnumber=$(t).find(".js-card-number").text(),i.cardpin=$(t).find(".js-card-pin").val(),i.avlBalance=$(t).find(".js-avl-balance").text().replace(/\u00A3|,/g,""),i.amountToUse="undefined"!=typeof $(t).find(".js-amount-to-use").val()?$(t).find(".js-amount-to-use").val():$(t).find(".js-amount-to-use-fixed").text().replace(/\u00A3|,/g,""),d.push(i)}),$.each(o,function(e,t){s+=parseFloat($(t).val().replace(/\£|,/g,""))||0});var u=n.attr("name"),h=n.val();c.cardData=d;var p=a.attr("action"),f=a.serialize()+"&"+u+"="+h+"&jsondata=";if(f+=JSON.stringify(c),r>=s&&$(i.giftCard.calculateTotal).valid()){var g=this.dispatchRequest(p,f,"post");g.done(function(e,t,a){n.closest(i.giftCardBlock).html(e)}).fail(function(e,t,i){console.log("Error occurred")}).complete(function(e,n,a){diy.instances.customFormElements.reinit();var s=$(i.giftCardBlock).find("form");s.each(function(e,i){t(i)}),$(".table-gift-card").find(".table-row").length>0?$(".form-section-title").find(".required").addClass("checkout-payment-required"):$(".form-section-title").find(".required").removeClass("checkout-payment-required")})}},calculateGiftCardTotal:function(e,t){if(""==e){if(""!=t){var i=0,n=$(".balance-data-avlb");$.each(n,function(e,t){"TD"===t.nodeName&&(i+=parseFloat($(t).text().replace(/\£|,/g,"")))}),$(".js-total-avl-balance").html("&pound"+i.toFixed(2))}}else if("click"==e.type){var a=$(e.target);a.removeAttr("value"),a.val("")}else"focusout"!=e.type||""!=$(e.target).val()&&"NAN"!=$(e.target).val()&&"undefined"!=$(e.target).val()||$(e.target).val("0.00");var s=this.config,o=0,r=$(".js-amount-to-use"),l=!1,c=0,d=""==e?t:parseFloat($(e.target).closest("table").find(".js-avl-balance").text().replace(/\u00A3|,/g,"")),u=$(".balance-data").text().replace(/\u00A3|,/g,"");if(r.length>1){r.not(e.target).each(function(e,t){c+=parseFloat($(t).hasClass(".is-error")||$(t).val()<0?"0":$(t).val())});var h=parseFloat(u)-c,p=Math.min(h,d);p=0>p?0:p,$(e.target).attr("max",p.toFixed(2))}if(e&&0==parseFloat($(e.target).attr("max"))){var f=$(e.target).val();0!=parseFloat(f)?(l=!1,$(e.target).addClass("is-error")):(l=!0,$(e.target).removeClass("is-error"))}else l=$(s.giftCard.calculateTotal).valid();if(l){$.each(r,function(e,t){o+=parseFloat($(t).val().replace(/\£|,/g,""))||0});var g=$(".js-amount-to-use-fixed");$.each(g,function(e,t){o+=parseFloat($(t).text().replace(/\£|,/g,""))||0});var i=o.toFixed(2);$(".js-total-amt-to-use").html("&pound"+i),this.tempTotalAmtToUse=i}else $(".js-total-amt-to-use").html("&pound"+this.tempTotalAmtToUse)},confirmGiftCardRemoval:function(e){var i=this.config,n=$(e.target),a=n.closest("form"),s=i.giftCard.removeGiftCardAction;if(i.deletedItem.find(".js-amount-to-use-fixed").length>0){var o={};o.cardnumber=i.deletedItem.find(".js-card-number").text(),o.avlBalance=i.deletedItem.find(".js-avl-balance").text(),o.amountToUse=i.deletedItem.find(".js-amount-to-use-fixed").text().replace(/\u00A3|,/g,"");var r=i.deleteingItemBean,l=i.deleteingItemBeanVal,c=a.attr("action"),d=a.serialize()+"&"+r+"="+l+"&jsondata=";d+=JSON.stringify(o);var u=this.dispatchRequest(c,d,"post");u.done(function(e,t,n){a.closest(i.giftCardBlock).html(e)}).fail(function(e,t,i){console.log("Error occurred")}).complete(function(e,n,a){diy.instances.customFormElements.reinit();var s=$(i.giftCardBlock).find("form");s.each(function(e,i){t(i)}),$(".table-gift-card").find(".table-row").length>0?$(".form-section-title").find(".required").addClass("checkout-payment-required"):$(".form-section-title").find(".required").removeClass("checkout-payment-required")})}else i.deletedItem.remove();$("#"+s).slideUp(200,function(){$(this).remove()}),$(".table-gift-card").find(".table-row").length>0?($(".table-balance").removeClass("is-hidden").addClass("is-visible"),$(".basket-buttons").removeClass("is-hidden").addClass("is-visible"),$(".form-section-title").find(".required").addClass("checkout-payment-required")):($(".table-balance").removeClass("is-visible").addClass("is-hidden"),$(".basket-buttons").removeClass("is-visible").addClass("is-hidden"),$(".form-section-title").find(".required").removeClass("checkout-payment-required"))},removeGiftCard:function(e){e.preventDefault();var t=this.config,i=t.giftCard.removeGiftCardAction;if($("#"+i).length)$("#"+i).slideUp(200,function(e){$(this).remove()});else{var n=this,a=$(e.target),s=$(".gift-card-block"),o=a.closest("[data-item-id]").data(),r=o.itemId,l=o.cardNumber,c=t.giftCard.removeTemplate({linkJump:i,parentRowId:r,giftCardNumber:l});s.html(c),$("#"+i).slideDown(200,function(){n._scrollTo(s)})}t.deletedItem=a.closest("table"),t.deleteingItemBean=a.attr("name"),t.deleteingItemBeanVal=a.val()},checkGiftCardBalance:function(e){e.preventDefault();var i=this,n=this.config,a=$(e.target),s=a.data("url"),o=$(n.giftCard.numberInputSelector).val(),r=$(n.giftCard.PINInputSelector).val(),l=a.closest("form"),c=a.attr("name"),d=a.attr("value"),u="";if("undefined"==typeof o||"undefined"==typeof r)return!1;$(n.giftCard.numberInputSelector).valid()&&$(n.giftCard.PINInputSelector).valid()&&(u=l.serialize()+"&"+c+"="+d,a.attr("disabled","disabled"),this.dispatchRequest(s,u,"get").done(function(e,t,n){i._handleGiftCardCheckResponse(e,l,{giftCardNumber:o,giftCardPIN:r})}).always(function(){a.removeAttr("disabled")}).complete(function(e,i,a){diy.instances.customFormElements.reinit();var s=$(n.giftCardBlock).find("form");s.each(function(e,i){t(i)})}))},_handleGiftCardCheckResponse:function(e,t,i){var n,a;try{n=$.parseJSON(e)}catch(s){return a=this._getMessageNotifier(t),a&&a.notify({title:o.handleGiftCardCheckResponse.unableToFetch,message:[o.handleGiftCardCheckResponse.messageLn1,o.handleGiftCardCheckResponse.messageLn2,o.handleGiftCardCheckResponse.messageLn3].join(" "),status:1}),!1}n=$.extend(!0,n,i),"success"===n.giftCardBalanceCheck?this._handleSuccessfulGiftCardRequest(n,t):"fail"===n.giftCardBalanceCheck&&this._handleFailedGiftCardRequest(n,t)},_handleSuccessfulGiftCardRequest:function(e,t){var i=this.config,n=$(i.giftCard.tableSelector),a=null;if(0!==n.length&&"function"==typeof i.giftCard.rowTemplate){a=i.giftCard.rowTemplate(e);var s=$(a),o=this._populateCardAmountToUse(e.giftCardBalanceAmount);s.find(".js-amount-to-use").val(o.toFixed(2)),s.find(".js-amount-to-use").attr("max",o.toFixed(2)),$(i.giftCard.tableSelector).parent().find(".table-row").length<1&&s.removeClass("table-next-row"),n.before(s),$(".table-gift-card").find(".table-row").length>0?($(".table-balance").removeClass("is-hidden").addClass("is-visible"),$(".basket-buttons").removeClass("is-hidden").addClass("is-visible"),$(".form-section-title").find(".required").addClass("checkout-payment-required")):($(".table-balance").removeClass("is-visible").addClass("is-hidden"),$(".basket-buttons").removeClass("is-visible").addClass("is-hidden"),$(".form-section-title").find(".required").removeClass("checkout-payment-required")),$(i.giftCard.numberInputSelector).val(""),$(i.giftCard.PINInputSelector).val(""),$(".js-amount-to-use").on("keyup",function(e){var t=2,i=e.target.value.split(".")[0],n=e.target.value.split(".")[1];"undefined"==typeof n&&(n=""),n.length>t&&(e.target.value=i+"."+n.substring(0,t))}),this.calculateGiftCardTotal("",e.giftCardBalanceAmount),this._scrollTo(n.parent()),this.tempTotalAmtToUse=parseFloat($(".js-total-amt-to-use").text().replace(/\£|,/g,"")||0)}},_handleFailedGiftCardRequest:function(e,t){var i=this.config,n=t.validate(),a={},s={cardNum:$(i.giftCard.numberInputSelector).attr("name"),PIN:$(i.giftCard.PINInputSelector).attr("name")};"true"===e.inValidPinNumber&&(a[s.PIN]=e.errorMessage),("true"===e.cardAlreadyEntered||"true"===e.noBalanceOnCard||"true"===e.noCardFound||"true"===e.technicalError||"true"===e.svsHostUnavailable)&&(a[s.cardNum]=e.errorMessage),n.showErrors(a)},cancelGiftCardRemoval:function(e){var t=this.config,i=t.giftCard.removeGiftCardAction;$("#"+i).slideUp(200,function(){$(this).remove()})},toggleCheckBalanceButton:function(e){var t=this.config,i=$(t.giftCard.checkBalanceAction),n=parseInt(i.data("giftcard-limit")),a=$(t.giftCard.numberInputSelector).val(),s=parseInt($(".table-gift-card").find(".table-simple").length),o=!1;""!==a&&(o=$(t.giftCard.numberInputSelector).valid()),"undefined"==typeof a||!o||s>n?i.attr("disabled","disabled"):i.removeAttr("disabled")},_populateCardAmountToUse:function(e){var t=0,i=parseFloat($(".balance-data").text().replace(/\£|,/g,"")),n=0,a=0;return $(".js-amount-to-use").length>0&&$(".js-amount-to-use").each(function(){t+=parseFloat(""==$(this).val()||"NAN"==$(this).val()||"undefined"==$(this).val()?0:$(this).val())}),n=i-t,a=Math.min(n,parseFloat(e)),0>a?0:a},_scrollTo:function(e){$("html, body").animate({scrollTop:e.offset().top},250,function(){e.attr("tabindex",-1).focus()})},_getMessageNotifier:function(e){var t=e.data().notifier;return t||(t=e.hasClass("js-message-default")?diy.instances.notifier:new n(e.hasClass("js-message-section-title")?{target:e.parents("section")}:{target:e}),e.data().notifier=t),t},trimCardNumber:function(){$("#card-number").val(function(e,t){return t.replace(/\s+/g,"")})},dispatchRequest:function(e,t,i){return this.ajaxAbort(),this.xhr=$.ajax({type:i,url:e,data:t,cache:!1,headers:{"cache-control":"no-cache"},timeout:5e4}),this.xhr},ajaxAbort:function(){this.xhr&&4!=this.xhr.readyState&&this.xhr.abort()},serializeForm:function(e,t){var i=t.serialize();return""!==i&&(i+="&"),i+=e.attr("name")+"="+e.val()}}),new r}),define("pages/checkout/delivery",["require","app/common","clndr","moment","app/ajaxLoader","config","lang","app/orientation-watcher"],function(e){function t(){function e(e,t){$("[data-group-id="+t+"] "+e).toggleClass(l)}function t(e,t){$("[data-group-id="+t+"] "+e).removeClass(c).addClass(l)}function a(e,n){var a=e.attr("class"),s=a.replace("day","").replace("past","").replace("event","").replace("calendar-day-","").replace("adjacent-month","").replace("last-month","").replace("next-month","").replace("next-year","").replace("last-year","").replace("first-year","").replace("first-month","").trim();$("#delivery-selected").val(s),$("#choosedateform-"+n+' input[class="hidden-date"]').val(s),$.ajax({url:$("#choosedateform-"+n).attr("action"),method:"POST",data:$("#choosedateform-"+n).serialize()}).done(function(e){t(d,n),$("[data-group-id="+n+"] .basket-sub-header .moment-date-string").text(i(s).format("dddd Do MMMM YYYY"))})}function s(e,t){var n=i(e.startDate).format("YYYYMM"),a=i(e.endDate).format("YYYYMM"),s=i(e.startDate).add("months",1).format("YYYY-MM-01"),o=i(e.endDate).subtract("months",1).daysInMonth(),r=(i(e.endDate).subtract("months",1).format("YYYY-MM-"+o),i(e.endDate).add("months",1).daysInMonth(),i(e.endDate).daysInMonth()),l=i(e.endDate).add("months",1).format("YYYY-MM"),c=i(e.endDate).format("YYYY-MM"),d=i(e.endDate).daysInMonth(),u=c+"-"+d,h=i(e.startDate).add("months",1).format("YYYY-MM"),p=h+"-01";
return"first"==t?n!=a?{startDate:e.startDate,endDate:u}:{startDate:e.startDate,endDate:s}:"last"==t?n!=a?{startDate:p,endDate:l+"-"+r}:{startDate:s,endDate:s}:void 0}function f(e,t){2==e&&setTimeout(function(){$("[data-group-id="+t+"] .m2 .btn-next").attr("href","#0").removeAttr("tabindex"),$("[data-group-id="+t+"] .m2 .btn-prev").attr("tabindex","-1").removeAttr("href").text(""),$("[data-group-id="+t+"] .m1 .btn-prev").attr("tabindex","-1").removeAttr("href").text(""),$("[data-group-id="+t+"] .m1 .btn-next").attr("tabindex","-1").removeAttr("href").text("")},300)}function g(e,t,i){"undefined"==typeof window.cal&&(window.cal=[]),window.cal[i+"l"]=$("[data-group-id="+i+"] "+u).clndr({constraints:s(t.data.constraints,"first"),events:t.data.events,template:p.template,doneRendering:f(1,i),weekOffset:1,extras:{idPrefix:i,classSuffix:"1",selectedDate:$("#choosedateform-"+i+" .hidden-date").val()},daysOfTheWeek:p.daysOfTheWeek,showAdjacentMonths:p.showAdjacentMonths,adjacentDaysChangeMonth:p.adjacentDaysChangeMonth,targets:p.targets,clickEvents:p.clickEvents,startWithMonth:t.data.constraints.startDate}),window.cal[i+"r"]=$("[data-group-id="+i+"] "+h).clndr({constraints:s(t.data.constraints,"last"),events:t.data.events,template:p.template,doneRendering:f(2,i),weekOffset:1,extras:{idPrefix:i,classSuffix:"2",selectedDate:$("#choosedateform-"+i+" .hidden-date").val()},daysOfTheWeek:p.daysOfTheWeek,showAdjacentMonths:p.showAdjacentMonths,adjacentDaysChangeMonth:p.adjacentDaysChangeMonth,targets:p.targets,clickEvents:p.clickEvents,startWithMonth:t.data.constraints.startDate})}this.dateChanger=function(){$(document).on("click",o,function(i){var a=$(this).parents(".order-group").data("group-id");$(this).parents(".order-group");if($("[data-group-id="+a+"] .calendar table").length)return e(d,a),$(o).text($(this).data("alternative")).removeClass("change-current-date").addClass("keep-current-date"),!1;var s=$(this).parents(".order-group"),r=$(this);return e(d,a),$(this).text($(this).data("alternative")).removeClass("change-current-date").addClass("keep-current-date"),n(s,"We're checking for delivery dates"),$.ajax({url:$("#getdatesform-"+a).attr("action"),method:"POST",data:$("#getdatesform-"+a).serialize()+$(".submit-the-form").serialize()}).done(function(e){var i=$.parseJSON(e);if(null===e||i.hasOwnProperty("error"))$(".basket").parents(".wrap").find(".error").remove(),$(".basket").before('<div class="message error" role="alert"><div class="msg-holder"><div class="msg-icon"></div><div class="msg-text"><strong class="msg-title">'+i.error+"</strong></div></div></div>");else if("1"===i.data.numDates){var n=msg.noDatesTxt;t(d,a),$("[data-group-id="+a+"]").after('<div class="message notice" role="alert"><div class="msg-holder"><div class="msg-icon"></div><div class="msg-text"><strong class="msg-title">'+n+"</strong></div></div></div>")}else g(2,i,a);s.find(".ajax-loading").length&&(s.removeClass("ajax-loading-parent").find(".ajax-loading").remove(),r.focus())}),!1}),$(document).on("click",r,function(e){var i=$(this).parents(".order-group").data("group-id"),n=$("[data-group-id="+i+"]").next(".notice");return t(d,i),n.remove(),$(this).text($(this).data("original")).removeClass("keep-current-date").addClass("change-current-date"),!1}),$("#home-delivery").on("keydown",".keep-current-date, .change-current-date",function(e){return 9===e.which&&e.shiftKey?void $(this).prev().focus():!0}).on("keyup",".keep-current-date, .change-current-date",function(e){return!1}),$(document).on("click",d+" tbody td a",function(e){$(".current-delivery").text($(".current-delivery").data("day"));var t=$(this).text(),i=$(this).parents("table").data("selected-text");$(this).html('<span class="accessibility">'+i+" (</span>"+t+'<span class="accessibility">)</span>').data("day",t);var n=$(this).parents(".order-group").data("group-id");return a($(this).parents("td"),n),$("[data-group-id="+n+"] .current-delivery").removeClass("current-delivery"),$(this).addClass("current-delivery"),$(r).text($(r).data("original")).removeClass("keep-current-date").addClass("change-current-date"),$(o).focus(),!1}),$(document).on("keydown",d+" tbody td a",function(e){var t=e.keyCode||e.which;return 32==t?($(this).click(),!1):13==t?($(this).click(),!1):37==t||65==t?0==$(this).parents("td").index()?0==$(this).parents("tr").index()?$(this).parents(".calander2")?($(u).find("tbody tr:last td:last a").focus(),!1):!1:($(this).parents("tr").prev().find("td:last a").focus(),!1):($(this).parents("td").prev().find("a").focus(),!1):39==t||68==t?6==$(this).parents("td").index()?4==$(this).parents("tr").index()?$(this).parents(".calander1")?($(h).find("tbody tr:first a:first").focus(),!1):!1:($(this).parents("tr").next().find("a:first").focus(),!1):($(this).parents("td").next().find("a").focus(),!1):38==t||87==t?0==$(this).parents("tr").index()?$(this).parents(".calander2")?($(u).find("tbody tr:last td:eq("+$(this).parents("td").index()+") a").focus(),!1):!1:($(this).parents("tr").prev().find("td:eq("+$(this).parents("td").index()+") a").focus(),!1):40==t||83==t?4==$(this).parents("tr").index()?$(this).parents(".calander1")?($(h).find("tbody tr:first td:eq("+$(this).parents("td").index()+") a").focus(),!1):!1:($(this).parents("tr").next().find("td:eq("+$(this).parents("td").index()+") a").focus(),!1):void 0})}}var i=(e("app/common"),e("clndr"),e("moment")),n=e("app/ajaxLoader"),a=e("config");lang=e("lang"),msg=lang.checkoutDelivery,e("app/orientation-watcher");var s=a.app;"fr_FR"==s.language&&i.lang(s.language,msg.moment);var o=".change-current-date",r=".keep-current-date",l="is-dom-removed",c="is-visible",d=".calendar-wrapper",u=".calendar1",h=".calendar2";_.templateSettings={interpolate:/\<\@\=(.+?)\@\>/gim,evaluate:/\<\@([\s\S]+?)\@\>/gim,escape:/\<\@\-(.+?)\@\>/gim};var p={template:$("#cal-template").html(),showAdjacentMonths:!0,adjacentDaysChangeMonth:!1,targets:{nextButton:"btn-next",previousButton:"btn-prev",todayButton:"clndr-today-button",day:"day",empty:"empty"},clickEvents:{nextMonth:function(e){var t=$(this.element).parents(".order-group").data("group-id");$(this.element).is(".calendar2")?window.cal[t+"l"].forward():window.cal[t+"r"].forward(),$("[data-group-id="+t+"] .btn-prev, [data-group-id="+t+"] .btn-next").text(""),$("[data-group-id="+t+"] .m1 .btn-prev:not(.inactive)").attr("href","#0"),$("[data-group-id="+t+"] .m2 .btn-next:not(.inactive)").attr("href","#0"),$("[data-group-id="+t+"] .btn-next, [data-group-id="+t+"] .btn-prev").each(function(){$(this).attr("href")&&$(this).text($(this).data("original"))})},previousMonth:function(e){var t=$(this.element).parents(".order-group").data("group-id");$(this.element).is(".calendar1")?window.cal[t+"r"].back():window.cal[t+"l"].back(),$("[data-group-id="+t+"] .btn-prev, [data-group-id="+t+"] .btn-next").text(""),$("[data-group-id="+t+"] .m1 .btn-prev:not(.inactive)").attr("href","#0"),$("[data-group-id="+t+"] .m2 .btn-next:not(.inactive)").attr("href","#0"),$("[data-group-id="+t+"] .btn-next, [data-group-id="+t+"] .btn-prev").each(function(){$(this).attr("href")&&$(this).text($(this).data("original"))})}},daysOfTheWeek:[msg.moment.weekdays[6].substring(0,2)+'<span class="accessibility">'+msg.moment.weekdays[6].substring(2,10)+"</span>",msg.moment.weekdays[0].substring(0,2)+'<span class="accessibility">'+msg.moment.weekdays[0].substring(2,10)+"</span>",msg.moment.weekdays[1].substring(0,2)+'<span class="accessibility">'+msg.moment.weekdays[1].substring(2,10)+"</span>",msg.moment.weekdays[2].substring(0,2)+'<span class="accessibility">'+msg.moment.weekdays[2].substring(2,10)+"</span>",msg.moment.weekdays[3].substring(0,2)+'<span class="accessibility">'+msg.moment.weekdays[3].substring(2,10)+"/span>",msg.moment.weekdays[4].substring(0,2)+'<span class="accessibility">'+msg.moment.weekdays[4].substring(2,10)+"</span>",msg.moment.weekdays[5].substring(0,2)+'<span class="accessibility">'+msg.moment.weekdays[5].substring(2,10)+"</span>"]},f=new t;f.dateChanger(),$(document).on("orientationChange",function(e,t){if($(".tooltip-text.is-visible").length){var i=$(".tooltip-text.is-visible").parents(".tooltip");$(".ico-tooltip-close").click(),i.click()}})}),define("pages/checkout/review",["require"],function(e){function t(e){e.preventDefault(),i.valid()&&(i.off(".disableSubmit"),setTimeout(function(){n.click().prop("disabled",!0)},0))}var i=$("form.review"),n=$("input.btn-primary[type=submit]",i),a=".js-terms-link",s=".modal-closer",o="#checkout-review-terms-and-conditions",r="#overlay",l="#terms-link";i.on("submit.disableSubmit",t),$submitReviewTop=$(".review-top input.btn-primary[type=submit]"),$submitReviewBottom=$(".review input.btn-primary[type=submit]"),$(document).on("click.terms",a,function(e){e.preventDefault();var t=$(this).attr("href");return $dupe=$(t),$(t).remove(),$("body").append('<div id="'+r.replace("#","")+'">&nbsp;</div>').append($dupe),$(t).removeClass("accessibility").css("top",$(window).scrollTop()).css("margin-bottom","100px").css("margin","16px").focus(),$("#overlay").height($(document).height()),$(document).on("keypress.escape",function(e){27==e.keyCode&&($(s+":first").click(),$(document).off("keypress.escape"))}),!1}).on("click.closeModal",s,function(e){$(o).addClass("accessibility"),$(r).remove(),$(l).focus()}).on("scroll resize",function(){$(r).height($(document).height())}).on("blur",".modal-footer "+s,function(){$(this).click(),$(l).focus()}),function(){var e=$(".order-table-totals .discount"),t=e.length;t>2&&e.each(function(e,i){return t-2>=e+1?void $(i).addClass("multiple"):!1})}(),$submitReviewTop.on("click",function(){$submitReviewBottom.trigger("click")})}),define("pages/myaccount-details",["require","lang"],function(e){var t=e("lang"),i=t.myAccountdetails;$(document).on("editing.ajaxform",function(t,i){var n;$(".tooltip").length>0&&e(["app/tooltip"]),n=$(".js-qas"),n.length>0&&e(["app/addressLookup"],function(e){var t=n.data();t.addressLookup||(t.addressLookup=new e({id:n}))})}),function(){function e(e){var t=$(e.delegateTarget).data("ajaxform");e.preventDefault(),t.editMode=!0,diy.page.editing=!0}function t(e){var n=($(e.delegateTarget),$(e.target),$(e.target.form),$(e.delegateTarget).data("ajaxform")),s=n.notifier;e.preventDefault(),s.notify({status:2,title:i.notifier.title,message:i.notifier.message,confirm:!0}),s.$notification.on("no",function(){s.close()}).on("yes",function(){$(e.target).attr("data-ajax-submit",!0).trigger("click")}).on("yes no",function(){a.on("click.bqclub.remove","#ui-membership-remove",t)})}function n(e,t){var i,n=$(".js-validator_membership-number",t),a=function(){i[0].disabled=""===n.val()};n.length>0&&(i=$('[type="submit"]',n[0].form),n.on("keyup",a),a())}var a=$(".js-form-ajax");n(),a.on("click.bqclub.addmembership",".js-validator_membership-number",e).on("click.bqclub.remove","#ui-membership-remove",t).on("click.bqclub.update","#ui-membership-update",function(){$("#ui-membership-remove").replaceWith('<a href="#" id="ui-membership-remove" class="link form-error">'+i.membershipRemove+"</a>")}),$(document).on("editing.ajaxform readonly.ajaxform",n)}()}),define("pages/wishlist",["require","config","app/ajaxlist","app/qty-field"],function(e){function t(e){var t;try{t=JSON.parse(e)}catch(i){t=e}return t}var i=(e("config").app,e("app/ajaxlist")),n=e("app/qty-field"),a={target:".product-qty input[type=text]"},s=(new n(a),new i({hideOnEmpty:'.productlist, .wishlist-summary, .buttons [type="submit"]'})),o=$(".buttons",s.$container),r="",l="";s.$container.on("click","[data-action=cancel]:not([disabled])",function(){var e=$(this).parents(".prompt-confirmdelete").find(".product-qty input[type=text]").val();l=$(this).parents("li").find(".product-qty input[type=text]").attr("id"),r=e}).on("list-cancelled",function(){$("#"+l).val(r)}).on("item-updated",function(e,t,i){return $("#ui-ajaxlist .product-qty input[type=text]").each(function(){return 0===$(this).val()||"0"===$(this).val()||""===$(this).val()?($(this).parents(".productlist-controls").find(".iconlink-remove").click(),!1):void 0}),"undefined"!=typeof t.bypass&&t.bypass===!0?!1:void $(".product-total strong",i).text(t.wishlist.item.price)}).on("item-removed",function(e,i){var n=t(i),a=parseInt(i.wishlist.wishlistItemsTotalCount);$(".btn-homedelivery",o).prop("disabled",parseInt(n.wishlist.hdCount,10)!==a),$(".btn-clickcollect",o).prop("disabled",parseInt(n.wishlist.ccCount,10)!==a)}).on("item-updated item-removed",function(e,i){var n=t(i);return"undefined"!=typeof n.bypass&&n.bypass===!0?!1:void $(".wishlists-total strong",s.$container).text(n.wishlist.total)})}),define("pages/wishlists",["require","app/notifier","app/ajaxlist"],function(e){var t=e("app/notifier"),i=e("app/ajaxlist"),n=$("#ui-form-wishlist-create"),a=new i({isTable:!0,notifier:new t({target:n})});$('[type="submit"]',n).on("click",function(e){var t=a.serializeForm(e.target,n);n.valid()&&(e.preventDefault(),a.refresh(t))})}),define("lib/domReady",[],function(){function e(e){var t;for(t=0;t<e.length;t+=1)e[t](c)}function t(){var t=d;l&&t.length&&(d=[],e(t))}function i(){l||(l=!0,o&&clearInterval(o),t())}function n(e){return l?e(c):d.push(e),n}var a,s,o,r="undefined"!=typeof window&&window.document,l=!r,c=r?document:null,d=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1);else if(window.attachEvent){window.attachEvent("onload",i),s=document.createElement("div");try{a=null===window.frameElement}catch(u){}s.doScroll&&a&&window.external&&(o=setInterval(function(){try{s.doScroll(),i()}catch(e){}},30))}"complete"===document.readyState&&i()}return n.version="2.0.1",n.load=function(e,t,i,a){a.isBuild?i(null):n(i)},n}),define("pages/signinReg",["require","app/common","app/tabs","lib/domReady"],function(e){function t(e){"have-password-yes"===$("input:checked").attr("id")||e?(r.removeClass("is-dom-removed"),r.attr("aria-hidden","false"),l.focus()):r.hasClass("is-dom-removed")||(r.addClass("is-dom-removed"),r.attr("aria-hidden","true"))}var i=(e("app/common"),e("app/tabs")),n=(e("lib/domReady"),$("form")),a=$("#error-email-address-reg"),s=$("#error-password"),o=$(".guest-checkout .input-radio"),r=$(".js-has-password"),l=$(".js-has-password #password"),c=($("#have-password-yes"),$("#have-password-no"),$("#signin")),d=$(".grid-item-wrap");window.diy=window.diy||{},diy.instances=diy.instances||{},diy.instances.tabs=new i({breakpoints:[{mediaQuery:"screen and (max-width: 480px)",isDefault:!0,settings:{mode:"tabs"}}]}),n.each(function(){var e=$(this).find(".form-section-title h2").attr("id");$(this).attr("aria-labelledby",e)}),(a.length||s.length)&&t(!0),$(o).on("click",function(){t()}),$(document).ready(function(){c.length>0&&d.equalHeights({resize:!0})}),t()}),define("pages/quickorder",["require","app/ajaxlist","app/qty-field","lang","app/common"],function(e){var t=e("app/ajaxlist"),i=$("#ui-form-quickorder-check"),n=e("app/qty-field"),a=(e("lang"),{target:"#product-qty, .td-qty [type=text]"}),s=(new n(a),new t({isTable:!0,hideOnEmpty:".form-row",notifier:diy.instances.notifier})),o="",r="";e("app/common"),$('[type="submit"]',i).on("click",function(e){var t;i.valid()&&(e.preventDefault(),t=s.serializeForm(e.target,i),s.refresh(t))}),s.$container.on("item-updated",function(e,t,i){var n,a,s;return"undefined"!=typeof t.bypass&&t.bypass===!0?(i.find(".iconlink-remove").click(),!1):(n=parseInt(t.product.qty),a=parseFloat(t.product.price),s="£"+(n*a).toFixed(2),$('.td-qty input[type="text"]',i).val(t.product.qty),void $(".td-price strong",i).text(s))}).on("click","[data-action=cancel]",function(){var e=$(this).parents(".prompt-confirmdelete").find(".td-qty input[type=text]").val();r=$(this).parents("tr").find(".td-qty .form-single").attr("id"),o=e}).on("list-cancelled",function(){$("#"+r).val(o)})}),define("pages/savedCards",["app/ajaxlist"],function(e){new e}),define("pages/content",["require","app/common","app/tabs","app/accordion","app/showMore","app/breakpoint","app/qty-field","lang","app/jquery.equalheights"],function(e){var t=(e("app/common"),e("app/tabs")),i=(e("app/accordion"),e("app/showMore")),n=(e("app/breakpoint"),e("app/qty-field")),a=e("lang"),s=a.content,o={target:".productlist-wrap .form-inline input[type=text]"};new n(o);e("app/jquery.equalheights"),diy.instances.tabs=new t({breakpoints:[{mediaQuery:"screen and (max-width: 800px)",settings:{mode:"accordion"}},{mediaQuery:"screen and (min-width: 801px)",isDefault:!0,settings:{mode:"tabs"}}]}),new i({id:"#ui-list-productlist",shownItemsQty:3,showMoreText:s.showMore,showLessText:s.showLess,selectors:{items:"li"}})}),define("pages/content-project",["require","app/common","app/tabs","app/slider","app/showMore","app/qty-field","lang","app/jquery.equalheights"],function(e){var t,i,n,a,s=(e("app/common"),e("app/tabs")),o=e("app/slider"),r=e("app/showMore"),l=e("app/qty-field"),c=e("lang"),d=c.contentProject;e("app/jquery.equalheights"),$(".project-grid").length&&$(".grid-item .project-title").equalHeights({rows:!0,resize:!0}),t={target:".productlist-wrap .form-inline input[type=text]"},i=new l(t),$(".content-project-landing").length||$(".content-project-landing-section").length?(new r({id:".project-grid",selectors:{items:"li"},breakpoints:[{mediaQuery:"screen and (max-width: 30em)",settings:{shownItemsQty:6,increment:2}},{mediaQuery:"screen and (min-width: 30em) and (max-width: 50em)",settings:{shownItemsQty:6,increment:3}},{mediaQuery:"screen and (min-width: 50em)",isDefault:!0,settings:{shownItemsQty:8,increment:4}}]}),new r({id:".project-type-list",selectors:{items:".grid-item"},breakpoints:[{mediaQuery:"screen and (max-width: 30em)",settings:{shownItemsQty:4}},{mediaQuery:"screen and (min-width: 30em) and (max-width: 50em)",settings:{shownItemsQty:6}},{mediaQuery:"screen and (min-width: 50em)",isDefault:!0,settings:{shownItemsQty:8}}]})):(n={showmore:{id:"#ui-list-productlist",shownItemsQty:3,showMoreText:d.showMore,showLessText:d.showLess,selectors:{items:"li"}},slider:{id:"#ui-carousel-howto",activeClass:"is-active",controlButtons:{text:{pre:d.slider.prev,next:d.slider.next}},breakpoints:[{mediaQuery:"screen and (max-width: 30em)",settings:{pageSize:2.25}},{mediaQuery:"screen and (min-width: 30em) and (max-width: 40em)",settings:{pageSize:3}},{mediaQuery:"screen and (min-width: 40em) and (max-width: 60em)",settings:{pageSize:4}},{mediaQuery:"screen and (min-width: 60em)",isDefault:!0,settings:{pageSize:5}}]}},new s,new r(n.showmore),diy.instances.slider=new o(n.slider),a=$("#ui-carousel-howto li a"),a.on("click keydown",function(e){var t;(!e.keyCode||/(13|32)/.test(e.keyCode))&&(e.preventDefault(),t=$(this).attr("data-fragment"),$.get(t,function(e){var t=$("#ui-content-how-to");t.html(e),$("html, body").animate({scrollTop:t.offset().top},500,function(){t.css("outline","none").attr("tabindex","-1").focus()}),new r(n.showmore)}))}),a.eq(0).trigger("click"))}),define("pages/content-inspiration",["require","app/slider","app/qty-field"],function(e){var t=e("app/slider"),i=e("app/qty-field"),n={target:".product .form-inline input[type=text]"};new i(n);new t({id:".image-gallery",slideShow:!0,loop:!0,touch:!0,counter:!0,controlButtons:{render:!1},selectors:{slider:".image-gallery-wrap",elem:null,pagination:".carousel-pagination li"},breakpoints:[{mediaQuery:"screen and (max-width: 50em)"}]})}),define("pages/orderHistory",["require","app/common","app/ajaxHistory"],function(e){var t=(e("app/common"),e("app/ajaxHistory"));new t({renderItems:[".section-holder-content"],updateHistory:!0,modulesToReinit:[diy.instances.customFormElements]});$(document).on("updated.ajaxHistory",function(){!$(".ajax-loading").length||$(".js-product-listing").length||$(".js-search-results").length||($(".ajax-loading").remove(),$(".ajax-loading-parent").removeClass("ajax-loading-parent"))}),$(document).on("click",".js-sort-column",function(e){var i=$(this).attr("href"),n=$.ajax({type:"get",url:i,data:"",cache:!1,headers:{"cache-control":"no-cache"},timeout:5e4});e.preventDefault(),n.done(function(e){$(".section-holder-content").html(e)}),n.fail(function(){}),n.complete(function(){new t({renderItems:[".section-holder-content"],updateHistory:!0,modulesToReinit:[diy.instances.customFormElements]})})})}),define("pages/interstitial",["require","app/showMoreGrid"],function(e){var t=e("app/showMoreGrid");new t({showMore:{breakpoints:[{mediaQuery:"screen and (min-width: 30em) and (max-width: 50em)",settings:{shownItemsQty:3,increment:3}},{mediaQuery:"screen and (min-width: 50em)",isDefault:!0,settings:{shownItemsQty:8,increment:4}}]}})}),define("pages/addressbook",["app/ajaxlist"],function(e){new e}),define("pages/uservoice",["require","lang","app/common"],function(e){function t(){var e='<img src="/assets/img/ajax-loader-small.gif" alt="'+a.loading+'" />';$(".kb-articles").on("click.helfullArticle","#helpful-article",function(){var t=$(this).data("fetch");$.ajaxSetup({cache:!1}),$(this).after('<div id="helpful-response">'+e+"</div>"),$(this).remove(),$.getJSON(t,null,function(e){$("#helpful-response").html("<p>"+e.message+"</p>")})})}var i,n=e("lang"),a=n.uservoice,s="#message-subject",o="#contact-us-sideBar";e("app/common"),t(),i=function(){var e=0;return function(t,i){clearTimeout(e),e=setTimeout(t,i)}}(),$(s).length||(s="#message"),$(o).length||(o=".sideBar"),$(s).keyup(function(){var e,t,n,a=$(o).data("status");"ready"===a&&(e=$(this).val().trim(),null!==e&&e.length>2&&(t="requestType=search&input="+e,i(function(){""!==e&&(n=$(o).attr("data-fragment"),$(o).attr("data-status","loading.."),$.ajax({url:n+"?"+t,dataType:"json",type:"get",success:function(e){var t=$(o);"false"===e.empty&&t.html(e.fragment),$(o).attr("data-status","ready")}}))},500)))})}),define("pages/careers",["require","lang","app/common","app/ajaxCalls"],function(e){function t(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&++i;return i}var i,n,a,s,o,r,l,c,d,u,h=e("lang"),p=h.careers;return $(".js-careers-sales").length>0&&(i=p.sales),$(".js-careers-expert").length>0&&(i=p.expert),$(".js-careers-service").length>0&&(i=p.service),$(".js-careers-support").length>0&&(i=p.support),n=0,a=!1,s=1,o=t(i.questions),r=p.questionXofY.question+" "+s+" "+p.questionXofY.question+" "+o,$(".questionXofY").html(r),l="",c=e("app/common"),d=e("app/ajaxCalls"),u=$.ec(c.object,{constructor:function(e){this.config={id:".questions-container",selectors:{answer1:"#link0",answer2:"#link1",answer3:"#link2",btnNext:".next"}},$.extend(!0,this.config,e||{}),this.$={},this._loadObjects(!0),this.init()}}),u.prototype=$.extend(u.prototype,{_bindEvents:function(){var e=this;this.config;this.$.answer1.on("click",function(t){e.question1Submit(t)}),this.$.answer2.on("click",$.proxy(function(t){e.question2Submit(t)})),this.$.answer3.on("click",$.proxy(function(t){e.question3Submit(t)})),this.$.btnNext.on("click",$.proxy(function(t){e.btnNextSubmit()}))},question1Submit:function(e){var t;a!==!0&&(e.preventDefault(),$("#option0").prop("checked",!0),$(".next").show(),$("#link0").addClass("selected"),$("#link0").removeClass("unselected"),t=s-1,$("#link0 span.text").html(i.questions[t].answer[0]),a=!0)},question2Submit:function(e){var t;a!==!0&&(e.preventDefault(),$("#option1").prop("checked",!0),$(".next").show(),$("#link1").addClass("selected"),$("#link1").removeClass("unselected"),t=s-1,$("#link1 span.text").html(i.questions[t].answer[1]),a=!0)},question3Submit:function(e){var t;a!==!0&&(e.preventDefault(),$("#option2").prop("checked",!0),$(".next").show(),$("#link2").addClass("selected"),$("#link2").removeClass("unselected"),t=s-1,$("#link2 span.text").html(i.questions[t].answer[2]),a=!0)},btnNextSubmit:function(){var e;a=!1,$("#link0").removeClass("selected"),$("#link1").removeClass("selected"),$("#link2").removeClass("selected"),$("#link0").removeClass("unselected"),$("#link1").removeClass("unselected"),$("#link2").removeClass("unselected"),e=$('input[name="options"]:checked').val(),n+=parseInt(e,10),o>s?this.loadQuestions():this.results(n,l),s++,r="Question "+s+" of "+o,$(".questionXofY").html(r)},resetQuiz:function(){$("#link0").removeClass("selected"),$("#link1").removeClass("selected"),$("#link2").removeClass("selected"),$("#link0").removeClass("unselected"),$("#link1").removeClass("unselected"),$("#link2").removeClass("unselected"),n=0,s=0,this.loadQuestions(),$("#link0 span.text").html(i.questions[s].options[0]),$("#link1 span.text").html(i.questions[s].options[1]),$("#link2 span.text").html(i.questions[s].options[2]),s=1,r="Question "+s+" of "+o,$(".questionXofY").html(r),$(".quizFinal").toggleClass("quizFinal").toggleClass("quiz"),$(".next").hide(),$(".reset").hide(),$(".results-container").hide(),$(".questions-container").show(),$(".question").show(),$(".question-links").show(),$("input:radio[name=options]").each(function(){$(this).prop("disabled",!1)}),$("input:radio[name=options]").each(function(){$(this).prop("checked",!1)})},loadQuestions:function(){var e;$(".question").html(i.questions[s].text),$("#link0 span.text").html(i.questions[s].options[0]),$("#link1 span.text").html(i.questions[s].options[1]),$("#link2 span.text").html(i.questions[s].options[2]),$("#option0").val(i.questions[s].values[0]),$("#option1").val(i.questions[s].values[1]),$("#option2").val(i.questions[s].values[2]),$("#quiz-image").attr("src",i.questions[s].image),e=Math.round(100/o*s+100/o),$("#indicator-progress").css("width",e+"%"),$(".next").hide(),$("input:radio[name=options]").each(function(){$(this).prop("checked",!1)})},results:function(){var e,a,s,o,r=[];for(l="<p>"+p.resultsText+"</p>",$(".quiz").toggleClass("quiz").toggleClass("quizFinal"),$(".questions-container").hide(),$(".question-links").hide(),$(".question").hide(),$(".results-container").show(),$(".next").hide(),$(".reset").show(),0===n?(e="finishWidth0",a=0):141>=n?(e="finishWidth1",a=0):280>=n?(e="finishWidth1",a=1):420>=n?(e="finishWidth2",a=2):n>420&&(e="finishWidth3",a=2),$("#indicatorSuccess").attr("class",e),$("input:radio[name=options]").each(function(){$(this).prop("disabled",!0)}),s=t(i.results),l=i.results[a].description,$(".results").html(l),r=i.results[a].links,o=0;o<=r.length;o++)"find"===r[o]&&$(".find").show(),"apply"===r[o]&&$(".apply").show()},countProperties:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&++i;return i},runForm:function(){this.resetQuiz()},init:function(e){this.countProperties(e),this.runForm(),this._bindEvents()}}),diy.instances.careerform=new u,diy.instances.careerform}),define("pages/help-customer-health-and-safety",["require"],function(e){$("#ui-ean-search").on("change.eanNumber keyup.eanNumber",".js-validator_ean",function(){$("#eanLink").length&&$("#eanLink").remove()})}),define("pages/keep-heat-in",["require"],function(e){var t=function(e){this.config={form:$("#heat-bleed-form"),btnSubmit:$(".buttons .btn-primary"),qas:{addr1:$("input[id=contact-address-house-number]"),addr2:$("input[id=contact-address-address2]"),town:$("input[id=contact-address-city]"),postcode:$("input[id=contact-address-postcode]")},erf:{addr1:$("input[name=address1]"),addr2:$("input[name=address2]"),town:$("input[name=town]"),postcode:$("input[name=postcode]"),addressline:$("input[name=addressline]")}},$.extend(!0,this.config,e),this.buildAddress(this.config)};return t.prototype={buildAddress:function(e){e.btnSubmit.on("click",function(){var t;e.erf.addr1.attr("value",e.qas.addr1.val()),e.erf.addr2.attr("value",e.qas.addr2.val()),e.erf.town.attr("value",e.qas.town.val()),e.erf.postcode.attr("value",e.qas.postcode.val()),t=e.erf.addr1.val()+" "+e.erf.addr2.val()+", "+e.erf.town.val()+", "+e.erf.postcode.val(),e.erf.addressline.attr("value",t),e.form.attr("action","http://plug.energyresponseforce.com/building/?referral=B&Q")})}},new t}),define("pages/storeLocatorDetails",["config","app/google-maps"],function(){var e=(require("config").app,require("app/google-maps")),t="map_canvas";return $("#"+t).length>0&&(new e({canvasIDName:t,multipleLocations:!1,markerPopUps:!1,mapOptions:{defaultLatLngNameSelector:"[data-lat]:first",zoom:12,mapTypeId:"ROADMAP"},selectors:{mapDataPoints:".store-locator-details",getDirectionsSubmit:"#store-locator-search-btn",getDirectionsTextInput:"#find_store_direction",mapDiv:".store-locator-fields",hiddenLatInput:"#frm-latitude",hiddenLngInput:"#frm-longitude",travelModeOuter:"#travel-modes",travelModesElements:"input"}}),$(".cta-print-map").on("click",function(e){e.preventDefault(),window.print()})),{}}),define("pages/storeLocatorResults",["require","app/common","app/google-maps","app/ajaxlist"],function(e){var t=(e("app/common"),e("app/google-maps")),i=e("app/ajaxlist");$("#map_canvas").length>0?new t:new t({hasMap:!1}),new i({isTable:!0,container:"#ui-ajaxlist-1, #ui-ajaxlist-2, #ui-ajaxlist-3, #ui-ajaxlist-4, #ui-ajaxlist-5"})}),require(["config"],function(e){window.name="BQ",define("jquery",[],function(){return jQuery}),window.History={options:{disableSuid:!0}},function(){var e=new FontFaceObserver("kingfisher",{weight:400}),t=new FontFaceObserver("kingfisher",{weight:300}),i=new FontFaceObserver("kingfisher",{weight:700});window.Promise.all([t.check(),e.check(),i.check()]).then(function(){document.documentElement.className+=" font-kf-ready"})}(FontFaceObserver),require(["app/common","app/superbutton","app/cookies","app/productCarousel","app/follow-focus","app/external-links","app/toggleContactFields"]),require(["lib/fastclick"],function(e){e.attach(document.body)}),$("form").length>0&&require(["app/validation"]),$("[data-toggle]").length>0&&require(["app/toggletarget"]),$("#searchbar_form").length>0&&require(["app/predictiveSearch"]),$("#carousel-hero, .hero-slide").length>0&&require(["app/carousel-hero"]),$(".sideBar").length>0&&require(["app/sidebar"]),$(".masonry-grid").length>0&&require(["app/masonryGrid"]),$(".js-accordion").length>0&&require(["app/accordion"]),$(".my-basket").length>0&&require(["app/basket/miniBasket"]),$(".nav-carousel").length>0&&require(["app/nav-room"]),$(".site-header:not(.checkout)").length>0&&require(["app/headerSwitcher"]),$("#helpful-article").length>0&&require(["app/helpful-article"]),$(".nav-toggle").length>0&&require(["app/nav-toggle"]),$(".addthis_toolbox").length>0&&require(["app/addthisToolbox"]),$(".calculator-imperial-metric").length>0&&require(["app/calculators/metric"]),$(".calculator-radiator").length>0&&require(["app/calculators/btu"]),$(".calculator-ceiling-paint").length>0&&require(["app/calculators/coverage"]),$(".calculator-loft-insulation").length>0&&require(["app/calculators/coverage"]),$(".calculator-paving").length>0&&require(["app/calculators/coverage"]),$(".calculator-tiling").length>0&&require(["app/calculators/coverage"]),$(".calculator-wallpaint").length>0&&require(["app/calculators/coverage"]),$(".calculator-wallpaper").length>0&&require(["app/calculators/coverage"]),$(".pagination").length>0&&require(["app/pagination"]),$(".rangeexplorer").length>0&&require(["app/range-explorer"]),$(".wishlist-sidebar").length>0&&require(["app/wishlist"]),$(".sideBar").length>0&&require(["app/accessToLocalNav"]),$(".tooltip").length>0&&require(["app/tooltip"]),$("#ui-jump-top").length>0&&require(["app/jumphook"]),$("#js-current-location").length>0&&require(["app/lonlat"]),$(".link-list-thumbnailed.grid").length>0&&require(["app/promoGrids"]),$(".design-consultation").length>0&&require(["app/designConsultation"]),$(".start-modal").length>0&&require(["app/modal"]),$(".js-countdown").length>0&&require(["app/jquery.countdown"]),$(".product-bundles-group").length>0&&require(["app/product-bundles-group"]),$(".br-wrapper").length>0&&require(["app/bloomreach"]),$("body:not(.checkout-confirmation)").length&&$(".promo-blocks").length>0&&require(["app/promo-blocks"]),$("body").is('[class*="checkout-"]')||require(["app/backToTop"]),($(".media-player").length>0||$(".media-image").length>0)&&require(["app/mediaplayer"]),$(".js-qas").length>0&&require(["app/addressLookup"],function(e){$(".js-qas").each(function(){var t=$(this).data();t.addressLookup||(t.addressLookup=new e({id:this}))})}),$(".js-form-ajax").length>0&&require(["app/ajaxform"],function(e){
$(".js-form-ajax").each(function(){new e(this)})}),$("body.js-homepage").length>0&&require(["pages/homepage"]),$("body.js-basket").length>0&&require(["app/basket/mainBasket"]),$("body.js-search-results").length>0&&require(["pages/searchResults"]),$("body.js-product-listing").length>0&&require(["pages/productListing"]),$("body.js-product-details").length>0&&require(["pages/productDetails"]),$("body.js-landing-room").length>0&&require(["pages/landingRoom"]),$("body.js-landing-category").length>0&&require(["pages/landingCategory"]),$("body.js-landing-shop").length>0&&require(["pages/landingCategory"]),$("body.js-checkout-details").length>0&&require(["pages/checkout/details"]),$("body.js-checkout-payment").length>0&&require(["pages/checkout/payment"]),$("body.js-checkout-delivery").length>0&&require(["pages/checkout/delivery"]),$("body.js-checkout-review").length>0&&require(["pages/checkout/review"]),$("body.js-my-account-details").length>0&&require(["pages/myaccount-details"]),$("body.js-wishlist").length>0&&require(["pages/wishlist"]),$("body.js-wishlists").length>0&&require(["pages/wishlists"]),$("body.js-signin-reg").length>0&&require(["pages/signinReg"]),$("body.js-quick-order").length>0&&require(["pages/quickorder"]),$("body.js-saved-cards").length>0&&require(["pages/savedCards"]),$("body.js-content").length>0&&require(["pages/content"]),$("body.js-content-project").length>0&&require(["pages/content-project"]),$("body.js-content-inspiration").length>0&&require(["pages/content-inspiration"]),$("body.js-order-history").length>0&&require(["pages/orderHistory"]),$("body.js-interstitial").length>0&&require(["pages/interstitial"]),$("body.js-address-book").length>0&&require(["pages/addressbook"]),$("body.js-kb-pages").length>0&&require(["pages/uservoice"]),$("body.js-bespoke-careers").length>0&&require(["pages/careers"]),$("body.js-help-customer-health-and-safety").length>0&&require(["pages/help-customer-health-and-safety"]),$("body.js-keep-heat-in").length>0&&require(["pages/keep-heat-in"]),$("body.js-store-locator-details").length>0&&require(["pages/storeLocatorDetails"]),$("body.js-store-locator-results").length>0&&require(["pages/storeLocatorResults"]),Modernizr.placeholder||require(["polyfills/placeholder"])}),define("main",function(){});
//# sourceMappingURL=main.js.map