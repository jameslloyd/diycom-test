// Copyright 2006-2016 ClickTale Ltd., US Patent Pending
// Generated on: 5/5/2016 2:22:03 AM (UTC 5/5/2016 7:22:03 AM)

window.ClickTaleGlobal = window.ClickTaleGlobal || {};
ClickTaleGlobal.scripts = ClickTaleGlobal.scripts || {};
ClickTaleGlobal.scripts.filter = ClickTaleGlobal.scripts.filter || (function () {
    var recordingThreshold = Math.random() * 100;

    return {
        isRecordingApproved: function(percentage) {
            return recordingThreshold <= percentage;
        }
    }
})();

			
// Copyright 2006-2016 ClickTale Ltd., US Patent Pending
// PID: 152
// Generated on: 5/5/2016 2:22:03 AM (UTC 5/5/2016 7:22:03 AM)

var ctRules_PrePCC={"rules":"name|Action+%7C+All+pages:+Clicked+on+Search+field|action|type|CTEventAction|eventName|Action+%7C+All+pages:+Clicked+on+Search+field|triggers|ClickCondition|ctSelector|elementAddressing|tagCode|index|elementID|searchbar_form|search|question|alias|INPUT|states|LocationCondition|url|http://www.diy.com/|mode|AllPages|Action+%7C+Homepage:+Clicked+on+Shop+by+Department+n|Action+%7C+Homepage:+Clicked+on+Shop+by+Department+navigation|site-navigation|DIV|Equals^284|0|14|0|284|0|284|2|1UU|0|1NT|0|284|0|14|0|26M|0|284|0|39|0|24|0|284|0^^@$0|1|2|$3|4|5|6]|7|$3|8|9|$A|@$B|U|C|V]|$B|W|C|X]|$B|Y|C|Z]|$B|10|C|11]|$B|12|D|E|C|13]|$B|14|D|F|0|G|C|15]]]|H|I]|J|$3|K|L|M|N|O]]|$0|P|2|$3|4|5|Q]|7|$3|8|9|$A|@$B|16|C|17]|$B|18|C|19]|$B|1A|D|R|C|1B]|$B|1C|C|1D]|$B|1E|C|1F]|$B|1G|C|1H]|$B|1I|C|1J]]]|H|S]|J|$3|K|L|M|N|T]]]","isTransformed":true}; (function(){function Rule(e){logger.log("Rule name: ",e.name),this.name=e.name;var t=actionsFactory.construct(e.action,e),n=observablesFactory.construct(e.triggers),r=statesFactory.construct(e.states);n&&n.subscribe(function(){r.evaluate()&&t.execute()}),logger.log("\n")}function Observable(){this.subscribers=[]}function State(e){}function Action(e){}function ClickObservable(e){Observable.call(this);var t=this;bindToClick(e,function(){logger.log("Click event associated with selector: ",e),t.notify(e)})}function onMouseDown(e){currentMouseDownElement=e.target||e.srcElement}function onMouseUp(e){var t,n=e.target||e.srcElement;if(n===currentMouseDownElement){logger.log("Click detected on element: ",n);for(t in clickHandlers)clickHandlers.hasOwnProperty(t)&&isAncestor(t,n)&&clickHandlers[t].forEach(function(t){t.call(null,e)})}currentMouseDownElement=null}function bindToClick(e,t){var n=getSelector(e);clickHandlers[n]=clickHandlers[n]||[],clickHandlers[n].push(t)}function getSelector(e){switch(Object.keys(e)[0]){case"elementAddressing":return JSON.stringify(e.elementAddressing);case"css":return e.selector}}function getElementsFromSelector(e){var t=[],n=ct.ElementAddressing.elementFromPath(JSON.parse(e),document.body,!0);return n&&t.push(n),t}function isAncestor(e,t){for(var n=!1,r=t,o=getElementsFromSelector(e);!n&&"HTML"!==r.tagName&&r.parentElement;)n=isInNodeList(o,r),r=r.parentElement;return n}function isInNodeList(e,t){var n,r=e.length;for(n=0;r>n;n+=1)if(e[n]===t)return!0;return!1}function OrObservable(e){Observable.call(this);var t=this;e.forEach(function(e){e.subscribe(function(){t.notify()})})}function PageLoadObservable(){Observable.call(this);var e=this;onRulesBoundHandlers.push(function(){logger.log("PageLoad event"),e.notify()})}function CTEventAction(e){this.eventName=e,logger.log("Event name: ",this.eventName)}function LocationState(e){this.url=e.url.toLowerCase(),this.mode=e.mode,this.ignoreQueryString=e.ignoreQueryString,logger.log("Location mode: ",this.mode),logger.log("Location URL: ",this.url),logger.log("Location Ignore Query String: ",this.ignoreQueryString)}function init(){var e=whenRecoding.bind(void 0,startRulesEngine);onDomReady(e)}function whenRecoding(e){if("undefined"!=typeof window.ClickTaleIsRecording&&window.ClickTaleIsRecording()===!0)e();else{var t=window.ClickTaleOnRecording;window.ClickTaleOnRecording=function(){e(),"undefined"!=typeof t&&"function"==typeof t&&t.apply(this,arguments)}}}function startRulesEngine(){try{if(!isSupportedBrowser())return;ct.ElementAddressing.bootstrap(window,!0),buildRules()}catch(e){logger.error("startRulesEngine: ",e)}}function onDomReady(e){function t(){r||(r=!0,e())}function n(){if(!r)try{document.documentElement.doScroll("left"),t()}catch(e){setTimeout(n,10)}}var r=!1;if("complete"===document.readyState||"interactive"===document.readyState)return void t();if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1);else if(document.attachEvent){try{var o=null!=window.frameElement}catch(i){}document.documentElement.doScroll&&!o&&n(),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t()})}if(window.addEventListener)window.addEventListener("load",t,!1);else if(window.attachEvent)window.attachEvent("onload",t);else{var a=window.onload;window.onload=function(){a&&a(),t()}}}function isSupportedBrowser(){try{if("function"!=typeof ClickTaleDetectAgent)return!1;var e=ClickTaleDetectAgent();if(!e)return!1;if(e.t==e.IE&&e.v<9)return!1}catch(t){return logger.error("isSupportedBrowser: ",t),!1}return!0}function buildRules(){if(ctRules_PrePCC){var e=null;e=ctRules_PrePCC.isTransformed?rulesEngine.jsonUnpacker.unpack(ctRules_PrePCC.rules):ctRules_PrePCC.rules,rules=e.map(function(e){return new Rule(e)})}onRulesBoundHandlers.forEach(function(e){e()})}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(r.prototype=this.prototype),o.prototype=new r,o}),"function"!=typeof Object.create&&(Object.create=function(){function e(){}var t=Object.prototype.hasOwnProperty;return function(n){if("object"!=typeof n)throw TypeError("Object prototype may only be an Object or null");e.prototype=n;var r=new e;if(e.prototype=null,arguments.length>1){var o=Object(arguments[1]);for(var i in o)t.call(o,i)&&(r[i]=o[i])}return r}}());var logger=function(){function e(){var e=Array.prototype.slice.call(arguments);n&&(window.console&&window.console.log?window.console.log.apply(window.console,e):window.alert&&window.alert(e.join(" ")))}for(var t={},n=!(!window.localStorage||"true"!==localStorage.getItem("ctRuleEngineDebug")),r=window.location.search.split("&"),o=[],i=0;i<r.length;i++)/^\??ctRuleEngine=/.test(r[i])&&o.push(r[i]);return o.length&&(n="true"===o[0].split("=").splice(1)[0],window.localStorage&&localStorage.setItem("ctRuleEngineDebug",n)),t.log=function(){e.apply(this,arguments)},t.error=function(t){e.apply(this,arguments)},t}();!function(){function e(e,t){var n=e.split("."),r=k;!(n[0]in r)&&r.execScript&&r.execScript("var "+n[0]);for(var o;n.length&&(o=n.shift());)n.length||t===C?r=r[o]?r[o]:r[o]={}:r[o]=t}function t(e,t){var n;if(e.map)n=e.map(t,C);else{n=[];for(var r=e.length,o=window,i=0;r>i;i++)n.push(t.call(o,e[i],i))}return n}function n(e,t){var n;if(e.filter)n=e.filter(t,C);else{n=[];for(var r=e.length,o=window,i=0;r>i;i++){var a=e[i];t.call(o,a,i)&&n.push(a)}}return n}function r(e,t){R||(e.ClickTaleSetCustomElementID=c(e.ClickTaleSetCustomElementID),R=E),t&&i(I,e.document.documentElement),D=E}function o(e){}function i(e,t){var n=t.firstChild,r=u(t).CustomID;r&&(r in e?(P[r]=E,o("duplicate registration of custom id "+r+"were found on multiple elements")):e[r]=t);for(;n;n=n.nextSibling)1===n.nodeType&&i(e,n)}function a(e,t){u(e).CustomID=t}function c(e){return function(t,n){n in I?(P[n]=E,o("duplicate registration of custom id "+n+" were found on multiple elements")):(e(t,n),D&&(I[n]=t))}}function u(e){var t=e.ClickTale;return t||(t={},e.ClickTale=t),t}function l(e){return w.getComputedStyle?w.getComputedStyle(e,O):e.currentStyle}function s(e){return N[e]||(N[e]=(e.charCodeAt(0)-64&31)+((e.charCodeAt(1)-64&28)<<3)+((e.charCodeAt(2)-64&30)<<7)),N[e]}function d(e){return(e.charCodeAt(0)-64&7)+((e.charCodeAt(0)-64&16)>>1)+((e.charCodeAt(1)-64&4)<<2)+((e.charCodeAt(3)-64&4)<<3)}function f(e,t,n){var r,o,i,a,c,f,g=0,v=O;r=S;for(var h,y=O,b=O,w=t.length,C=0;e&&w>C;C++)for(r=S,b=t[C],v=e.firstChild,g=0;!r&&v;v=v.nextSibling)if(1===v.nodeType&&s(v.tagName)===b.tagCode){if(g===b.index){if(y=v,e=b.name,r=b.typeCode,o=b.customID,f=b.elementID,i=p(y,"id"),a=p(y,"type"),c=p(y,"name"),h=u(y).CustomID,!m([o,h])&&o!=h||!m([f,i])&&f!=i||!m([e,c])&&e!=c||!m([r,a])&&a&&r!=d(a))return O;r=E,e=y}g++}return n?e:(r=r&&"none"!==l(e).display.toLowerCase())?e:O}function p(e,t){var n=e.getAttributeNode(t);return n?n.value:O}function m(e){return T(e,function(e){return!e})}function g(e,t){var n,r=t.customID;if(r){var i;r in P&&P[r]?o("duplicate custom id "+r+" were found on multiple elements"):i=I[r],n=i}else e:{if(r=t.elementID){try{n=e.querySelectorAll("#"+r),n.length||(n=e.querySelectorAll("[id='"+r.replace(/'/g,"\\'")+"']"))}catch(a){n=e.querySelectorAll("[id='"+r.replace(/'/g,"\\'")+"']")}if(n&&0!==n.length){if(1===n.length){n=n[0];break e}o("duplicate id "+r+" were found on multiple elements.")}else o("no element with id "+r+" was found.")}n=C}return n}function v(e,t){for(var n,r,i=t.length,a=i,c={},u=e.ownerDocument;a>0;a--){if(n=t[a-1],r=g(u,n),!r&&(n=n.name)&&a===i){r=u;var l,s=t,d=C,f=O,p=s.slice(0,a-1);e:{l=r;for(var m=p.length,v=C,v=C;m>0;m--)if(v=p[m-1],(v=g(l,v))&&1===v.nodeType&&"form"===v.tagName.toLowerCase()){l=v;break e}l=O}(d=l)?f=h(r,n,d,s):o("could not resolve form. form doesn't have an anchor."),r=f}if(r)return i=t.slice(a,i),c.b=i,c.a=r,c}return c.b=t,c.a=e,c}function h(e,t,r,i){var a,e=e.getElementsByName(t);if(1<e.length){if(e=n(e,function(e){return A(r,e)}),b(e))return t=i[i.length-1].index,y(e,t);o("duplicate name "+t+" found on multiple non radio elements.")}else 1===e.length&&(i=e[0],A(r,i)?a=i:o("could not resolve nested element with name "+t+" in form."));return a}function y(e,t){for(var n,r,o,i=[],a=S,c=0;c<e.length;c++)if(o=e[c],r=o.parentNode,-1===L(i,r)&&(i.push(r),r=r.getElementsByTagName(o.tagName),r.length-1>=t)){if(a)return O;n=r[t],a=E}return n}function b(e){for(var t=0;t<e.length;t++){var n=p(e[t],"type");if(!n||"radio"!==n.toLowerCase())return S}return E}var w,C=void 0,E=!0,O=null,S=!1,k=this,A=function(){var e=document.documentElement;return e.compareDocumentPosition||e.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e;return e===t||n.contains&&n.contains(t)||e.compareDocumentPosition&&16&e.compareDocumentPosition(t)}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return E;return S}}(),L=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=e.length,r=0;n>r;r++)if(e[r]===t)return r;return-1},T=Array.prototype.every?function(e,t){return e.every(t)}:function(e,t){for(var n=e.length,r=0;n>r;r++)if(!t(e[r]))return S;return E},D=S,R=S,P={},I={},F=c(a),N={};e("ct.ElementAddressing.bootstrap",function(e,t){t=!!t,w=e,e.ClickTaleSetCustomElementID=a,/complete|interactive/.test(document.readyState)?r(e,t):e.document.addEventListener?e.document.addEventListener("DOMContentLoaded",function(){r(e,t)},S):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&r(e,t)})}),e("ct.ElementAddressing.elementFromPath",function(e,n,r){var o=!(e[0]instanceof Array);return o&&(e=[e]),e=t(e,function(e){return e=v(n,e),e.a&&0<e.b.length&&(e.a=f(e.a,e.b,r)),!r&&e.a&&"hidden"===l(e.a).visibility.toLowerCase()?O:e.a}),o?e[0]:e}),e("ct.ElementAddressing.pathFromElement",function(e,t){var n,r=0,o=0,i=O,a=[],c=e;if(!t)return a;for(;c&&c!==t;)if(1!==c.nodeType)c=c.parentNode;else{for(o=0,i={},e=c,r=s(c.nodeName),i.tagCode=r,(n=u(e).CustomID)&&(i.customID=n),(n=p(e,"id"))&&(i.elementID=n),(n=p(e,"name"))&&(i.name=n),(n=p(e,"type"))&&(i.typeCode=d(n)),n=c;n=n.previousSibling;)s(n.nodeName)===r&&o++;i.index=o,c=c.parentNode,a.push(i)}return a.reverse(),a}),e("ct.ElementAddressing.elementAndVisibilityFromPath",function(e,n){var r=!(e[0]instanceof Array);r&&(e=[e]);var o=t(e,function(e){if(e=v(n,e),e.a&&0<e.b.length&&(e.a=f(e.a,e.b,E)),e.a){var t={};t.dom=e.a,t.isHidden="hidden"===l(e.a).visibility.toLowerCase(),e=t}else e=O;return e});return r?o[0]:o}),e("ct.ElementAddressing.setCustomElementID",F),e("ct.ElementAddressing.calcTagCode",s),e("ct.ElementAddressing.calcTypeCode",d)}();var exports={},rulesEngine=exports;Observable.prototype.subscribe=function(e){this.subscribers.push(e)},Observable.prototype.notify=function(){var e=this;e.subscribers.forEach(function(t){t.apply(e,arguments)})};var observablesFactory={construct:function(e){return null==e?null:this["construct"+e.type.replace("Condition","")](e)}};State.prototype.evaluate=function(e){};var statesFactory={construct:function(e){return this["construct"+e.type.replace("Condition","")](e)}},actionsFactory={construct:function(e,t){return this["construct"+e.type.replace("Action","")](e,t)}};Action.prototype.execute=function(e){},ClickObservable.prototype=Object.create(Observable.prototype),ClickObservable.prototype.constructor=ClickObservable,observablesFactory.constructClick=function(e){return new ClickObservable(e.ctSelector)},document.addEventListener&&(document.addEventListener("mousedown",onMouseDown,!1),document.addEventListener("mouseup",onMouseUp,!1));var clickHandlers={},currentMouseDownElement=null;OrObservable.prototype=Object.create(Observable.prototype),OrObservable.prototype.constructor=OrObservable,observablesFactory.constructOr=function(e){var t=e.childConditions.map(function(e){return observablesFactory.construct(e)});return new OrObservable(t)},PageLoadObservable.prototype=Object.create(Observable.prototype),PageLoadObservable.prototype.constructor=PageLoadObservable,observablesFactory.constructPageLoad=function(){return new PageLoadObservable},CTEventAction.prototype=Object.create(Action.prototype),CTEventAction.prototype.constructor=Action,CTEventAction.prototype.execute=function(){"function"==typeof window.ClickTaleEvent&&window.ClickTaleEvent(this.eventName),logger.log("ClickTaleEvent: "+this.eventName)},actionsFactory.constructCTEvent=function(e){return new CTEventAction(e.eventName)},LocationState.prototype=Object.create(State.prototype),LocationState.prototype.constructor=State,LocationState.prototype.evaluate=function(e){var t=e||window.location.href;switch(t=t.toLowerCase(),this.ignoreQueryString===!0&&(t=t.split(/[?#]/)[0],this.url=this.url.split(/[?#]/)[0]),this.mode){case"AllPages":return!0;case"StartsWith":return 0==t.indexOf(this.url);case"Equals":return t===this.url;case"Contains":return t.indexOf(this.url)>-1}},statesFactory.constructLocation=function(e){return new LocationState(e)},function(e){var t=-1,n=-2,r=-3,o=-4,i=-5,a=function(e){var a=e.split("^"),l=[],s=a[0];if(""!==s){s=s.split("|");for(var d=0,f=s.length;f>d;d++)l.push(c(s[d]))}if(s=a[1],""!==s){s=s.split("|");for(var d=0,f=s.length;f>d;d++)l.push(u(s[d]))}if(s=a[2],""!==s){s=s.split("|");for(var d=0,f=s.length;f>d;d++)l.push(parseFloat(s[d]))}delete s;for(var p="",m=[],g=a[3].length,d=0;g>d;d++){var v=a[3].charAt(d);"|"===v||"$"===v||"@"===v||"]"===v?(p&&(m.push(u(p)),p=""),"|"!==v&&m.push(v)):p+=v}var h=m.length,y=0;return function b(){var e=m[y++];if("@"===e){for(var a=[];h>y;y++){var c=m[y];if("]"===c)return a;if("@"===c||"$"===c)a.push(b());else switch(c){case t:a.push(!0);break;case n:a.push(!1);break;case r:a.push(null);break;case i:a.push(void 0);break;case o:a.push("");break;default:a.push(l[c])}}return a}if("$"===e){for(var a={};h>y;y++){var u=m[y];if("]"===u)return a;u=u===o?"":l[u];var c=m[++y];if("@"===c||"$"===c)a[u]=b();else switch(c){case t:a[u]=!0;break;case n:a[u]=!1;break;case r:a[u]=null;break;case i:a[u]=void 0;break;case o:a[u]="";break;default:a[u]=l[c]}}return a}throw new TypeError("Bad token "+e+" isn't a type")}()},c=function(e){return"string"!=typeof e?e:e.replace(/\+|%2B|%7C|%5E|%25/g,function(e){return{"+":" ","%2B":"+","%7C":"|","%5E":"^","%25":"%"}[e]})},u=function(e){return parseInt(e,36)};e.jsonUnpacker={unpack:function(e){return a(e)}}}(exports);var rules,onRulesBoundHandlers=[];init();}());

/*browsers exclusion start*/function doOnlyWhen(toDoHandler, toCheckHandler, interval, times, failHandler) {
    if ((!toDoHandler) || (!toCheckHandler)) return;
    if (typeof interval == "undefined") interval = 1000;
    if (typeof times == "undefined") times = 20;

    if (--times < 0 && typeof failHandler === 'function') {
        failHandler();
        return;
    }
    if (toCheckHandler()) {
        toDoHandler();
        return;
    }

    setTimeout(function () { doOnlyWhen(toDoHandler, toCheckHandler, interval, times); }, interval);
}
doOnlyWhen(function () { var ct_UA = ClickTaleDetectAgent(); if (!(((ct_UA.t == ct_UA.FF && ct_UA.v == 42) || (ct_UA.t == ct_UA.IE && ct_UA.v <= 8)))) { (function(){var d=!0,e=!1,f=this;var i,k,l,m;function aa(){return f.navigator?f.navigator.userAgent:null}m=l=k=i=e;var q;if(q=aa()){var ba=f.navigator;i=0==q.indexOf("Opera");k=!i&&-1!=q.indexOf("MSIE");l=!i&&-1!=q.indexOf("WebKit");m=!i&&!l&&"Gecko"==ba.product}var ca=i,r=k,u=m,v=l,w;
a:{var x="",y;if(ca&&f.opera)var z=f.opera.version,x="function"==typeof z?z():z;else if(u?y=/rv\:([^\);]+)(\)|;)/:r?y=/MSIE\s+([^\);]+)(\)|;)/:v&&(y=/WebKit\/(\S+)/),y)var da=y.exec(aa()),x=da?da[1]:"";if(r){var A,ea=f.document;A=ea?ea.documentMode:void 0;if(A>parseFloat(x)){w=""+A;break a}}w=x}var fa={};
function B(a){var b;if(!(b=fa[a])){b=0;for(var g=(""+w).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),h=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),j=Math.max(g.length,h.length),c=0;0==b&&c<j;c++){var ua=g[c]||"",G=h[c]||"",n=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var t=n.exec(ua)||["","",""],p=o.exec(G)||["","",""];if(0==t[0].length&&0==p[0].length)break;b=((0==t[1].length?0:parseInt(t[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==t[1].length?0:parseInt(t[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==t[2].length)<(0==p[2].length)?-1:(0==t[2].length)>(0==p[2].length)?1:0)||(t[2]<p[2]?-1:t[2]>p[2]?1:0)}while(0==b)}b=fa[a]=0<=b}return b}var ga={};function ha(){ga[9]||(ga[9]=r&&!!document.documentMode&&9<=document.documentMode)};!r||ha();!r||ha();r&&B("8");!v||B("528");u&&B("1.9b")||r&&B("8")||ca&&B("9.5")||v&&B("528");!u||B("8");function C(a,b,g,h,j){a&&b&&("undefined"==typeof g&&(g=1E3),"undefined"==typeof h&&(h=20),0>--h?"function"===typeof j&&j():b()?a():setTimeout(function(){C(a,b,g,h,j)},g))};function D(a,b){var g=Element.prototype;D=function(a,j){return D.e.call(a,j)};D.e=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector;return D(a,b)}function E(a,b){E=Element.prototype.closest?function(a,h){return Element.prototype.closest.call(a,h)}:function(a,h){for(;a&&!D(a,h);)a=a.parentElement;return a};return E(a,b)};function ia(a){function b(){g||(g=d,a())}var g=e;"complete"===document.readyState||"interactive"===document.readyState?b():document.addEventListener&&document.addEventListener("DOMContentLoaded",b,e)}
function F(a,b,g,h,j){"string"===typeof a?(a=document.querySelectorAll(a),Array.prototype.forEach.call(a,function(a){F(a,b,g,h,j)})):a instanceof Array||a instanceof NodeList?Array.prototype.forEach.call(a,function(a){F(a,b,g,h,j)}):a.addEventListener(b,function(a,h,j,b,g){return function(t){if("function"===typeof j)j.apply(this,arguments),g&&a.removeEventListener(h,arguments.callee,e);else{var p=t.target;E(p,j)&&(b.apply(p,arguments),g&&a.removeEventListener(h,arguments.callee,e))}}}(a,b,g,h,j),
e)}function ja(a,b){document.addEventListener("mouseup",function(g){a===g.target&&b();document.removeEventListener("mouseup",arguments.callee,e)},e)}function ka(a,b){function g(h){document.removeEventListener("touchend",arguments.callee,e);a===h.target&&b()}document.addEventListener("touchend",g,e);document.addEventListener("touchmove",function(a){document.removeEventListener("touchmove",arguments.callee,e);document.removeEventListener("touchend",g,e)},e)}
function H(a,b){var g=I();g&&(H=g.m?ka:ja,H(a,b))};function J(a,b){"function"===typeof ClickTaleEvent&&(b?J.b[a]!==d&&(J.b[a]=d,ClickTaleEvent(a)):ClickTaleEvent(a))}J.b={};function la(a){"function"===typeof ClickTaleRegisterFormSubmit&&ClickTaleRegisterFormSubmit(a)}function ma(a){"function"===typeof ClickTaleRegisterFormSubmitSent&&ClickTaleRegisterFormSubmitSent(a)}function K(a){"function"===typeof ClickTaleRegisterFormSubmitFailure&&(a?ClickTaleRegisterFormSubmitFailure(a):ClickTaleRegisterFormSubmitFailure())}
function L(a,b){"function"===typeof window.ClickTaleRegisterElementAction&&ClickTaleRegisterElementAction(a,b)}function M(a){"function"===typeof window.ClickTaleRegisterElementAction&&(ClickTaleRegisterElementAction("mouseover",a),ClickTaleRegisterElementAction("click",a))}function N(a,b){var g={},h;for(h in a)g[h]=a[h];g.target=b;g.srcElement=b;M(g)}window.ClickTaleDetectAgent&&window.ClickTaleDetectAgent()&&window.ClickTaleDetectAgent();
function na(a,b){"object"==typeof a&&"string"==typeof b&&(window.ClickTaleContext&&-1!=document.referrer.indexOf(location.hostname)&&window.parent.ct&&window.parent.ct.ElementAddressing&&"function"===typeof window.parent.ct.ElementAddressing.setCustomElementID?window.parent.ct.ElementAddressing.setCustomElementID(a,b):(window.ClickTaleSetCustomElementID=window.ClickTaleSetCustomElementID||function(a,h){a.ClickTale=a.ClickTale||{};a.ClickTale.CustomID=h},window.ClickTaleSetCustomElementID(a,b)))}
function oa(){Array.prototype.forEach.call(document.querySelectorAll("[id]"),function(a){var b=a.id,a=document.querySelectorAll('[id="'+b+'"]'),g=pa;1<a.length&&!g[b]&&(g[b]=d,Array.prototype.forEach.call(a,function(a,j){na(a,b.replace(/\W/g,"_")+"_"+j)}))})}var pa={};function qa(a,b){"function"===typeof window.ClickTaleLogical&&(J.b={},pa={},b?window.ClickTaleLogical(a,b):window.ClickTaleLogical(a))}
function I(){if("function"===typeof ClickTaleDetectAgent){var a=ClickTaleDetectAgent();if(a)return I=function(){return a},I()}return null}function ra(){"function"===typeof ClickTaleRebindEvents&&O&&(O=e,ClickTaleRebindEvents(),setTimeout(function(){O=d},400))}var O=d;function P(a){if("function"===typeof ClickTaleRegisterTouchAction){var b=a.getBoundingClientRect();ClickTaleRegisterTouchAction(a,b.left+document.body.scrollLeft,b.top+document.body.scrollTop)}}
function sa(){var a;if(!a){a="mousedown";if("boolean"!=typeof Q){var b=I();b&&(Q=b.m)}Q&&(a="touchstart")}F(document,a,"img, a, button, textarea, input, select",function(a){var h=a.target,j=this;H(h,function(a,h){return function(){if(D(this,"button,a,textarea")&&this!=a)Q?P(this):N(h,this);else if(!Q){var j=function(){};document.addEventListener("click",function(a){return j=function(c){c.target===a&&(ta=d);document.removeEventListener("click",arguments.callee,e)}}(a),e);setTimeout(function(){ta||
M(h);document.removeEventListener("click",j,e);ta=void 0},200)}}.bind(j)}(h,a))})}var Q,ta;function R(a,b,g,h){R.d&&(R.d=e,h=h||400,b=b||document.location.href,"function"===typeof ClickTaleStop&&ClickTaleStop(),window.ClickTaleIncludedOnDOMReady=d,window.ClickTaleIncludedOnWindowLoad=d,"function"===typeof ClickTaleUploadPage&&ClickTaleUploadPage(void 0,void 0),qa(b,g),a(),setTimeout(function(){R.d=d},h))}R.d=d;function S(a){"function"===typeof ClickTaleExec&&ClickTaleExec(a)}var T=J,U=na;var V="",va=d,W=document.location.pathname.toLowerCase(),X=e,Y=null;C(function(){Y=ClickTaleDetectAgent().m?"Mobile":"Desktop"},function(){return"function"===typeof ClickTaleDetectAgent},100,50);function wa(a){R(function(){window.EventStr=window.EventStr+" - "+a;J(a);J(window.EventStr)},document.location.href)}function Z(a){return 0<a.length?d:e}function xa(a,b){jQuery(document).one("mouseup",function(g){a===g.target&&b()})}
function ya(a,b){jQuery(document).one("touchmove.ClickTale",function(){jQuery(document).off("touchend.ClickTale")});jQuery(document).one("touchend.ClickTale",function(g){a===g.target&&b()})}function za(a,b){if("object"==typeof a&&"string"==typeof b){var g=document.querySelector(b);if(g&&a.target!=g)if("touchstart"==a.type)P(g);else if("mousedown"==a.type){var h={},j;for(j in a)h[j]=a[j];h.target=g;h.srcElement=g;L("mouseover",h)}}}
function Aa(){setTimeout(function(){R(Ba,document.location.href)},1E3)}
function Ca(a){for(var b in a){var g=[];g[b]=new window.MutationObserver(function(a){a.forEach(function(a){var c=a.attributeName;if(c&&0<c.length&&!jQuery(a.target).hasClass("is-collapsed"))var j=0,h=setInterval(function(){var c=jQuery(a.target).parent().attr("id");Z(jQuery(a.target).find('.field:visible input:not([type="hidden"])').filter(function(a,c){return""!=jQuery(c).val()}))?(S('jQuery("#'+c+'").find(".field:visible input:not([type=\'hidden\'])").val("---------")'),clearInterval(h)):10<j++&&
clearInterval(h)},400)})});var h={attributes:d,attributeFilter:["class"],characterData:d,characterDataOldValue:d,attributeOldValue:d},j;(j=document.querySelector(a[b]+" .address-form"))&&g[b].observe(j,h)}}
function Ba(){if(window.FSR){var a="http://subs.app.clicktale.com/IntegrationEntry.ashx?Type=Playback&PID="+ClickTaleGetPID()+"&UID="+ClickTaleGetUID()+"&IntegrationToken=0b2f53a6520a326009967151cbef367cf007f0b6";window.FSR.CPPS.set("ClickTaleVisitorID",ClickTaleGetUID());window.FSR.CPPS.set("ClickTaleURL",a)}jQuery(document).on("mousedown","a.fsrAcceptButton",function(a){xa(a.target,function(){T("@ET@ Action | Foresee: Clicked on Yes, I'll give feedback")})});a=jQuery(window).width()/parseFloat(jQuery("body").css("font-size"));
50<=a?T("Onload | Desktop"):30<=a?T("Onload | Tablet"):T("Onload | Mobile");a=jQuery("#site-navigation");0<a.length&&U(a[0],"ctSiteNav");jQuery("#site-navigation .site-nav-sub>a").each(function(a,c){var h=jQuery.trim(jQuery(c).text().replace(/[ &]/g,""));0<h.length&&U(c,"ctNavSec_"+h)});jQuery(".menu.rooms").each(function(a,c){U(c,"ctNavRoom"+a)});jQuery("ul.nav-shop .has-product-noms").each(function(a,c){U(c,"ctNavSubMenu"+a)});a=jQuery(".mobile-nav-secondary.nav-categories");0<a.length&&U(a[0],
"ctMobileSiteNav");jQuery(".mobile-subnav").each(function(a,c){U(c,"ctNavMobileSubMenu"+a)});/\/500/i.test(window.location.pathname)&&K();if(-1<jQuery("title").text().toLowerCase().indexOf("technical error | diy at b&q"))T("Onload | Technical error | DIY at B&Q");else if(-1<jQuery("title").text().toLowerCase().indexOf("page not found | diy at b&q"))T("Onload | Page not found | DIY at B&Q");else if(jQuery("body").hasClass("product-details")){V="Product page";var b=jQuery(".price-container-wrap form");
Z(b)&&U(b[0],"price-container-wrapform");jQuery('[id^="s7-mediaview"]').each(function(a,c){U(c,this.id.replace(/\d/g,""))})}else if(-1<document.title.indexOf("Added To Basket"))V="Added to Basket";else if(-1<W.indexOf("/basket"))V="Basket",jQuery(".basket-item-wrapper").each(function(a,c){U(c,"basket-item-wrapper"+a)}),jQuery('input[name*="moveToPurchaseInfo"]:not([type="hidden"])').each(function(a,c){U(c,"moveToPurchaseInfo"+a)}),jQuery('input[name*="continueShoppingRedirection"]:not([type="hidden"])').each(function(a,
c){U(c,"continueShoppingRedirection"+a)}),jQuery('input[name*="RemoveItemFormHandler.removeItem"]:not([type="hidden"])').each(function(a,c){U(c,"removeItem"+a)}),jQuery("input.ico-saveLater").each(function(a,c){U(c,"saveLater"+a)}),(b={1:"Home Delivery products only",2:"Click & Collect products only",3:"Click & Collect and Home Delivery products"}[Z(jQuery(".btn-clickcollect"))<<1|Z(jQuery(".btn-homedelivery"))])&&T("Onload | "+V+" | "+b),Y&&0<jQuery("#baskets-form-id .basket-empty").length&&T("Onload | "+
Y+" "+V+": Empty");else if(-1<W.indexOf("/loginorguestcheckout"))V="Login/ Guest Checkout",jQuery("input#password").on("focus",function(a){L("mouseover",a)}),Y&&0<jQuery(".is-error:visible").length&&T("Onload |"+Y+" "+V+": Error validations",d);else if(-1<W.indexOf("checkout/confirmation"))V="Checkout confirmation";else if(-1<W.indexOf("checkout/details"))V="Checkout Details",b=function(){Z(jQuery(".addressForm:visible"))||Z(jQuery(".delivery-address:visible"))?(V+=": Guest",window.MutationObserver&&
Ca(["#ui-contact-address-qas","#ui-delivery-address-qas"])):Z(jQuery("#delivery-address-edit-form:visible"))?(V+=": Registered: Edit Address",va=e):Z(jQuery(".delivery-address-form:visible"))?(V+=": Registered: Add Address",va=e):Z(jQuery("#ui-list-deliveryAddress:visible"))&&(V+=": Registered",jQuery(".ico-remove").each(function(a,c){U(c,"ico-remove"+a)}))},C(b,function(){return 0<jQuery(".addressForm:visible").length||0<jQuery("#delivery-address-edit-form:visible").length||0<jQuery(".delivery-address-form:visible").length||
0<jQuery("#ui-list-deliveryAddress:visible").length},250,40,b);else if(-1<W.indexOf("checkout/delivery")){V="Checkout Delivery";"function"===typeof ClickTaleRegisterFormSubmitSuccess&&ClickTaleRegisterFormSubmitSuccess();if(window.MutationObserver){var g;g=new window.MutationObserver(function(a){a.forEach(function(a){var h=a.attributeName;if(h&&0<h.length&&!jQuery(a.target).hasClass("is-dom-removed"))var b=0,j=setInterval(function(){jQuery(a.target).parent().attr("id");Z(jQuery(a.target).find(".date-picker"))?
(g.disconnect(),jQuery("tbody td>a").each(function(a,c){var h=jQuery("tbody tr").index(jQuery(this).parents("tr")),b=jQuery(this).parents("tr").find("td").index(jQuery(this).parent());U(c,"cellID"+h+b)}),clearInterval(j)):10<b++&&clearInterval(j)},600)})});b={attributes:d,attributeFilter:["class"],characterData:d,characterDataOldValue:d,attributeOldValue:d};(a=document.querySelector(".calendar-wrapper"))&&g.observe(a,b)}Z(jQuery("h3.basket-sub-header"))&&T(V+": Delivery Error")}else if(-1<W.indexOf("checkout/payment"))V=
"Checkout Payment",Z(jQuery('form[lpformnum="1"]'))&&T("Onload | "+V+": Login user with saved card",d),Z(jQuery("#new-card-details-form"))?(V+=": New Card",window.MutationObserver&&(b=["#ui-payment-address-qas"],Ca(b))):window.MutationObserver&&(b=["#ui-savedCard-billing-address-qas"],Ca(b)),jQuery(document).on("change","#card-select",function(){Aa()});else if(-1<W.indexOf("checkout/review"))V="Checkout Review",b=jQuery('input[name*="confirmOrderCommit"][type="submit"]'),0<b.length&&U(b[0],"orderAndPayButton"),
b=jQuery("#hd-table"),a=jQuery("#cc-table"),0<b.length&&0<a.length?T("Onload | "+V+": Mixed Basket"):0==b.length&&0<a.length?T("Onload | "+V+": Click & Collect Basket"):0<b.length&&0==a.length&&T("Onload | "+V+": Home Delivery Basket");else if(-1<W.indexOf("diy/design_consultation"))V="Book a design consultant",a=jQuery(".field.buttons"),Z(a)&&(U(a[0],"buutonsSectionCTID"),b=a.find("a"),a=a.find('input[type="submit"]'),Z(b)&&U(b[0],"cencelButtonCTID"),Z(a)&&U(a[0],"submitButtonCTID")),-1<W.indexOf("thankyou")&&
(V+=": Thank you page");else if(/\/rooms\/bathroom\//i.test(W))if(a="",window.s&&window.s.pageName&&(b=window.s.pageName,/Shop:Bathroom:Bathroom Suites/i.test(b)&&(X=d),/Shop:Bathroom:Bathroom Suites:([^:]*)(:[^:]*)?:Sub Category Lister Page/i.test(b)&&(a=window.s.pageName.replace(/Shop:Bathroom:Bathroom Suites:([^:]*)(:[^:]*)?:Sub Category Lister Page/i,"$1"))),X&&(/R_RangePg_/.test(window.location.search)||document.getElementById("ui-range-gallery"))){V="BS sub category";if(a&&(T("Onload | "+V+
": "+a),b=jQuery("#ui-range-gallery a.hotspot-btn"),0<jQuery("#ui-range-gallery .hotspot").length)){var h=a.replace(" ","_");b.map(function(a,c){U(c,h+"_hotspot-btn_"+(a+1));U(jQuery(c).closest("li.hotspot")[0],h+"_hotspot_"+(a+1))})}b=jQuery("#ui-range-gallery ul~img");0<b.length&&U(b[0],"mainImg")}else X&&(/r_range_shop/.test(window.location.search)||/product-listing/i.test(document.body.getAttribute("class")))?(V="BS Product Range",jQuery("ul#product-listing").hasClass("product-grid-view")?T("Onload | "+
V+": Grid view",d):jQuery("ul#product-listing").hasClass("product-list-view")&&T("Onload | "+V+": List view",d),document.querySelectorAll(".sideBar")[0]&&(U(document.querySelectorAll(".sideBar")[0],"sideBar"),U(document.querySelectorAll(".sideBar h3")[0],"Refine")),document.querySelectorAll("#ui-sort-by")[0]&&U(document.querySelectorAll("#ui-sort-by")[0],"SortBy")):/\/bathroom-suites\//i.test(W)||X?V="Bathroom suites":/Shop:Bathroom:Category Page/.test(b)&&(V="Bathroom Category Page");else/\/product\/productcomparison\//i.test(W)&&
/bathroom-suites/.test(window.location.search)&&(V="BS Compare");V&&(T("Onload | "+V),Y&&T("Onload | "+Y+" "+V))}
function Da(){if(!window.ClickTaleFirstPCCGo){window.ClickTaleFirstPCCGo=d;window.amIPcc=d;if("function"===typeof window.jQuery.fn.on&&"undefined"!==typeof window.EventStr)jQuery(window).on("MMReady",function(a,b){if(""==window.EventStr)var c=setInterval(function(a,h){""!=window.EventStr&&(clearInterval(c),h&&wa(h))},200);else-1==window.EventStr.indexOf(b)&&b&&wa(b)});oa();sa();T("12420161300");Ba();if(0<jQuery(".mobile-nav-secondary.nav-categories").length)jQuery(document).on("touchstart",function(a){var b=
jQuery(a.target);ya(a.target,function(){var a=b.closest(".mobile-nav-secondary.nav-categories li").children("a");0<a.length&&P(a[0])})});if(""!=V&&va){var a=jQuery('a[id^="tt-toggle"]');Z(a)&&U(a[0],"tt-toggleShare");Z(jQuery(".is-error:visible"))&&T("Action | "+V+": Error validations",d);jQuery(document).on("click","a.btn",function(a){a=jQuery(a.target);Z(a.closest(".mini-basket"))&&T(a.hasClass("btn-primary")?"Action | all pages: Mini Basket: Clicked on Checkout":"Action | all pages: Mini Basket: Clicked on View Basket")});
jQuery(document).on("touchstart mousedown",function(a){var b=a.target,c=jQuery(b);H(b,function(){if(Z(c.closest(".share-this")))N(a,jQuery(".share-this")[0]);else if("Product page"==V){if(Z(c.closest(".product-addtocart-buttons"))&&c.is('input[name="shippingMethod"]')?(T(c.hasClass("btn-super-homedelivery")?"Action | "+V+": Clicked on Add to Basket: Home delivery":"Action | "+V+": Clicked on Add to Basket: Click and Collect"),M(a)):Z(c.closest(".review-write"))?M(a):Z(c.closest(".carousel-inner .btn-super-dropdown input"))&&
L("click",a),0<c.closest(".product-availability").length)if(0<c.closest("legend.btn-super-handle:visible").length){var g="",G=jQuery(".mm-t12-icon.mm-t12-checked");0<G.length&&(0<G.closest(".home-delivery").length?g=" (Home Delivery)":0<G.closest(".store-collection").length&&(g=" (Click & Collect)"));T("Action | "+V+": Clicked on Add to Basket"+g)}else 0<c.closest("i.mm-t12-icon:visible").length&&!c.closest("i.mm-t12-icon").hasClass("mm-t12-checked")&&!c.closest("i.mm-t12-icon").hasClass("mm-t12-disabled")&&
(0<c.closest(".home-delivery").length&&T("Action | "+V+": Checked Home Delivery"),0<c.closest(".store-collection").length&&T("Action | "+V+": Checked Click & Collect"))}else if("Added to Basket"==V)Z(c.closest(".message-btn-group"))?T(c.hasClass("btn-primary")?"Action | "+V+": Clicked on Go to Checkout":"Action | "+V+": Clicked on Continue Shopping"):Z(c.closest(".btn-super"))?T("Action | "+V+": Clicked on Add to Basket"):Z(c.closest(".product-title, .product-meta"))&&T("Action | "+V+": Clicked on a product");
else if("Basket"==V||"Login/ Guest Checkout"==V||-1<V.indexOf("Checkout")||"Book a design consultant"==V)if("Basket"==V&&(c.closest("input.btn-homedelivery.is-unselected").length?T("Action | "+V+": Switched to Home Delivery"):c.closest("input.btn-clickcollect.is-unselected").length&&T("Action | "+V+": Switched to Click & Collect")),c.is('input[type="submit"]'))if(g={".moveToPurchaseInfo":"Go to Checkout",".continueShoppingRedirection":"Continue Shopping",".emptyBasket":"Empty my basket",".startGuestCheckout":"Checkout as guest",
".login":"Sign in",".addBQCard":"apply",".claimCoupon":"Add discount",".addDiscountCard":"Apply discount",".applyHomeAddress":"Continue",".updateHomeAddress":"Continue",".proceedToPayment":"Continue",".moveToOrderReview":"Continue",".updateSavedDeliveryAddress":"Continue",".confirmOrderCommit":"Order and pay",".sendData":"Submit"},c.hasClass("ico-bin"))L("mouseover",a),T("Action | "+V+": Clicked on Remove",d);else if(c.hasClass("ico-saveLater"))L("mouseover",a),T("Action | "+V+": Clicked on Save for Later",
d);else if(0<c.closest("#mm_t15_copy .btn.btn-primary").length)T("Action | "+V+": Clicked on Order and pay",d);else if(c.hasClass("ico-remove"))M(a);else{if(c.attr("name")||"payment-form-submit"==b.id){var n;n="payment-form-submit"==b.id?"Continue":(n=c.attr("name").match(/\.[\w\W]+?$/))?g[n[0]]:"";n&&""!=n&&T("Action | "+V+": Clicked on "+n,d);L("mouseover",a);var o=jQuery("form.addressForm");"payment-form-submit"==b.id?o=jQuery("#new-card-details-form"):Z(jQuery(".design-consultation"))&&(o=jQuery(".design-consultation"));
if(o&&Z(o)&&n&&("Continue"==n||"Submit"==n))la(o[0]),ma(o[0]);setTimeout(function(){Z(jQuery(".is-error:visible"))&&(T("Action | "+V+": Error validations",d),o&&Z(o)&&n&&("Continue"==n||"Submit"==n)&&K(o[0]))},400)}}else-1<V.indexOf("Checkout")?c.hasClass("find-address")?(T("Action | "+V+": Clicked on Find Address",d),M(a)):c.is("a.btn.btn-secondary")&&!c.hasClass("new-address")?T("Action | "+V+": Clicked on Back",d):c.is("a.link")?(M(a),setTimeout(function(){ra()},150)):c.is(".js-validator_question")?
setTimeout(function(){ra()},50):c.hasClass("select-address")?(T("Action | "+V+": Clicked on Select Address",d),M(a)):c.is("#ui-contact-address-qas .update-address option, #ui-delivery-address-qas .update-address option, #ui-payment-address-qas .update-address option, #ui-savedCard-billing-address-qas .update-address option")?N(a,c.parent()[0]):c.is('[name="card-type"]')?Aa():c.is('[data-alternative="Keep current date"]')?setTimeout(function(){Z(jQuery(".message.error:visible"))&&T(V+": Delivery Error")},
2E3):"payment-form-submit"==b.id?(T("Action | "+V+": Clicked on Continue",d),o=jQuery("#new-card-details-form")[0],la(o),ma(o),setTimeout(function(){Z(jQuery(".is-error:visible"))&&(T("Action | "+V+": Error validations",d),Z(o)&&n&&"Continue"==n&&K(o))},400)):-1<V.indexOf("Delivery")&&c.is("a.change-current-date")&&C(function(){T("Action | "+V+": Delivery Error: unable to confirm a delivery date",d)},function(){return 0<jQuery(".message.error .msg-text .msg-title:visible:contains(We are unable to confirm a delivery)").length?
d:e},250,30):-1<V.indexOf("Book a design")&&(c.is("a.btn.btn-secondary")?(T("Action | "+V+": Clicked on Cancel",d),L("mouseover",a)):c.hasClass("btn-search-store")&&(T("Action | "+V+": Clicked on Find nearest store",d),M(a)));else"Bathroom Category Page"==V?c.closest("a.btn.btn-primary").length&&/shop now/i.test(c.closest("a.btn.btn-primary").text())?(T("Action | Bathroom Category: Clicked on Shop Now",d),c.is("a.btn.btn-primary")||N(a,c.closest("a.btn.btn-primary")[0])):c.closest('a.menu-item[href*="bathroom-suites"]').length?
T("Action | Bathroom Category: Clicked on Bathroom suite (Menu)",d):c.closest('.grid-item-wrap a[href*="bathroom-suites"]').length&&(T("Action | Bathroom Category: Clicked on Bathroom suite",d),c.is('.grid-item-wrap a[href*="bathroom-suites"]')||N(a,c.closest('.grid-item-wrap a[href*="bathroom-suites"]')[0])):"Bathroom suites"==V?c.closest('.masonry-wrap a[href*="R_RangePg"]').length?(g=c.closest('.masonry-wrap a[href*="R_RangePg"]'),T("Action | Bathroom suites: Clicked on New Bathroom suites",d),
c.is('.masonry-wrap a[href*="R_RangePg"]')||(g.hasClass("overlay")?N(a,g[0]):N(a,g.find("img:first-child")[0]))):c.closest('h2~div.grid a[href*="R_RangePg"]').length&&(T("Action | Bathroom suites: Clicked on All Bathroom suites",d),c.closest('h2~div.grid a[href*="R_RangePg"]').find("img").length&&N(a,c.closest('h2~div.grid a[href*="R_RangePg"]').find("img")[0])):"BS sub category"==V?c.closest("a.hotspot-btn").length?(T("Action | BS sub category: Clicked on Product Breakdown",d),N(a,c.closest("a.hotspot-btn")[0])):
c.closest('a.btn-primary[href*="r_range_shop"]').length?T("Action | BS sub category: Clicked on Shop Range",d):c.closest("legend~div>input.btn-super-homedelivery").length&&T("Action | BS sub category: Product Breakdown: Clicked on Add to Basket (home delivery)",d):"BS Product Range"==V?c.closest("input.btn-super-homedelivery").length?(T("Action | BS Product Range: Clicked on Add to Basket (home delivery)",d),g=c.closest("input.btn-super-homedelivery"),0<g.length&&N(a,g[0])):c.closest("a.m-t19-view-button").length?
T("Action | BS Product Range: Clicked on View Product details",d):c.closest('input[id^="compareMax4"]').length||c.closest('label[for^="compareMax4"]').length&&!c.is('a[href*="productcomparison"]')?T("Action | BS Product Range: Checked Compare",d):c.closest('a[href*="productcomparison"]').length?T("Action | BS Product Range: Clicked on Compare now",d):c.closest("#ui-facets-content .js-accordion-item .content-inner a").length&&(T("Action | BS Product Range: Interacted with any filter",d),g=c.closest(".js-accordion-item").find("h4 a").text(),
T("Action | BS Product Range: Sorted by "+g,d),0<c.parents("#ui-facets-content .js-accordion-item .content-inner a").length&&(g=c.closest("#ui-facets-content .js-accordion-item .content-inner a"),0<g.length&&N(a,g[0]))):"BS Compare"==V&&(c.closest("input.btn-super-homedelivery").length?T("Action | BS Compare: Clicked on Add to Basket (Home Delivery)",d):c.closest("a.btn.btn-secondary.needsclick").length&&T("Action | BS Compare: Clicked on Back to Listings",d))})});if(V&&Y)if(a="Mobile"==Y?"touchstart":
"mousedown",jQuery(document).on(a,'a.mobile-logo, button.mobile-nav-toggle.nav-categories-toggle, a[href^="/basket?"]',function(a){H(a.target,function(){var b=jQuery(a.target);0<b.closest("a.mobile-logo").length?(T("Action |"+Y+" all pages: Clicked on B&Q",d),b.is("a.mobile-logo")||P(b.closest("a.mobile-logo")[0])):0<b.closest("button.mobile-nav-toggle.nav-categories-toggle").length?(T("Action |"+Y+" all pages: Clicked on Hamburger menu",d),b.is("button.mobile-nav-toggle.nav-categories-toggle")||
P(b.closest("button.mobile-nav-toggle.nav-categories-toggle")[0])):0<b.closest('a[href^="/basket?"]').length&&(T("Action |"+Y+" all pages: Clicked on Basket icon",d),b.is('a[href^="/basket?"]')||P(b.closest('a[href^="/basket?"]')[0]))})}),"Basket"==V)jQuery(document).on(a,'input[name*="continueShoppingRedirection"]:visible, input[name*="emptyBasket"]:visible, input[name*="moveToPurchaseInfo"]:visible, input.ico-saveLater:visible, input[name*="removeItem"]:visible, #ui_bandq-club, #Add discount, #ui-basket-apply-discount-submit',
function(a){H(a.target,function(){var b=jQuery(a.target);0<b.closest('input[name*="continueShoppingRedirection"]').length?T("Action |"+Y+" "+V+": Clicked on Continue Shopping",d):0<b.closest('input[name*="emptyBasket"]').length?T("Action |"+Y+" "+V+": Clicked on Empty my basket",d):0<b.closest('input[name*="moveToPurchaseInfo"]').length?T("Action |"+Y+" "+V+": Clicked on Go to Checkout",d):0<b.closest("input.ico-saveLater").length?T("Action |"+Y+" "+V+": Clicked on Save for Later",d):0<b.closest('input[name*="removeItem"]').length?
T("Action |"+Y+" "+V+": Clicked on Remove",d):0<b.closest("#ui_bandq-club").length?(b=0<jQuery("#ui_bandq-club[disabled]").length?"disabled":"enabled",T("Action |"+Y+" "+V+": B&Q Club: Clicked on "+b+" Apply",d)):0<b.closest("#addCoupon").length?T("Action |"+Y+" "+V+": Add voucher(s): Clicked on Add discount",d):0<b.closest("#ui-basket-apply-discount-submit").length&&T("Action |"+Y+" "+V+": Add discount card: Clicked on Apply discount",d)})}),jQuery(document).ajaxComplete(function(a,b,c){/\/common\/checkout\/basket/i.test(c.url)&&
(/Add discount/i.test(c.data)?T("Action |"+Y+" "+V+": Add voucher(s): Submitted",d):/addBQCard=Apply/i.test(c.data)?T("Action |"+Y+" "+V+": B&Q Club: Submitted",d):/addDiscountCard=Apply discount/i.test(c.data)&&T("Action |"+Y+" "+V+": Add discount card: Submitted",d),setTimeout(function(){0<jQuery(".form-error:visible").length&&T("Action |"+Y+" "+V+": Error validations",d);0<jQuery(":contains(Some of the items in your basket have been updated)").length&&T("Action |"+Y+" "+V+": Price Update",d)},
500))});else if("Login/ Guest Checkout"==V)jQuery(document).on(a,'input[name*="startCheckout"], a[href*="forgot_password"], #have-password-no, #have-password-yes, label[for="have-password-no"], label[for="have-password-yes"]',function(a){var b=jQuery("#have-password-yes").is(":checked");H(a.target,function(){var c=jQuery(a.target);if(0<c.closest('input[name*="startCheckout"]').length)c="",jQuery("#have-password-no").is(":checked")?c=": Guest user":jQuery("#have-password-yes").is(":checked")&&(c=": Registered user"),
T("Action |"+Y+" "+V+": Clicked on Checkout now"+c,d),setTimeout(function(){0<jQuery(".is-error:visible").length&&T("Action |"+Y+" "+V+": Error validations",d)},500);else if(0<c.closest('a[href*="forgot_password"]').length)T("Action |"+Y+" "+V+": Clicked on Forgotten your password",d);else if(0<c.closest("#have-password-no").length||0<c.closest('label[for="have-password-no"]').length)b&&T("Action |"+Y+" "+V+": Switched to I don\u2019t have an account",d),za(a,"#have-password-no");else if(0<c.closest("#have-password-yes").length||
0<c.closest('label[for="have-password-yes"]').length)b||T("Action |"+Y+" "+V+": Switched to I have an account",d),za(a,"#have-password-yes")})});else if("Checkout Details: Guest"==V)jQuery(document).on(a,'input[name*="applyHomeAddress"], a[href="/basket"], input.find-address',function(a){H(a.target,function(){var b=jQuery(a.target);0<b.closest('input[name*="applyHomeAddress"]').length?(T("Action |"+Y+" "+V+": Clicked on Continue",d),setTimeout(function(){0<jQuery(".is-error:visible").length&&T("Action |"+
Y+" "+V+": Error validations",d)},500)):0<b.closest('a[href="/basket"]').length?T("Action |"+Y+" "+V+": Clicked on Back",d):0<b.closest("input.find-address").length&&T("Action |"+Y+" "+V+": Clicked on Find Address",d)})}),jQuery(document).on("input","select.address-list.select-address",function(){T("Action |"+Y+" "+V+": selected address from dropdown",d)});else if("Checkout Details: Registered"==V)jQuery(document).on(a,'input[name*="updateHomeAddress"], input[name*="updateSavedDeliveryAddress"], a[href="/basket"], a[href*="SHIPPING_ADDRESS"], a[href*="addNewDeliveryAddress"]',
function(a){H(a.target,function(){var b=jQuery(a.target);0<b.closest('input[name*="updateHomeAddress"]').length||0<b.closest('input[name*="updateSavedDeliveryAddress"]').length?(T("Action |"+Y+" "+V+": Clicked on Continue",d),setTimeout(function(){0<jQuery(".is-error:visible").length&&T("Action |"+Y+" "+V+": Error validations",d)},500)):0<b.closest('a[href="/basket"]').length?T("Action |"+Y+" "+V+": Clicked on Back",d):0<b.closest('a[href*="SHIPPING_ADDRESS"]').length?T("Action |"+Y+" "+V+": Clicked on Edit Address",
d):0<b.closest('a[href*="addNewDeliveryAddress"]').length&&T("Action |"+Y+" "+V+": Clicked on Add New Address",d)})}),jQuery(document).on("input","select.address-list.select-address",function(){T("Action |"+Y+" "+V+": selected address from dropdown",d)});else if("Checkout Delivery"==V)jQuery(document).on(a,'input[name*="proceedToPayment"], a[href="/basket"]',function(a){H(a.target,function(){var b=jQuery(a.target);0<b.closest('input[name*="proceedToPayment"]').length?(T("Action |"+Y+" "+V+": Clicked on Continue",
d),setTimeout(function(){0<jQuery(".is-error:visible").length&&T("Action |"+Y+" "+V+": Error validations",d)},500)):0<b.closest('a[href="/basket"]').length&&T("Action |"+Y+" "+V+": Clicked on Back",d)})}),jQuery(document).on("input","select.address-list.select-address",function(){T("Action |"+Y+" "+V+": selected address from dropdown",d)});else if("Checkout Review"==V)jQuery(document).on(a,'.field.buttons>input.btn-primary[type="submit"], a[href="/checkout/payment/"]',function(a){H(a.target,function(){var b=
jQuery(a.target);0<b.closest('.field.buttons>input.btn-primary[type="submit"]').length?(T("Action |"+Y+" "+V+": Clicked on Order and pay",d),setTimeout(function(){0<jQuery(".is-error:visible").length&&T("Action |"+Y+" "+V+": Error validations",d)},500)):0<b.closest('a[href="/checkout/payment/"]').length&&T("Action |"+Y+" "+V+": Clicked on Back",d)})});if("Basket"==V)jQuery(document).on("input","#v_code",function(a){a=jQuery(a.target).val();S("jQuery('#v_code').val(unescape('"+escape(a)+"'));")});
if("BS Product Range"==V){jQuery(document).on("change","#ui-sort-by",function(a){jQuery(a.target);T("Action | BS Product Range: Interacted with Sort by",d);T("Action | BS Product Range: Interacted with any filter",d)});jQuery(document).on("mousedown","#ui-sort-by",function(a){L("mouseover",a)});if(document.getElementById("local-navingation")||document.querySelectorAll(".sideBar")[0])window.setSideBarCustomeIds=function(){jQuery(".sideBar:eq(0) li.js-accordion-item").map(function(a,b){var g=jQuery(b),
h=g.find("h4 a").text();h&&0<h.length&&(U(b,"CT"+h+"Li"),g.find(".content-inner li a").map(function(a,b){U(b,"CT"+h+"A"+a)}))});var a=jQuery('#product-listing li form[id^="compareprod"]');a.length&&a.map(function(a,b){U(b,"product_"+(a+1))});jQuery(".btn-super-dropdown input").filter(function(){return""!=this.id}).each(function(a,b){U(b,"shippingMethod"+a)})},window.setSideBarCustomeIds(),jQuery(document).ajaxComplete(function(){window.setSideBarCustomeIds()}),jQuery(".sideBar:eq(0) .js-accordion-item h4 a").on("click",
function(a){N(a,a.target)});document.getElementById("ui-jump-hook")&&jQuery('#ui-jump-hook .layout-switcher input[type="submit"]').map(function(a,b){U(b,"layout-switcher-"+(a+1))})}}for(var a="input#search,input#contact-address-postcode-qas,input#ui-form-email-address,input#ui-prodCode,input#email-address-reg,input#search-kb".split(","),b=0;b<a.length;b++)if(jQuery(a[b]).length&&jQuery(a[b]).val().length){var g=jQuery(a[b]).val();S("jQuery('"+a[b]+"').val(unescape('"+escape(g)+"'));")}jQuery(document).on("input",
"input#search, input#contact-address-postcode-qas, input#ui-form-email-address, input#ui-prodCode, input#email-address-reg, input#search-kb",function(a){var b=jQuery(a.target),a=b.val();(b=b.attr("id"))&&S("jQuery('input#"+b+"').val(unescape('"+escape(a)+"'));")})}}
(function(a){function b(){2==++window.okToStartOn2&&a()}window.okToStartOn2=0;ia(function(){b()});if("function"==typeof ClickTaleIsRecording&&ClickTaleIsRecording()===d)b();else{var g=window.ClickTaleOnRecording||function(){};window.ClickTaleOnRecording=function(){b();return g.apply(this,arguments)}}})(function(){C(Da,function(){return window.jQuery&&"function"===typeof jQuery.fn.on&&Y?d:e},250,40)});})(); } }, function () { return (typeof ClickTaleDetectAgent === 'function'); }, 500, 20);
